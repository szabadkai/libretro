var kc=Object.defineProperty;var Ws=t=>{throw TypeError(t)};var Pc=(t,e,r)=>e in t?kc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var xe=(t,e,r)=>Pc(t,typeof e!="symbol"?e+"":e,r),ii=(t,e,r)=>e.has(t)||Ws("Cannot "+r);var W=(t,e,r)=>(ii(t,e,"read from private field"),r?r.call(t):e.get(t)),Ue=(t,e,r)=>e.has(t)?Ws("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Re=(t,e,r,s)=>(ii(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),Oe=(t,e,r)=>(ii(t,e,"access private method"),r);var sn=(t,e,r,s)=>({set _(l){Re(t,e,l,r)},get _(){return W(t,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(l){if(l.ep)return;l.ep=!0;const n=r(l);fetch(l.href,n)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pn=globalThis,Ss=pn.ShadowRoot&&(pn.ShadyCSS===void 0||pn.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Es=Symbol(),zs=new WeakMap;let Ol=class{constructor(e,r,s){if(this._$cssResult$=!0,s!==Es)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Ss&&e===void 0){const s=r!==void 0&&r.length===1;s&&(e=zs.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&zs.set(r,e))}return e}toString(){return this.cssText}};const Tc=t=>new Ol(typeof t=="string"?t:t+"",void 0,Es),Yn=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((s,l,n)=>s+(i=>{if(i._$cssResult$===!0)return i.cssText;if(typeof i=="number")return i;throw Error("Value passed to 'css' function must be a 'css' function result: "+i+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(l)+t[n+1],t[0]);return new Ol(r,t,Es)},Oc=(t,e)=>{if(Ss)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const s=document.createElement("style"),l=pn.litNonce;l!==void 0&&s.setAttribute("nonce",l),s.textContent=r.cssText,t.appendChild(s)}},qs=Ss?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const s of e.cssRules)r+=s.cssText;return Tc(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Cc,defineProperty:Rc,getOwnPropertyDescriptor:Mc,getOwnPropertyNames:jc,getOwnPropertySymbols:Nc,getPrototypeOf:Bc}=Object,Wt=globalThis,Hs=Wt.trustedTypes,Uc=Hs?Hs.emptyScript:"",oi=Wt.reactiveElementPolyfillSupport,Fr=(t,e)=>t,Hn={toAttribute(t,e){switch(e){case Boolean:t=t?Uc:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},As=(t,e)=>!Cc(t,e),Vs={attribute:!0,type:String,converter:Hn,reflect:!1,useDefault:!1,hasChanged:As};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Wt.litPropertyMetadata??(Wt.litPropertyMetadata=new WeakMap);let yr=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=Vs){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const s=Symbol(),l=this.getPropertyDescriptor(e,s,r);l!==void 0&&Rc(this.prototype,e,l)}}static getPropertyDescriptor(e,r,s){const{get:l,set:n}=Mc(this.prototype,e)??{get(){return this[r]},set(i){this[r]=i}};return{get:l,set(i){const a=l==null?void 0:l.call(this);n==null||n.call(this,i),this.requestUpdate(e,a,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Vs}static _$Ei(){if(this.hasOwnProperty(Fr("elementProperties")))return;const e=Bc(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Fr("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Fr("properties"))){const r=this.properties,s=[...jc(r),...Nc(r)];for(const l of s)this.createProperty(l,r[l])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[s,l]of r)this.elementProperties.set(s,l)}this._$Eh=new Map;for(const[r,s]of this.elementProperties){const l=this._$Eu(r,s);l!==void 0&&this._$Eh.set(l,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const l of s)r.unshift(qs(l))}else e!==void 0&&r.push(qs(e));return r}static _$Eu(e,r){const s=r.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const s of r.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Oc(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var s;return(s=r.hostConnected)==null?void 0:s.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var s;return(s=r.hostDisconnected)==null?void 0:s.call(r)})}attributeChangedCallback(e,r,s){this._$AK(e,s)}_$ET(e,r){var n;const s=this.constructor.elementProperties.get(e),l=this.constructor._$Eu(e,s);if(l!==void 0&&s.reflect===!0){const i=(((n=s.converter)==null?void 0:n.toAttribute)!==void 0?s.converter:Hn).toAttribute(r,s.type);this._$Em=e,i==null?this.removeAttribute(l):this.setAttribute(l,i),this._$Em=null}}_$AK(e,r){var n,i;const s=this.constructor,l=s._$Eh.get(e);if(l!==void 0&&this._$Em!==l){const a=s.getPropertyOptions(l),o=typeof a.converter=="function"?{fromAttribute:a.converter}:((n=a.converter)==null?void 0:n.fromAttribute)!==void 0?a.converter:Hn;this._$Em=l;const u=o.fromAttribute(r,a.type);this[l]=u??((i=this._$Ej)==null?void 0:i.get(l))??u,this._$Em=null}}requestUpdate(e,r,s){var l;if(e!==void 0){const n=this.constructor,i=this[e];if(s??(s=n.getPropertyOptions(e)),!((s.hasChanged??As)(i,r)||s.useDefault&&s.reflect&&i===((l=this._$Ej)==null?void 0:l.get(e))&&!this.hasAttribute(n._$Eu(e,s))))return;this.C(e,r,s)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:s,reflect:l,wrapped:n},i){s&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,i??r??this[e]),n!==!0||i!==void 0)||(this._$AL.has(e)||(this.hasUpdated||s||(r=void 0),this._$AL.set(e,r)),l===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var s;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[n,i]of this._$Ep)this[n]=i;this._$Ep=void 0}const l=this.constructor.elementProperties;if(l.size>0)for(const[n,i]of l){const{wrapped:a}=i,o=this[n];a!==!0||this._$AL.has(n)||o===void 0||this.C(n,void 0,i,o)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(s=this._$EO)==null||s.forEach(l=>{var n;return(n=l.hostUpdate)==null?void 0:n.call(l)}),this.update(r)):this._$EM()}catch(l){throw e=!1,this._$EM(),l}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(s=>{var l;return(l=s.hostUpdated)==null?void 0:l.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};yr.elementStyles=[],yr.shadowRootOptions={mode:"open"},yr[Fr("elementProperties")]=new Map,yr[Fr("finalized")]=new Map,oi==null||oi({ReactiveElement:yr}),(Wt.reactiveElementVersions??(Wt.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Wr=globalThis,Vn=Wr.trustedTypes,Ks=Vn?Vn.createPolicy("lit-html",{createHTML:t=>t}):void 0,Cl="$lit$",Ft=`lit$${Math.random().toFixed(9).slice(2)}$`,Rl="?"+Ft,Lc=`<${Rl}>`,lr=document,Kr=()=>lr.createComment(""),Gr=t=>t===null||typeof t!="object"&&typeof t!="function",xs=Array.isArray,$c=t=>xs(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",si=`[ 	
\f\r]`,Cr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Gs=/-->/g,Ys=/>/g,Jt=RegExp(`>|${si}(?:([^\\s"'>=/]+)(${si}*=${si}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Qs=/'/g,Js=/"/g,Ml=/^(?:script|style|textarea|title)$/i,Dc=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Ge=Dc(1),qt=Symbol.for("lit-noChange"),Qe=Symbol.for("lit-nothing"),Xs=new WeakMap,rr=lr.createTreeWalker(lr,129);function jl(t,e){if(!xs(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ks!==void 0?Ks.createHTML(e):e}const Fc=(t,e)=>{const r=t.length-1,s=[];let l,n=e===2?"<svg>":e===3?"<math>":"",i=Cr;for(let a=0;a<r;a++){const o=t[a];let u,c,f=-1,p=0;for(;p<o.length&&(i.lastIndex=p,c=i.exec(o),c!==null);)p=i.lastIndex,i===Cr?c[1]==="!--"?i=Gs:c[1]!==void 0?i=Ys:c[2]!==void 0?(Ml.test(c[2])&&(l=RegExp("</"+c[2],"g")),i=Jt):c[3]!==void 0&&(i=Jt):i===Jt?c[0]===">"?(i=l??Cr,f=-1):c[1]===void 0?f=-2:(f=i.lastIndex-c[2].length,u=c[1],i=c[3]===void 0?Jt:c[3]==='"'?Js:Qs):i===Js||i===Qs?i=Jt:i===Gs||i===Ys?i=Cr:(i=Jt,l=void 0);const g=i===Jt&&t[a+1].startsWith("/>")?" ":"";n+=i===Cr?o+Lc:f>=0?(s.push(u),o.slice(0,f)+Cl+o.slice(f)+Ft+g):o+Ft+(f===-2?a:g)}return[jl(t,n+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),s]};class Yr{constructor({strings:e,_$litType$:r},s){let l;this.parts=[];let n=0,i=0;const a=e.length-1,o=this.parts,[u,c]=Fc(e,r);if(this.el=Yr.createElement(u,s),rr.currentNode=this.el.content,r===2||r===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(l=rr.nextNode())!==null&&o.length<a;){if(l.nodeType===1){if(l.hasAttributes())for(const f of l.getAttributeNames())if(f.endsWith(Cl)){const p=c[i++],g=l.getAttribute(f).split(Ft),b=/([.?@])?(.*)/.exec(p);o.push({type:1,index:n,name:b[2],strings:g,ctor:b[1]==="."?zc:b[1]==="?"?qc:b[1]==="@"?Hc:Qn}),l.removeAttribute(f)}else f.startsWith(Ft)&&(o.push({type:6,index:n}),l.removeAttribute(f));if(Ml.test(l.tagName)){const f=l.textContent.split(Ft),p=f.length-1;if(p>0){l.textContent=Vn?Vn.emptyScript:"";for(let g=0;g<p;g++)l.append(f[g],Kr()),rr.nextNode(),o.push({type:2,index:++n});l.append(f[p],Kr())}}}else if(l.nodeType===8)if(l.data===Rl)o.push({type:2,index:n});else{let f=-1;for(;(f=l.data.indexOf(Ft,f+1))!==-1;)o.push({type:7,index:n}),f+=Ft.length-1}n++}}static createElement(e,r){const s=lr.createElement("template");return s.innerHTML=e,s}}function _r(t,e,r=t,s){var i,a;if(e===qt)return e;let l=s!==void 0?(i=r._$Co)==null?void 0:i[s]:r._$Cl;const n=Gr(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==n&&((a=l==null?void 0:l._$AO)==null||a.call(l,!1),n===void 0?l=void 0:(l=new n(t),l._$AT(t,r,s)),s!==void 0?(r._$Co??(r._$Co=[]))[s]=l:r._$Cl=l),l!==void 0&&(e=_r(t,l._$AS(t,e.values),l,s)),e}let Wc=class{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:s}=this._$AD,l=((e==null?void 0:e.creationScope)??lr).importNode(r,!0);rr.currentNode=l;let n=rr.nextNode(),i=0,a=0,o=s[0];for(;o!==void 0;){if(i===o.index){let u;o.type===2?u=new tn(n,n.nextSibling,this,e):o.type===1?u=new o.ctor(n,o.name,o.strings,this,e):o.type===6&&(u=new Vc(n,this,e)),this._$AV.push(u),o=s[++a]}i!==(o==null?void 0:o.index)&&(n=rr.nextNode(),i++)}return rr.currentNode=lr,l}p(e){let r=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,r),r+=s.strings.length-2):s._$AI(e[r])),r++}};class tn{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,s,l){this.type=2,this._$AH=Qe,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=s,this.options=l,this._$Cv=(l==null?void 0:l.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=_r(this,e,r),Gr(e)?e===Qe||e==null||e===""?(this._$AH!==Qe&&this._$AR(),this._$AH=Qe):e!==this._$AH&&e!==qt&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):$c(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Qe&&Gr(this._$AH)?this._$AA.nextSibling.data=e:this.T(lr.createTextNode(e)),this._$AH=e}$(e){var n;const{values:r,_$litType$:s}=e,l=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=Yr.createElement(jl(s.h,s.h[0]),this.options)),s);if(((n=this._$AH)==null?void 0:n._$AD)===l)this._$AH.p(r);else{const i=new Wc(l,this),a=i.u(this.options);i.p(r),this.T(a),this._$AH=i}}_$AC(e){let r=Xs.get(e.strings);return r===void 0&&Xs.set(e.strings,r=new Yr(e)),r}k(e){xs(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let s,l=0;for(const n of e)l===r.length?r.push(s=new tn(this.O(Kr()),this.O(Kr()),this,this.options)):s=r[l],s._$AI(n),l++;l<r.length&&(this._$AR(s&&s._$AB.nextSibling,l),r.length=l)}_$AR(e=this._$AA.nextSibling,r){var s;for((s=this._$AP)==null?void 0:s.call(this,!1,!0,r);e!==this._$AB;){const l=e.nextSibling;e.remove(),e=l}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class Qn{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,s,l,n){this.type=1,this._$AH=Qe,this._$AN=void 0,this.element=e,this.name=r,this._$AM=l,this.options=n,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=Qe}_$AI(e,r=this,s,l){const n=this.strings;let i=!1;if(n===void 0)e=_r(this,e,r,0),i=!Gr(e)||e!==this._$AH&&e!==qt,i&&(this._$AH=e);else{const a=e;let o,u;for(e=n[0],o=0;o<n.length-1;o++)u=_r(this,a[s+o],r,o),u===qt&&(u=this._$AH[o]),i||(i=!Gr(u)||u!==this._$AH[o]),u===Qe?e=Qe:e!==Qe&&(e+=(u??"")+n[o+1]),this._$AH[o]=u}i&&!l&&this.j(e)}j(e){e===Qe?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class zc extends Qn{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Qe?void 0:e}}let qc=class extends Qn{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Qe)}};class Hc extends Qn{constructor(e,r,s,l,n){super(e,r,s,l,n),this.type=5}_$AI(e,r=this){if((e=_r(this,e,r,0)??Qe)===qt)return;const s=this._$AH,l=e===Qe&&s!==Qe||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,n=e!==Qe&&(s===Qe||l);l&&this.element.removeEventListener(this.name,this,s),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class Vc{constructor(e,r,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){_r(this,e)}}const ai=Wr.litHtmlPolyfillSupport;ai==null||ai(Yr,tn),(Wr.litHtmlVersions??(Wr.litHtmlVersions=[])).push("3.3.1");const Kc=(t,e,r)=>{const s=(r==null?void 0:r.renderBefore)??e;let l=s._$litPart$;if(l===void 0){const n=(r==null?void 0:r.renderBefore)??null;s._$litPart$=l=new tn(e.insertBefore(Kr(),n),n,void 0,r??{})}return l._$AI(t),l};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const or=globalThis;let zt=class extends yr{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Kc(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return qt}};var Tl;zt._$litElement$=!0,zt.finalized=!0,(Tl=or.litElementHydrateSupport)==null||Tl.call(or,{LitElement:zt});const li=or.litElementPolyfillSupport;li==null||li({LitElement:zt});(or.litElementVersions??(or.litElementVersions=[])).push("4.2.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Jn=t=>(e,r)=>{r!==void 0?r.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Gc={attribute:!0,type:String,converter:Hn,reflect:!1,hasChanged:As},Yc=(t=Gc,e,r)=>{const{kind:s,metadata:l}=r;let n=globalThis.litPropertyMetadata.get(l);if(n===void 0&&globalThis.litPropertyMetadata.set(l,n=new Map),s==="setter"&&((t=Object.create(t)).wrapped=!0),n.set(r.name,t),s==="accessor"){const{name:i}=r;return{set(a){const o=e.get.call(this);e.set.call(this,a),this.requestUpdate(i,o,t)},init(a){return a!==void 0&&this.C(i,void 0,t,a),a}}}if(s==="setter"){const{name:i}=r;return function(a){const o=this[i];e.call(this,a),this.requestUpdate(i,o,t)}}throw Error("Unsupported decorator location: "+s)};function Vt(t){return(e,r)=>typeof r=="object"?Yc(t,e,r):((s,l,n)=>{const i=l.hasOwnProperty(n);return l.constructor.createProperty(n,s),i?Object.getOwnPropertyDescriptor(l,n):void 0})(t,e,r)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ye(t){return Vt({...t,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qc=(t,e,r)=>(r.configurable=!0,r.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(t,e,r),r);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Is(t,e){return(r,s,l)=>{const n=i=>{var a;return((a=i.renderRoot)==null?void 0:a.querySelector(t))??null};return Qc(r,s,{get(){return n(this)}})}}const tt=[];for(let t=0;t<256;++t)tt.push((t+256).toString(16).slice(1));function Jc(t,e=0){return(tt[t[e+0]]+tt[t[e+1]]+tt[t[e+2]]+tt[t[e+3]]+"-"+tt[t[e+4]]+tt[t[e+5]]+"-"+tt[t[e+6]]+tt[t[e+7]]+"-"+tt[t[e+8]]+tt[t[e+9]]+"-"+tt[t[e+10]]+tt[t[e+11]]+tt[t[e+12]]+tt[t[e+13]]+tt[t[e+14]]+tt[t[e+15]]).toLowerCase()}let ui;const Xc=new Uint8Array(16);function Zc(){if(!ui){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ui=crypto.getRandomValues.bind(crypto)}return ui(Xc)}const eh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zs={randomUUID:eh};function th(t,e,r){var l;t=t||{};const s=t.random??((l=t.rng)==null?void 0:l.call(t))??Zc();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Jc(s)}function Qr(t,e,r){return Zs.randomUUID&&!t?Zs.randomUUID():th(t)}const{floor:rh,random:nh}=Math,Jr="Trystero",Xr=(t,e)=>Array(t).fill().map(e),ea="0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz",Nl=t=>Xr(t,()=>ea[rh(nh()*ea.length)]).join(""),It=Nl(20),tr=Promise.all.bind(Promise),Bl=typeof window<"u",{entries:gi,fromEntries:Ul,keys:ih}=Object,St=()=>{},Et=t=>new Error(`${Jr}: ${t}`),oh=new TextEncoder,sh=new TextDecoder,wr=t=>oh.encode(t),dn=t=>sh.decode(t),an=(...t)=>t.join("@"),Ll=(t,e,r,s)=>(t.relayUrls||e).slice(0,t.relayUrls?t.relayUrls.length:t.relayRedundancy||r),Sr=JSON.stringify,Zr=JSON.parse,ta=3333,pr={};let zr=null,qr=null;const ah=()=>{zr||(zr=new Promise(t=>{qr=t}).finally(()=>{qr=null,zr=null}))},lh=()=>qr==null?void 0:qr(),uh=(t,e)=>{const r={},s=()=>{const l=new WebSocket(t);l.onclose=()=>{if(zr){zr.then(s);return}pr[t]??(pr[t]=ta),setTimeout(s,pr[t]),pr[t]*=2},l.onmessage=n=>e(n.data),r.socket=l,r.url=l.url,r.ready=new Promise(n=>l.onopen=()=>{n(r),pr[t]=ta}),r.send=n=>{l.readyState===1&&l.send(n)}};return s(),r},ch=()=>{if(Bl){const t=new AbortController;return addEventListener("online",lh,{signal:t.signal}),addEventListener("offline",ah,{signal:t.signal}),()=>t.abort()}return St},ks="AES-GCM",ci={},hh=t=>btoa(String.fromCharCode.apply(null,new Uint8Array(t))),fh=t=>{const e=atob(t);return new Uint8Array(e.length).map((r,s)=>e.charCodeAt(s)).buffer},ph=async(t,e)=>new Uint8Array(await crypto.subtle.digest(t,wr(e))),Mr=async t=>ci[t]||(ci[t]=Array.from(await ph("SHA-1",t)).map(e=>e.toString(36)).join("")),dh=async(t,e,r)=>crypto.subtle.importKey("raw",await crypto.subtle.digest({name:"SHA-256"},wr(`${t}:${e}:${r}`)),{name:ks},!1,["encrypt","decrypt"]),$l="$",Dl=",",gh=async(t,e)=>{const r=crypto.getRandomValues(new Uint8Array(16));return r.join(Dl)+$l+hh(await crypto.subtle.encrypt({name:ks,iv:r},await t,wr(e)))},yh=async(t,e)=>{const[r,s]=e.split($l);return dn(await crypto.subtle.decrypt({name:ks,iv:new Uint8Array(r.split(Dl))},await t,fh(s)))},mh=5e3,ra="icegatheringstatechange",na="offer",bh="answer",ia=(t,{rtcConfig:e,rtcPolyfill:r,turnConfig:s})=>{const l=new(r||RTCPeerConnection)({iceServers:vh.concat(s||[]),...e}),n={};let i=!1,a=!1,o=null;const u=f=>{f.binaryType="arraybuffer",f.bufferedAmountLowThreshold=65535,f.onmessage=p=>{var g;return(g=n.data)==null?void 0:g.call(n,p.data)},f.onopen=()=>{var p;return(p=n.connect)==null?void 0:p.call(n)},f.onclose=()=>{var p;return(p=n.close)==null?void 0:p.call(n)},f.onerror=p=>{var g;return(g=n.error)==null?void 0:g.call(n,p)}},c=f=>Promise.race([new Promise(p=>{const g=()=>{f.iceGatheringState==="complete"&&(f.removeEventListener(ra,g),p())};f.addEventListener(ra,g),g()}),new Promise(p=>setTimeout(p,mh))]).then(()=>({type:f.localDescription.type,sdp:f.localDescription.sdp.replace(/a=ice-options:trickle\s\n/g,"")}));return t?(o=l.createDataChannel("data"),u(o)):l.ondatachannel=({channel:f})=>{o=f,u(f)},l.onnegotiationneeded=async()=>{var f,p;try{i=!0,await l.setLocalDescription();const g=await c(l);(f=n.signal)==null||f.call(n,g)}catch(g){(p=n.error)==null||p.call(n,g)}finally{i=!1}},l.onconnectionstatechange=()=>{var f;["disconnected","failed","closed"].includes(l.connectionState)&&((f=n.close)==null||f.call(n))},l.ontrack=f=>{var p,g;(p=n.track)==null||p.call(n,f.track,f.streams[0]),(g=n.stream)==null||g.call(n,f.streams[0])},l.onremovestream=f=>{var p;return(p=n.stream)==null?void 0:p.call(n,f.stream)},t&&(l.canTrickleIceCandidates||l.onnegotiationneeded()),{created:Date.now(),connection:l,get channel(){return o},get isDead(){return l.connectionState==="closed"},async signal(f){var p,g,b;if(!((o==null?void 0:o.readyState)==="open"&&!((p=f.sdp)!=null&&p.includes("a=rtpmap"))))try{if(f.type===na){if(i||l.signalingState!=="stable"&&!a){if(t)return;await tr([l.setLocalDescription({type:"rollback"}),l.setRemoteDescription(f)])}else await l.setRemoteDescription(f);await l.setLocalDescription();const S=await c(l);return(g=n.signal)==null||g.call(n,S),S}else if(f.type===bh){a=!0;try{await l.setRemoteDescription(f)}finally{a=!1}}}catch(S){(b=n.error)==null||b.call(n,S)}},sendData:f=>o.send(f),destroy:()=>{o==null||o.close(),l.close(),i=!1,a=!1},setHandlers:f=>Object.assign(n,f),offerPromise:t?new Promise(f=>n.signal=p=>{p.type===na&&f(p)}):Promise.resolve(),addStream:f=>f.getTracks().forEach(p=>l.addTrack(p,f)),removeStream:f=>l.getSenders().filter(p=>f.getTracks().includes(p.track)).forEach(p=>l.removeTrack(p)),addTrack:(f,p)=>l.addTrack(f,p),removeTrack:f=>{const p=l.getSenders().find(g=>g.track===f);p&&l.removeTrack(p)},replaceTrack:(f,p)=>{const g=l.getSenders().find(b=>b.track===f);if(g)return g.replaceTrack(p)}}},vh=[...Xr(3,(t,e)=>`stun:stun${e||""}.l.google.com:19302`),"stun:stun.cloudflare.com:3478"].map(t=>({urls:t})),wh=Object.getPrototypeOf(Uint8Array),gn=12,Fl=0,yn=Fl+gn,mn=yn+1,jr=mn+1,Nr=jr+1,Xt=16*2**10-Nr,ln=255,oa="bufferedamountlow",dr=t=>"@_"+t,_h=(t,e,r)=>{const s={},l={},n={},i={},a={},o={},u={},c={onPeerJoin:St,onPeerLeave:St,onPeerStream:St,onPeerTrack:St},f=(E,j)=>(E?Array.isArray(E)?E:[E]:ih(s)).flatMap(U=>{const N=s[U];return N?j(U,N):(console.warn(`${Jr}: no peer with id ${U} found`),[])}),p=E=>{s[E]&&(s[E].destroy(),delete s[E],delete i[E],delete a[E],c.onPeerLeave(E),e(E))},g=E=>{if(l[E])return n[E];if(!E)throw Et("action type argument is required");const j=wr(E);if(j.byteLength>gn)throw Et(`action type string "${E}" (${j.byteLength}b) exceeds byte limit (${gn}). Hint: choose a shorter name.`);const U=new Uint8Array(gn);U.set(j);let N=0;return l[E]={onComplete:St,onProgress:St,setOnComplete:ae=>l[E]={...l[E],onComplete:ae},setOnProgress:ae=>l[E]={...l[E],onProgress:ae},send:async(ae,te,$,ie)=>{if($&&typeof $!="object")throw Et("action meta argument must be an object");const H=typeof ae;if(H==="undefined")throw Et("action data cannot be undefined");const ne=H!=="string",R=ae instanceof Blob,K=R||ae instanceof ArrayBuffer||ae instanceof wh;if($&&!K)throw Et("action meta argument can only be used with binary data");const le=K?new Uint8Array(R?await ae.arrayBuffer():ae):wr(ne?Sr(ae):ae),q=$?wr(Sr($)):null,_e=Math.ceil(le.byteLength/Xt)+($?1:0)||1,J=Xr(_e,(B,oe)=>{const G=oe===_e-1,Q=$&&oe===0,Z=new Uint8Array(Nr+(Q?q.byteLength:G?le.byteLength-Xt*(_e-($?2:1)):Xt));return Z.set(U),Z.set([N],yn),Z.set([G|Q<<1|K<<2|ne<<3],mn),Z.set([Math.round((oe+1)/_e*ln)],jr),Z.set($?Q?q:le.subarray((oe-1)*Xt,oe*Xt):le.subarray(oe*Xt,(oe+1)*Xt),Nr),Z});return N=N+1&ln,tr(f(te,async(B,oe)=>{const{channel:G}=oe;let Q=0;for(;Q<_e;){const Z=J[Q];if(G.bufferedAmount>G.bufferedAmountLowThreshold&&await new Promise(ge=>{const ce=()=>{G.removeEventListener(oa,ce),ge()};G.addEventListener(oa,ce)}),!s[B])break;oe.sendData(Z),Q++,ie==null||ie(Z[jr]/ln,B,$)}}))}},n[E]||(n[E]=[l[E].send,l[E].setOnComplete,l[E].setOnProgress])},b=(E,j)=>{var _e,J;const U=new Uint8Array(j),N=dn(U.subarray(Fl,yn)).replaceAll("\0",""),[ae]=U.subarray(yn,mn),[te]=U.subarray(mn,jr),[$]=U.subarray(jr,Nr),ie=U.subarray(Nr),H=!!(te&1),ne=!!(te&2),R=!!(te&4),K=!!(te&8);if(!l[N]){console.warn(`${Jr}: received message with unregistered type (${N})`);return}i[E]||(i[E]={}),(_e=i[E])[N]||(_e[N]={});const le=(J=i[E][N])[ae]||(J[ae]={chunks:[]});if(ne?le.meta=Zr(dn(ie)):le.chunks.push(ie),l[N].onProgress($/ln,E,le.meta),!H)return;const q=new Uint8Array(le.chunks.reduce((B,oe)=>B+oe.byteLength,0));if(le.chunks.reduce((B,oe)=>(q.set(oe,B),B+oe.byteLength),0),delete i[E][N][ae],R)l[N].onComplete(q,E,le.meta);else{const B=dn(q);l[N].onComplete(K?Zr(B):B,E)}},S=async()=>{await k(""),await new Promise(E=>setTimeout(E,99)),gi(s).forEach(([E,j])=>{j.destroy(),delete s[E]}),r()},[w,x]=g(dr("ping")),[y,_]=g(dr("pong")),[A,v]=g(dr("signal")),[C,O]=g(dr("stream")),[I,T]=g(dr("track")),[k,z]=g(dr("leave"));return t((E,j)=>{s[j]||(s[j]=E,E.setHandlers({data:U=>b(j,U),stream:U=>{c.onPeerStream(U,j,o[j]),delete o[j]},track:(U,N)=>{c.onPeerTrack(U,N,j,u[j]),delete u[j]},signal:U=>A(U,j),close:()=>p(j),error:U=>{console.error(U),p(j)}}),c.onPeerJoin(j))}),x((E,j)=>y("",j)),_((E,j)=>{var U;(U=a[j])==null||U.call(a),delete a[j]}),v((E,j)=>{var U;return(U=s[j])==null?void 0:U.signal(E)}),O((E,j)=>o[j]=E),T((E,j)=>u[j]=E),z((E,j)=>p(j)),Bl&&addEventListener("beforeunload",S),{makeAction:g,leave:S,ping:async E=>{if(!E)throw Et("ping() must be called with target peer ID");const j=Date.now();return w("",E),await new Promise(U=>a[E]=U),Date.now()-j},getPeers:()=>Ul(gi(s).map(([E,j])=>[E,j.connection])),addStream:(E,j,U)=>f(j,async(N,ae)=>{U&&await C(U,N),ae.addStream(E)}),removeStream:(E,j)=>f(j,(U,N)=>N.removeStream(E)),addTrack:(E,j,U,N)=>f(U,async(ae,te)=>{N&&await I(N,ae),te.addTrack(E,j)}),removeTrack:(E,j)=>f(j,(U,N)=>N.removeTrack(E)),replaceTrack:(E,j,U,N)=>f(U,async(ae,te)=>{N&&await I(N,ae),te.replaceTrack(E,j)}),onPeerJoin:E=>c.onPeerJoin=E,onPeerLeave:E=>c.onPeerLeave=E,onPeerStream:E=>c.onPeerStream=E,onPeerTrack:E=>c.onPeerTrack=E}},Sh=20,Eh=5333,sa=57333,Wl=({init:t,subscribe:e,announce:r})=>{const s={};let l=!1,n,i,a,o;return(u,c,f)=>{var te;const{appId:p}=u;if((te=s[p])!=null&&te[c])return s[p][c];const g={},b={},S=an(Jr,p,c),w=Mr(S),x=Mr(an(S,It)),y=dh(u.password||"",p,c),_=$=>async ie=>({type:ie.type,sdp:await $(y,ie.sdp)}),A=_(yh),v=_(gh),C=()=>ia(!0,u),O=($,ie,H)=>{var ne;if(b[ie]){b[ie]!==$&&$.destroy();return}b[ie]=$,ae($,ie),(ne=g[ie])==null||ne.forEach((R,K)=>{K!==H&&R.destroy()}),delete g[ie]},I=($,ie)=>{b[ie]===$&&delete b[ie]},T=($,ie)=>{var ne;if(b[$])return;const H=(ne=g[$])==null?void 0:ne[ie];H&&(delete g[$][ie],H.destroy())},k=$=>(i.push(...Xr($,C)),tr(i.splice(0,$).map(ie=>ie.offerPromise.then(v).then(H=>({peer:ie,offer:H}))))),z=($,ie)=>f==null?void 0:f({error:`incorrect password (${u.password}) when decrypting ${ie}`,appId:p,peerId:$,roomId:c}),E=$=>async(ie,H,ne)=>{var B,oe,G;const[R,K]=await tr([w,x]);if(ie!==R&&ie!==K)return;const{peerId:le,offer:q,answer:_e,peer:J}=typeof H=="string"?Zr(H):H;if(!(le===It||b[le])){if(le&&!q&&!_e){if((B=g[le])!=null&&B[$])return;const[[{peer:Q,offer:Z}],ge]=await tr([k(1),Mr(an(S,le))]);g[le]||(g[le]=[]),g[le][$]=Q,setTimeout(()=>T(le,$),j[$]*.9),Q.setHandlers({connect:()=>O(Q,le,$),close:()=>I(Q,le)}),ne(ge,Sr({peerId:It,offer:Z}))}else if(q){if(((oe=g[le])==null?void 0:oe[$])&&It>le)return;const Z=ia(!1,u);Z.setHandlers({connect:()=>O(Z,le,$),close:()=>I(Z,le)});let ge;try{ge=await A(q)}catch{z(le,"offer");return}if(Z.isDead)return;const[ce,D]=await tr([Mr(an(S,le)),Z.signal(ge)]);ne(ce,Sr({peerId:It,answer:await v(D)}))}else if(_e){let Q;try{Q=await A(_e)}catch{z(le,"answer");return}if(J)J.setHandlers({connect:()=>O(J,le,$),close:()=>I(J,le)}),J.signal(Q);else{const Z=(G=g[le])==null?void 0:G[$];Z&&!Z.isDead&&Z.signal(Q)}}}};if(!u)throw Et("requires a config map as the first argument");if(!p&&!u.firebaseApp)throw Et("config map is missing appId field");if(!c)throw Et("roomId argument required");if(!l){const $=t(u);i=Xr(Sh,C),n=Array.isArray($)?$:[$],l=!0,a=setInterval(()=>i=i.filter(ie=>{const H=Date.now()-ie.created<sa;return H||ie.destroy(),H}),sa*1.03),o=u.manualRelayReconnection?St:ch()}const j=n.map(()=>Eh),U=[],N=n.map(async($,ie)=>e(await $,await w,await x,E(ie),k));tr([w,x]).then(([$,ie])=>{const H=async(ne,R)=>{const K=await r(ne,$,ie);typeof K=="number"&&(j[R]=K),U[R]=setTimeout(()=>H(ne,R),j[R])};N.forEach(async(ne,R)=>{await ne,H(await n[R],R)})});let ae=St;return s[p]||(s[p]={}),s[p][c]=_h($=>ae=$,$=>delete b[$],()=>{delete s[p][c],U.forEach(clearTimeout),N.forEach(async $=>(await $)()),clearInterval(a),o(),l=!1})}},hi={},zl={},Zt={},er={},Rr={},aa={},un={},Ah="announce",ql=20,la=10,xh=33333,Ih=120333,kh=3,Ph=async t=>{if(hi[t])return hi[t];const e=(await Mr(t)).slice(0,ql);return hi[t]=e,zl[e]=t,e},ua=async(t,e,r)=>t.send(Sr({action:Ah,info_hash:await Ph(e),peer_id:It,...r})),ca=(t,e,r)=>console.warn(`${Jr}: torrent tracker ${r?"failure":"warning"} from ${t} - ${e}`),Th=Wl({init:t=>Ll(t,Oh,kh).map(e=>{const r=uh(e,l=>{var c,f;const n=Zr(l),i=n["failure reason"],a=n["warning message"],{interval:o}=n,u=zl[n.info_hash];if(i){ca(s,i,!0);return}if(a&&ca(s,a),o&&o*1e3>Rr[s]&&er[s][u]){const p=Math.min(o*1e3,Ih);clearInterval(Zt[s][u]),Rr[s]=p,Zt[s][u]=setInterval(er[s][u],p)}aa[n.offer_id]||(n.offer||n.answer)&&(aa[n.offer_id]=!0,(f=(c=un[s])[u])==null||f.call(c,n))}),{url:s}=r;return un[s]={},r.ready}),subscribe:(t,e,r,s,l)=>{const{url:n}=t,i=async()=>{const a=Ul((await l(la)).map(o=>[Nl(ql),o]));un[t.url][e]=o=>{if(o.offer)s(e,{offer:o.offer,peerId:o.peer_id},(u,c)=>ua(t,e,{answer:Zr(c).answer,offer_id:o.offer_id,to_peer_id:o.peer_id}));else if(o.answer){const u=a[o.offer_id];u&&s(e,{answer:o.answer,peerId:o.peer_id,peer:u.peer})}},ua(t,e,{numwant:la,offers:gi(a).map(([o,{offer:u}])=>({offer_id:o,offer:u}))})};return Rr[n]=xh,er[n]||(er[n]={}),er[n][e]=i,Zt[n]||(Zt[n]={}),Zt[n][e]=setInterval(i,Rr[n]),i(),()=>{clearInterval(Zt[n][e]),delete un[n][e],delete er[n][e]}},announce:t=>Rr[t.url]}),Oh=["tracker.webtorrent.dev","tracker.openwebtorrent.com","tracker.btorrent.xyz","tracker.files.fm:7073/announce"].map(t=>"wss://"+t);var Ps=Object.defineProperty,Ch=Object.getOwnPropertyDescriptor,Rh=Object.getOwnPropertyNames,Mh=Object.prototype.hasOwnProperty,ut=(t,e)=>()=>(t&&(e=t(t=0)),e),be=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Er=(t,e)=>{for(var r in e)Ps(t,r,{get:e[r],enumerable:!0})},jh=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of Rh(e))!Mh.call(t,l)&&l!==r&&Ps(t,l,{get:()=>e[l],enumerable:!(s=Ch(e,l))||s.enumerable});return t},De=t=>jh(Ps({},"__esModule",{value:!0}),t),fe=ut(()=>{}),Le={};Er(Le,{_debugEnd:()=>Yi,_debugProcess:()=>Gi,_events:()=>co,_eventsCount:()=>ho,_exiting:()=>ji,_fatalExceptions:()=>Hi,_getActiveHandles:()=>Jl,_getActiveRequests:()=>Ql,_kill:()=>Ui,_linkedBinding:()=>Gl,_maxListeners:()=>uo,_preload_modules:()=>ao,_rawDebug:()=>Ci,_startProfilerIdleNotifier:()=>Qi,_stopProfilerIdleNotifier:()=>Ji,_tickCallback:()=>Ki,abort:()=>to,addListener:()=>fo,allowedNodeEnvironmentFlags:()=>zi,arch:()=>mi,argv:()=>wi,argv0:()=>so,assert:()=>Xl,binding:()=>xi,browser:()=>Oi,chdir:()=>Pi,config:()=>Ni,cpuUsage:()=>Br,cwd:()=>ki,debugPort:()=>oo,default:()=>Os,dlopen:()=>Yl,domain:()=>Mi,emit:()=>bo,emitWarning:()=>Ai,env:()=>vi,execArgv:()=>_i,execPath:()=>io,exit:()=>Fi,features:()=>qi,hasUncaughtExceptionCaptureCallback:()=>Zl,hrtime:()=>bn,kill:()=>Di,listeners:()=>tu,memoryUsage:()=>$i,moduleLoadList:()=>Ri,nextTick:()=>Vl,off:()=>go,on:()=>wt,once:()=>po,openStdin:()=>Wi,pid:()=>ro,platform:()=>bi,ppid:()=>no,prependListener:()=>vo,prependOnceListener:()=>wo,reallyExit:()=>Bi,release:()=>Ti,removeAllListeners:()=>mo,removeListener:()=>yo,resourceUsage:()=>Li,setSourceMapsEnabled:()=>lo,setUncaughtExceptionCaptureCallback:()=>Vi,stderr:()=>Zi,stdin:()=>eo,stdout:()=>Xi,title:()=>yi,umask:()=>Ii,uptime:()=>eu,version:()=>Si,versions:()=>Ei});function Ts(t){throw new Error("Node.js process "+t+" is not supported by JSPM core outside of Node.js")}function Nh(){!sr||!nr||(sr=!1,nr.length?yt=nr.concat(yt):Hr=-1,yt.length&&Hl())}function Hl(){if(!sr){var t=setTimeout(Nh,0);sr=!0;for(var e=yt.length;e;){for(nr=yt,yt=[];++Hr<e;)nr&&nr[Hr].run();Hr=-1,e=yt.length}nr=null,sr=!1,clearTimeout(t)}}function Vl(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];yt.push(new Kl(t,e)),yt.length===1&&!sr&&setTimeout(Hl,0)}function Kl(t,e){this.fun=t,this.array=e}function rt(){}function Gl(t){Ts("_linkedBinding")}function Yl(t){Ts("dlopen")}function Ql(){return[]}function Jl(){return[]}function Xl(t,e){if(!t)throw new Error(e||"assertion error")}function Zl(){return!1}function eu(){return At.now()/1e3}function bn(t){var e=Math.floor((Date.now()-At.now())*.001),r=At.now()*.001,s=Math.floor(r)+e,l=Math.floor(r%1*1e9);return t&&(s=s-t[0],l=l-t[1],l<0&&(s--,l+=vn)),[s,l]}function wt(){return Os}function tu(t){return[]}var yt,sr,nr,Hr,yi,mi,bi,vi,wi,_i,Si,Ei,Ai,xi,Ii,ki,Pi,Ti,Oi,Ci,Ri,Mi,ji,Ni,Bi,Ui,Br,Li,$i,Di,Fi,Wi,zi,qi,Hi,Vi,Ki,Gi,Yi,Qi,Ji,Xi,Zi,eo,to,ro,no,io,oo,so,ao,lo,At,fi,vn,uo,co,ho,fo,po,go,yo,mo,bo,vo,wo,Os,Bh=ut(()=>{fe(),de(),pe(),yt=[],sr=!1,Hr=-1,Kl.prototype.run=function(){this.fun.apply(null,this.array)},yi="browser",mi="x64",bi="browser",vi={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},wi=["/usr/bin/node"],_i=[],Si="v16.8.0",Ei={},Ai=function(t,e){console.warn((e?e+": ":"")+t)},xi=function(t){Ts("binding")},Ii=function(t){return 0},ki=function(){return"/"},Pi=function(t){},Ti={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Oi=!0,Ci=rt,Ri=[],Mi={},ji=!1,Ni={},Bi=rt,Ui=rt,Br=function(){return{}},Li=Br,$i=Br,Di=rt,Fi=rt,Wi=rt,zi={},qi={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Hi=rt,Vi=rt,Ki=rt,Gi=rt,Yi=rt,Qi=rt,Ji=rt,Xi=void 0,Zi=void 0,eo=void 0,to=rt,ro=2,no=1,io="/bin/usr/node",oo=9229,so="node",ao=[],lo=rt,At={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},At.now===void 0&&(fi=Date.now(),At.timing&&At.timing.navigationStart&&(fi=At.timing.navigationStart),At.now=()=>Date.now()-fi),vn=1e9,bn.bigint=function(t){var e=bn(t);return typeof BigInt>"u"?e[0]*vn+e[1]:BigInt(e[0]*vn)+BigInt(e[1])},uo=10,co={},ho=0,fo=wt,po=wt,go=wt,yo=wt,mo=wt,bo=rt,vo=wt,wo=wt,Os={version:Si,versions:Ei,arch:mi,platform:bi,browser:Oi,release:Ti,_rawDebug:Ci,moduleLoadList:Ri,binding:xi,_linkedBinding:Gl,_events:co,_eventsCount:ho,_maxListeners:uo,on:wt,addListener:fo,once:po,off:go,removeListener:yo,removeAllListeners:mo,emit:bo,prependListener:vo,prependOnceListener:wo,listeners:tu,domain:Mi,_exiting:ji,config:Ni,dlopen:Yl,uptime:eu,_getActiveRequests:Ql,_getActiveHandles:Jl,reallyExit:Bi,_kill:Ui,cpuUsage:Br,resourceUsage:Li,memoryUsage:$i,kill:Di,exit:Fi,openStdin:Wi,allowedNodeEnvironmentFlags:zi,assert:Xl,features:qi,_fatalExceptions:Hi,setUncaughtExceptionCaptureCallback:Vi,hasUncaughtExceptionCaptureCallback:Zl,emitWarning:Ai,nextTick:Vl,_tickCallback:Ki,_debugProcess:Gi,_debugEnd:Yi,_startProfilerIdleNotifier:Qi,_stopProfilerIdleNotifier:Ji,stdout:Xi,stdin:eo,stderr:Zi,abort:to,umask:Ii,chdir:Pi,cwd:ki,env:vi,title:yi,argv:wi,execArgv:_i,pid:ro,ppid:no,execPath:io,debugPort:oo,hrtime:bn,argv0:so,_preload_modules:ao,setSourceMapsEnabled:lo}}),pe=ut(()=>{Bh()});function Uh(){if(_o)return mr;_o=!0,mr.byteLength=a,mr.toByteArray=u,mr.fromByteArray=p;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,n=s.length;l<n;++l)t[l]=s[l],e[s.charCodeAt(l)]=l;e[45]=62,e[95]=63;function i(g){var b=g.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=g.indexOf("=");S===-1&&(S=b);var w=S===b?0:4-S%4;return[S,w]}function a(g){var b=i(g),S=b[0],w=b[1];return(S+w)*3/4-w}function o(g,b,S){return(b+S)*3/4-S}function u(g){var b,S=i(g),w=S[0],x=S[1],y=new r(o(g,w,x)),_=0,A=x>0?w-4:w,v;for(v=0;v<A;v+=4)b=e[g.charCodeAt(v)]<<18|e[g.charCodeAt(v+1)]<<12|e[g.charCodeAt(v+2)]<<6|e[g.charCodeAt(v+3)],y[_++]=b>>16&255,y[_++]=b>>8&255,y[_++]=b&255;return x===2&&(b=e[g.charCodeAt(v)]<<2|e[g.charCodeAt(v+1)]>>4,y[_++]=b&255),x===1&&(b=e[g.charCodeAt(v)]<<10|e[g.charCodeAt(v+1)]<<4|e[g.charCodeAt(v+2)]>>2,y[_++]=b>>8&255,y[_++]=b&255),y}function c(g){return t[g>>18&63]+t[g>>12&63]+t[g>>6&63]+t[g&63]}function f(g,b,S){for(var w,x=[],y=b;y<S;y+=3)w=(g[y]<<16&16711680)+(g[y+1]<<8&65280)+(g[y+2]&255),x.push(c(w));return x.join("")}function p(g){for(var b,S=g.length,w=S%3,x=[],y=16383,_=0,A=S-w;_<A;_+=y)x.push(f(g,_,_+y>A?A:_+y));return w===1?(b=g[S-1],x.push(t[b>>2]+t[b<<4&63]+"==")):w===2&&(b=(g[S-2]<<8)+g[S-1],x.push(t[b>>10]+t[b>>4&63]+t[b<<2&63]+"=")),x.join("")}return mr}function Lh(){return So?Ur:(So=!0,Ur.read=function(t,e,r,s,l){var n,i,a=l*8-s-1,o=(1<<a)-1,u=o>>1,c=-7,f=r?l-1:0,p=r?-1:1,g=t[e+f];for(f+=p,n=g&(1<<-c)-1,g>>=-c,c+=a;c>0;n=n*256+t[e+f],f+=p,c-=8);for(i=n&(1<<-c)-1,n>>=-c,c+=s;c>0;i=i*256+t[e+f],f+=p,c-=8);if(n===0)n=1-u;else{if(n===o)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,s),n=n-u}return(g?-1:1)*i*Math.pow(2,n-s)},Ur.write=function(t,e,r,s,l,n){var i,a,o,u=n*8-l-1,c=(1<<u)-1,f=c>>1,p=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=s?0:n-1,b=s?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,i=c):(i=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-i))<1&&(i--,o*=2),i+f>=1?e+=p/o:e+=p*Math.pow(2,1-f),e*o>=2&&(i++,o/=2),i+f>=c?(a=0,i=c):i+f>=1?(a=(e*o-1)*Math.pow(2,l),i=i+f):(a=e*Math.pow(2,f-1)*Math.pow(2,l),i=0));l>=8;t[r+g]=a&255,g+=b,a/=256,l-=8);for(i=i<<l|a,u+=l;u>0;t[r+g]=i&255,g+=b,i/=256,u-=8);t[r+g-b]|=S*128},Ur)}function $h(){if(Eo)return Nt;Eo=!0;let t=Uh(),e=Lh(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Nt.Buffer=i,Nt.SlowBuffer=x,Nt.INSPECT_MAX_BYTES=50;let s=2147483647;Nt.kMaxLength=s,i.TYPED_ARRAY_SUPPORT=l(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{let h=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(h,d),h.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function n(h){if(h>s)throw new RangeError('The value "'+h+'" is invalid for option "size"');let d=new Uint8Array(h);return Object.setPrototypeOf(d,i.prototype),d}function i(h,d,m){if(typeof h=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(h)}return a(h,d,m)}i.poolSize=8192;function a(h,d,m){if(typeof h=="string")return f(h,d);if(ArrayBuffer.isView(h))return g(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(re(h,ArrayBuffer)||h&&re(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(re(h,SharedArrayBuffer)||h&&re(h.buffer,SharedArrayBuffer)))return b(h,d,m);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let P=h.valueOf&&h.valueOf();if(P!=null&&P!==h)return i.from(P,d,m);let L=S(h);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return i.from(h[Symbol.toPrimitive]("string"),d,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}i.from=function(h,d,m){return a(h,d,m)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function o(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function u(h,d,m){return o(h),h<=0?n(h):d!==void 0?typeof m=="string"?n(h).fill(d,m):n(h).fill(d):n(h)}i.alloc=function(h,d,m){return u(h,d,m)};function c(h){return o(h),n(h<0?0:w(h)|0)}i.allocUnsafe=function(h){return c(h)},i.allocUnsafeSlow=function(h){return c(h)};function f(h,d){if((typeof d!="string"||d==="")&&(d="utf8"),!i.isEncoding(d))throw new TypeError("Unknown encoding: "+d);let m=y(h,d)|0,P=n(m),L=P.write(h,d);return L!==m&&(P=P.slice(0,L)),P}function p(h){let d=h.length<0?0:w(h.length)|0,m=n(d);for(let P=0;P<d;P+=1)m[P]=h[P]&255;return m}function g(h){if(re(h,Uint8Array)){let d=new Uint8Array(h);return b(d.buffer,d.byteOffset,d.byteLength)}return p(h)}function b(h,d,m){if(d<0||h.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<d+(m||0))throw new RangeError('"length" is outside of buffer bounds');let P;return d===void 0&&m===void 0?P=new Uint8Array(h):m===void 0?P=new Uint8Array(h,d):P=new Uint8Array(h,d,m),Object.setPrototypeOf(P,i.prototype),P}function S(h){if(i.isBuffer(h)){let d=w(h.length)|0,m=n(d);return m.length===0||h.copy(m,0,0,d),m}if(h.length!==void 0)return typeof h.length!="number"||ve(h.length)?n(0):p(h);if(h.type==="Buffer"&&Array.isArray(h.data))return p(h.data)}function w(h){if(h>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return h|0}function x(h){return+h!=h&&(h=0),i.alloc(+h)}i.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==i.prototype},i.compare=function(h,d){if(re(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),re(d,Uint8Array)&&(d=i.from(d,d.offset,d.byteLength)),!i.isBuffer(h)||!i.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===d)return 0;let m=h.length,P=d.length;for(let L=0,Y=Math.min(m,P);L<Y;++L)if(h[L]!==d[L]){m=h[L],P=d[L];break}return m<P?-1:P<m?1:0},i.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(h,d){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return i.alloc(0);let m;if(d===void 0)for(d=0,m=0;m<h.length;++m)d+=h[m].length;let P=i.allocUnsafe(d),L=0;for(m=0;m<h.length;++m){let Y=h[m];if(re(Y,Uint8Array))L+Y.length>P.length?(i.isBuffer(Y)||(Y=i.from(Y)),Y.copy(P,L)):Uint8Array.prototype.set.call(P,Y,L);else if(i.isBuffer(Y))Y.copy(P,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=Y.length}return P};function y(h,d){if(i.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||re(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);let m=h.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&m===0)return 0;let L=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return X(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return ye(h).length;default:if(L)return P?-1:X(h).length;d=(""+d).toLowerCase(),L=!0}}i.byteLength=y;function _(h,d,m){let P=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,d>>>=0,m<=d))return"";for(h||(h="utf8");;)switch(h){case"hex":return $(this,d,m);case"utf8":case"utf-8":return j(this,d,m);case"ascii":return ae(this,d,m);case"latin1":case"binary":return te(this,d,m);case"base64":return E(this,d,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,d,m);default:if(P)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),P=!0}}i.prototype._isBuffer=!0;function A(h,d,m){let P=h[d];h[d]=h[m],h[m]=P}i.prototype.swap16=function(){let h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<h;d+=2)A(this,d,d+1);return this},i.prototype.swap32=function(){let h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<h;d+=4)A(this,d,d+3),A(this,d+1,d+2);return this},i.prototype.swap64=function(){let h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<h;d+=8)A(this,d,d+7),A(this,d+1,d+6),A(this,d+2,d+5),A(this,d+3,d+4);return this},i.prototype.toString=function(){let h=this.length;return h===0?"":arguments.length===0?j(this,0,h):_.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(h){if(!i.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:i.compare(this,h)===0},i.prototype.inspect=function(){let h="",d=Nt.INSPECT_MAX_BYTES;return h=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(h+=" ... "),"<Buffer "+h+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(h,d,m,P,L){if(re(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),!i.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(d===void 0&&(d=0),m===void 0&&(m=h?h.length:0),P===void 0&&(P=0),L===void 0&&(L=this.length),d<0||m>h.length||P<0||L>this.length)throw new RangeError("out of range index");if(P>=L&&d>=m)return 0;if(P>=L)return-1;if(d>=m)return 1;if(d>>>=0,m>>>=0,P>>>=0,L>>>=0,this===h)return 0;let Y=L-P,se=m-d,V=Math.min(Y,se),ee=this.slice(P,L),Ae=h.slice(d,m);for(let ke=0;ke<V;++ke)if(ee[ke]!==Ae[ke]){Y=ee[ke],se=Ae[ke];break}return Y<se?-1:se<Y?1:0};function v(h,d,m,P,L){if(h.length===0)return-1;if(typeof m=="string"?(P=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,ve(m)&&(m=L?0:h.length-1),m<0&&(m=h.length+m),m>=h.length){if(L)return-1;m=h.length-1}else if(m<0)if(L)m=0;else return-1;if(typeof d=="string"&&(d=i.from(d,P)),i.isBuffer(d))return d.length===0?-1:C(h,d,m,P,L);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(h,d,m):Uint8Array.prototype.lastIndexOf.call(h,d,m):C(h,[d],m,P,L);throw new TypeError("val must be string, number or Buffer")}function C(h,d,m,P,L){let Y=1,se=h.length,V=d.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(h.length<2||d.length<2)return-1;Y=2,se/=2,V/=2,m/=2}function ee(ke,Pe){return Y===1?ke[Pe]:ke.readUInt16BE(Pe*Y)}let Ae;if(L){let ke=-1;for(Ae=m;Ae<se;Ae++)if(ee(h,Ae)===ee(d,ke===-1?0:Ae-ke)){if(ke===-1&&(ke=Ae),Ae-ke+1===V)return ke*Y}else ke!==-1&&(Ae-=Ae-ke),ke=-1}else for(m+V>se&&(m=se-V),Ae=m;Ae>=0;Ae--){let ke=!0;for(let Pe=0;Pe<V;Pe++)if(ee(h,Ae+Pe)!==ee(d,Pe)){ke=!1;break}if(ke)return Ae}return-1}i.prototype.includes=function(h,d,m){return this.indexOf(h,d,m)!==-1},i.prototype.indexOf=function(h,d,m){return v(this,h,d,m,!0)},i.prototype.lastIndexOf=function(h,d,m){return v(this,h,d,m,!1)};function O(h,d,m,P){m=Number(m)||0;let L=h.length-m;P?(P=Number(P),P>L&&(P=L)):P=L;let Y=d.length;P>Y/2&&(P=Y/2);let se;for(se=0;se<P;++se){let V=parseInt(d.substr(se*2,2),16);if(ve(V))return se;h[m+se]=V}return se}function I(h,d,m,P){return we(X(d,h.length-m),h,m,P)}function T(h,d,m,P){return we(ue(d),h,m,P)}function k(h,d,m,P){return we(ye(d),h,m,P)}function z(h,d,m,P){return we(me(d,h.length-m),h,m,P)}i.prototype.write=function(h,d,m,P){if(d===void 0)P="utf8",m=this.length,d=0;else if(m===void 0&&typeof d=="string")P=d,m=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(m)?(m=m>>>0,P===void 0&&(P="utf8")):(P=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let L=this.length-d;if((m===void 0||m>L)&&(m=L),h.length>0&&(m<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");let Y=!1;for(;;)switch(P){case"hex":return O(this,h,d,m);case"utf8":case"utf-8":return I(this,h,d,m);case"ascii":case"latin1":case"binary":return T(this,h,d,m);case"base64":return k(this,h,d,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,h,d,m);default:if(Y)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),Y=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(h,d,m){return d===0&&m===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(d,m))}function j(h,d,m){m=Math.min(h.length,m);let P=[],L=d;for(;L<m;){let Y=h[L],se=null,V=Y>239?4:Y>223?3:Y>191?2:1;if(L+V<=m){let ee,Ae,ke,Pe;switch(V){case 1:Y<128&&(se=Y);break;case 2:ee=h[L+1],(ee&192)===128&&(Pe=(Y&31)<<6|ee&63,Pe>127&&(se=Pe));break;case 3:ee=h[L+1],Ae=h[L+2],(ee&192)===128&&(Ae&192)===128&&(Pe=(Y&15)<<12|(ee&63)<<6|Ae&63,Pe>2047&&(Pe<55296||Pe>57343)&&(se=Pe));break;case 4:ee=h[L+1],Ae=h[L+2],ke=h[L+3],(ee&192)===128&&(Ae&192)===128&&(ke&192)===128&&(Pe=(Y&15)<<18|(ee&63)<<12|(Ae&63)<<6|ke&63,Pe>65535&&Pe<1114112&&(se=Pe))}}se===null?(se=65533,V=1):se>65535&&(se-=65536,P.push(se>>>10&1023|55296),se=56320|se&1023),P.push(se),L+=V}return N(P)}let U=4096;function N(h){let d=h.length;if(d<=U)return String.fromCharCode.apply(String,h);let m="",P=0;for(;P<d;)m+=String.fromCharCode.apply(String,h.slice(P,P+=U));return m}function ae(h,d,m){let P="";m=Math.min(h.length,m);for(let L=d;L<m;++L)P+=String.fromCharCode(h[L]&127);return P}function te(h,d,m){let P="";m=Math.min(h.length,m);for(let L=d;L<m;++L)P+=String.fromCharCode(h[L]);return P}function $(h,d,m){let P=h.length;(!d||d<0)&&(d=0),(!m||m<0||m>P)&&(m=P);let L="";for(let Y=d;Y<m;++Y)L+=Ee[h[Y]];return L}function ie(h,d,m){let P=h.slice(d,m),L="";for(let Y=0;Y<P.length-1;Y+=2)L+=String.fromCharCode(P[Y]+P[Y+1]*256);return L}i.prototype.slice=function(h,d){let m=this.length;h=~~h,d=d===void 0?m:~~d,h<0?(h+=m,h<0&&(h=0)):h>m&&(h=m),d<0?(d+=m,d<0&&(d=0)):d>m&&(d=m),d<h&&(d=h);let P=this.subarray(h,d);return Object.setPrototypeOf(P,i.prototype),P};function H(h,d,m){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+d>m)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(h,d,m){h=h>>>0,d=d>>>0,m||H(h,d,this.length);let P=this[h],L=1,Y=0;for(;++Y<d&&(L*=256);)P+=this[h+Y]*L;return P},i.prototype.readUintBE=i.prototype.readUIntBE=function(h,d,m){h=h>>>0,d=d>>>0,m||H(h,d,this.length);let P=this[h+--d],L=1;for(;d>0&&(L*=256);)P+=this[h+--d]*L;return P},i.prototype.readUint8=i.prototype.readUInt8=function(h,d){return h=h>>>0,d||H(h,1,this.length),this[h]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(h,d){return h=h>>>0,d||H(h,2,this.length),this[h]|this[h+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(h,d){return h=h>>>0,d||H(h,2,this.length),this[h]<<8|this[h+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(h,d){return h=h>>>0,d||H(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(h,d){return h=h>>>0,d||H(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},i.prototype.readBigUInt64LE=he(function(h){h=h>>>0,Z(h,"offset");let d=this[h],m=this[h+7];(d===void 0||m===void 0)&&ge(h,this.length-8);let P=d+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,L=this[++h]+this[++h]*2**8+this[++h]*2**16+m*2**24;return BigInt(P)+(BigInt(L)<<BigInt(32))}),i.prototype.readBigUInt64BE=he(function(h){h=h>>>0,Z(h,"offset");let d=this[h],m=this[h+7];(d===void 0||m===void 0)&&ge(h,this.length-8);let P=d*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],L=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+m;return(BigInt(P)<<BigInt(32))+BigInt(L)}),i.prototype.readIntLE=function(h,d,m){h=h>>>0,d=d>>>0,m||H(h,d,this.length);let P=this[h],L=1,Y=0;for(;++Y<d&&(L*=256);)P+=this[h+Y]*L;return L*=128,P>=L&&(P-=Math.pow(2,8*d)),P},i.prototype.readIntBE=function(h,d,m){h=h>>>0,d=d>>>0,m||H(h,d,this.length);let P=d,L=1,Y=this[h+--P];for(;P>0&&(L*=256);)Y+=this[h+--P]*L;return L*=128,Y>=L&&(Y-=Math.pow(2,8*d)),Y},i.prototype.readInt8=function(h,d){return h=h>>>0,d||H(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},i.prototype.readInt16LE=function(h,d){h=h>>>0,d||H(h,2,this.length);let m=this[h]|this[h+1]<<8;return m&32768?m|4294901760:m},i.prototype.readInt16BE=function(h,d){h=h>>>0,d||H(h,2,this.length);let m=this[h+1]|this[h]<<8;return m&32768?m|4294901760:m},i.prototype.readInt32LE=function(h,d){return h=h>>>0,d||H(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},i.prototype.readInt32BE=function(h,d){return h=h>>>0,d||H(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},i.prototype.readBigInt64LE=he(function(h){h=h>>>0,Z(h,"offset");let d=this[h],m=this[h+7];(d===void 0||m===void 0)&&ge(h,this.length-8);let P=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(m<<24);return(BigInt(P)<<BigInt(32))+BigInt(d+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),i.prototype.readBigInt64BE=he(function(h){h=h>>>0,Z(h,"offset");let d=this[h],m=this[h+7];(d===void 0||m===void 0)&&ge(h,this.length-8);let P=(d<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(P)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+m)}),i.prototype.readFloatLE=function(h,d){return h=h>>>0,d||H(h,4,this.length),e.read(this,h,!0,23,4)},i.prototype.readFloatBE=function(h,d){return h=h>>>0,d||H(h,4,this.length),e.read(this,h,!1,23,4)},i.prototype.readDoubleLE=function(h,d){return h=h>>>0,d||H(h,8,this.length),e.read(this,h,!0,52,8)},i.prototype.readDoubleBE=function(h,d){return h=h>>>0,d||H(h,8,this.length),e.read(this,h,!1,52,8)};function ne(h,d,m,P,L,Y){if(!i.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>L||d<Y)throw new RangeError('"value" argument is out of bounds');if(m+P>h.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(h,d,m,P){if(h=+h,d=d>>>0,m=m>>>0,!P){let se=Math.pow(2,8*m)-1;ne(this,h,d,m,se,0)}let L=1,Y=0;for(this[d]=h&255;++Y<m&&(L*=256);)this[d+Y]=h/L&255;return d+m},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(h,d,m,P){if(h=+h,d=d>>>0,m=m>>>0,!P){let se=Math.pow(2,8*m)-1;ne(this,h,d,m,se,0)}let L=m-1,Y=1;for(this[d+L]=h&255;--L>=0&&(Y*=256);)this[d+L]=h/Y&255;return d+m},i.prototype.writeUint8=i.prototype.writeUInt8=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,1,255,0),this[d]=h&255,d+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,2,65535,0),this[d]=h&255,this[d+1]=h>>>8,d+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,2,65535,0),this[d]=h>>>8,this[d+1]=h&255,d+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,4,4294967295,0),this[d+3]=h>>>24,this[d+2]=h>>>16,this[d+1]=h>>>8,this[d]=h&255,d+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,4,4294967295,0),this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255,d+4};function R(h,d,m,P,L){Q(d,P,L,h,m,7);let Y=Number(d&BigInt(4294967295));h[m++]=Y,Y=Y>>8,h[m++]=Y,Y=Y>>8,h[m++]=Y,Y=Y>>8,h[m++]=Y;let se=Number(d>>BigInt(32)&BigInt(4294967295));return h[m++]=se,se=se>>8,h[m++]=se,se=se>>8,h[m++]=se,se=se>>8,h[m++]=se,m}function K(h,d,m,P,L){Q(d,P,L,h,m,7);let Y=Number(d&BigInt(4294967295));h[m+7]=Y,Y=Y>>8,h[m+6]=Y,Y=Y>>8,h[m+5]=Y,Y=Y>>8,h[m+4]=Y;let se=Number(d>>BigInt(32)&BigInt(4294967295));return h[m+3]=se,se=se>>8,h[m+2]=se,se=se>>8,h[m+1]=se,se=se>>8,h[m]=se,m+8}i.prototype.writeBigUInt64LE=he(function(h,d=0){return R(this,h,d,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=he(function(h,d=0){return K(this,h,d,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(h,d,m,P){if(h=+h,d=d>>>0,!P){let V=Math.pow(2,8*m-1);ne(this,h,d,m,V-1,-V)}let L=0,Y=1,se=0;for(this[d]=h&255;++L<m&&(Y*=256);)h<0&&se===0&&this[d+L-1]!==0&&(se=1),this[d+L]=(h/Y>>0)-se&255;return d+m},i.prototype.writeIntBE=function(h,d,m,P){if(h=+h,d=d>>>0,!P){let V=Math.pow(2,8*m-1);ne(this,h,d,m,V-1,-V)}let L=m-1,Y=1,se=0;for(this[d+L]=h&255;--L>=0&&(Y*=256);)h<0&&se===0&&this[d+L+1]!==0&&(se=1),this[d+L]=(h/Y>>0)-se&255;return d+m},i.prototype.writeInt8=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,1,127,-128),h<0&&(h=255+h+1),this[d]=h&255,d+1},i.prototype.writeInt16LE=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,2,32767,-32768),this[d]=h&255,this[d+1]=h>>>8,d+2},i.prototype.writeInt16BE=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,2,32767,-32768),this[d]=h>>>8,this[d+1]=h&255,d+2},i.prototype.writeInt32LE=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,4,2147483647,-2147483648),this[d]=h&255,this[d+1]=h>>>8,this[d+2]=h>>>16,this[d+3]=h>>>24,d+4},i.prototype.writeInt32BE=function(h,d,m){return h=+h,d=d>>>0,m||ne(this,h,d,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255,d+4},i.prototype.writeBigInt64LE=he(function(h,d=0){return R(this,h,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=he(function(h,d=0){return K(this,h,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function le(h,d,m,P,L,Y){if(m+P>h.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function q(h,d,m,P,L){return d=+d,m=m>>>0,L||le(h,d,m,4),e.write(h,d,m,P,23,4),m+4}i.prototype.writeFloatLE=function(h,d,m){return q(this,h,d,!0,m)},i.prototype.writeFloatBE=function(h,d,m){return q(this,h,d,!1,m)};function _e(h,d,m,P,L){return d=+d,m=m>>>0,L||le(h,d,m,8),e.write(h,d,m,P,52,8),m+8}i.prototype.writeDoubleLE=function(h,d,m){return _e(this,h,d,!0,m)},i.prototype.writeDoubleBE=function(h,d,m){return _e(this,h,d,!1,m)},i.prototype.copy=function(h,d,m,P){if(!i.isBuffer(h))throw new TypeError("argument should be a Buffer");if(m||(m=0),!P&&P!==0&&(P=this.length),d>=h.length&&(d=h.length),d||(d=0),P>0&&P<m&&(P=m),P===m||h.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),h.length-d<P-m&&(P=h.length-d+m);let L=P-m;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,m,P):Uint8Array.prototype.set.call(h,this.subarray(m,P),d),L},i.prototype.fill=function(h,d,m,P){if(typeof h=="string"){if(typeof d=="string"?(P=d,d=0,m=this.length):typeof m=="string"&&(P=m,m=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!i.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(h.length===1){let Y=h.charCodeAt(0);(P==="utf8"&&Y<128||P==="latin1")&&(h=Y)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(d<0||this.length<d||this.length<m)throw new RangeError("Out of range index");if(m<=d)return this;d=d>>>0,m=m===void 0?this.length:m>>>0,h||(h=0);let L;if(typeof h=="number")for(L=d;L<m;++L)this[L]=h;else{let Y=i.isBuffer(h)?h:i.from(h,P),se=Y.length;if(se===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(L=0;L<m-d;++L)this[L+d]=Y[L%se]}return this};let J={};function B(h,d,m){J[h]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(P){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:P,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}B("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(h,d){return`The "${h}" argument must be of type number. Received type ${typeof d}`},TypeError),B("ERR_OUT_OF_RANGE",function(h,d,m){let P=`The value of "${h}" is out of range.`,L=m;return Number.isInteger(m)&&Math.abs(m)>2**32?L=oe(String(m)):typeof m=="bigint"&&(L=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(L=oe(L)),L+="n"),P+=` It must be ${d}. Received ${L}`,P},RangeError);function oe(h){let d="",m=h.length,P=h[0]==="-"?1:0;for(;m>=P+4;m-=3)d=`_${h.slice(m-3,m)}${d}`;return`${h.slice(0,m)}${d}`}function G(h,d,m){Z(d,"offset"),(h[d]===void 0||h[d+m]===void 0)&&ge(d,h.length-(m+1))}function Q(h,d,m,P,L,Y){if(h>m||h<d){let se=typeof d=="bigint"?"n":"",V;throw d===0||d===BigInt(0)?V=`>= 0${se} and < 2${se} ** ${(Y+1)*8}${se}`:V=`>= -(2${se} ** ${(Y+1)*8-1}${se}) and < 2 ** ${(Y+1)*8-1}${se}`,new J.ERR_OUT_OF_RANGE("value",V,h)}G(P,L,Y)}function Z(h,d){if(typeof h!="number")throw new J.ERR_INVALID_ARG_TYPE(d,"number",h)}function ge(h,d,m){throw Math.floor(h)!==h?(Z(h,m),new J.ERR_OUT_OF_RANGE("offset","an integer",h)):d<0?new J.ERR_BUFFER_OUT_OF_BOUNDS:new J.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,h)}let ce=/[^+/0-9A-Za-z-_]/g;function D(h){if(h=h.split("=")[0],h=h.trim().replace(ce,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function X(h,d){d=d||1/0;let m,P=h.length,L=null,Y=[];for(let se=0;se<P;++se){if(m=h.charCodeAt(se),m>55295&&m<57344){if(!L){if(m>56319){(d-=3)>-1&&Y.push(239,191,189);continue}else if(se+1===P){(d-=3)>-1&&Y.push(239,191,189);continue}L=m;continue}if(m<56320){(d-=3)>-1&&Y.push(239,191,189),L=m;continue}m=(L-55296<<10|m-56320)+65536}else L&&(d-=3)>-1&&Y.push(239,191,189);if(L=null,m<128){if((d-=1)<0)break;Y.push(m)}else if(m<2048){if((d-=2)<0)break;Y.push(m>>6|192,m&63|128)}else if(m<65536){if((d-=3)<0)break;Y.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((d-=4)<0)break;Y.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return Y}function ue(h){let d=[];for(let m=0;m<h.length;++m)d.push(h.charCodeAt(m)&255);return d}function me(h,d){let m,P,L,Y=[];for(let se=0;se<h.length&&!((d-=2)<0);++se)m=h.charCodeAt(se),P=m>>8,L=m%256,Y.push(L),Y.push(P);return Y}function ye(h){return t.toByteArray(D(h))}function we(h,d,m,P){let L;for(L=0;L<P&&!(L+m>=d.length||L>=h.length);++L)d[L+m]=h[L];return L}function re(h,d){return h instanceof d||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===d.name}function ve(h){return h!==h}let Ee=function(){let h="0123456789abcdef",d=new Array(256);for(let m=0;m<16;++m){let P=m*16;for(let L=0;L<16;++L)d[P+L]=h[m]+h[L]}return d}();function he(h){return typeof BigInt>"u"?Me:h}function Me(){throw new Error("BigInt not supported")}return Nt}var mr,_o,Ur,So,Nt,Eo,Dh=ut(()=>{fe(),de(),pe(),mr={},_o=!1,Ur={},So=!1,Nt={},Eo=!1}),Ze={};Er(Ze,{Buffer:()=>Kn,INSPECT_MAX_BYTES:()=>ru,default:()=>_t,kMaxLength:()=>nu});var _t,Kn,ru,nu,et=ut(()=>{fe(),de(),pe(),Dh(),_t=$h(),_t.Buffer,_t.SlowBuffer,_t.INSPECT_MAX_BYTES,_t.kMaxLength,Kn=_t.Buffer,ru=_t.INSPECT_MAX_BYTES,nu=_t.kMaxLength}),de=ut(()=>{et()}),He=be((t,e)=>{fe(),de(),pe();var r=class extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let l="";for(let n=0;n<s.length;n++)l+=`    ${s[n].stack}
`;super(l),this.name="AggregateError",this.errors=s}};e.exports={AggregateError:r,ArrayIsArray(s){return Array.isArray(s)},ArrayPrototypeIncludes(s,l){return s.includes(l)},ArrayPrototypeIndexOf(s,l){return s.indexOf(l)},ArrayPrototypeJoin(s,l){return s.join(l)},ArrayPrototypeMap(s,l){return s.map(l)},ArrayPrototypePop(s,l){return s.pop(l)},ArrayPrototypePush(s,l){return s.push(l)},ArrayPrototypeSlice(s,l,n){return s.slice(l,n)},Error,FunctionPrototypeCall(s,l,...n){return s.call(l,...n)},FunctionPrototypeSymbolHasInstance(s,l){return Function.prototype[Symbol.hasInstance].call(s,l)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(s,l){return Object.defineProperties(s,l)},ObjectDefineProperty(s,l,n){return Object.defineProperty(s,l,n)},ObjectGetOwnPropertyDescriptor(s,l){return Object.getOwnPropertyDescriptor(s,l)},ObjectKeys(s){return Object.keys(s)},ObjectSetPrototypeOf(s,l){return Object.setPrototypeOf(s,l)},Promise,PromisePrototypeCatch(s,l){return s.catch(l)},PromisePrototypeThen(s,l,n){return s.then(l,n)},PromiseReject(s){return Promise.reject(s)},PromiseResolve(s){return Promise.resolve(s)},ReflectApply:Reflect.apply,RegExpPrototypeTest(s,l){return s.test(l)},SafeSet:Set,String,StringPrototypeSlice(s,l,n){return s.slice(l,n)},StringPrototypeToLowerCase(s){return s.toLowerCase()},StringPrototypeToUpperCase(s){return s.toUpperCase()},StringPrototypeTrim(s){return s.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(s,l,n){return s.set(l,n)},Boolean,Uint8Array}}),iu=be((t,e)=>{fe(),de(),pe(),e.exports={format(r,...s){return r.replace(/%([sdifj])/g,function(...[l,n]){let i=s.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}}),st=be((t,e)=>{fe(),de(),pe();var{format:r,inspect:s}=iu(),{AggregateError:l}=He(),n=globalThis.AggregateError||l,i=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,u="__node_internal_",c={};function f(y,_){if(!y)throw new c.ERR_INTERNAL_ASSERTION(_)}function p(y){let _="",A=y.length,v=y[0]==="-"?1:0;for(;A>=v+4;A-=3)_=`_${y.slice(A-3,A)}${_}`;return`${y.slice(0,A)}${_}`}function g(y,_,A){if(typeof _=="function")return f(_.length<=A.length,`Code: ${y}; The provided arguments length (${A.length}) does not match the required ones (${_.length}).`),_(...A);let v=(_.match(/%[dfijoOs]/g)||[]).length;return f(v===A.length,`Code: ${y}; The provided arguments length (${A.length}) does not match the required ones (${v}).`),A.length===0?_:r(_,...A)}function b(y,_,A){A||(A=Error);class v extends A{constructor(...O){super(g(y,_,O))}toString(){return`${this.name} [${y}]: ${this.message}`}}Object.defineProperties(v.prototype,{name:{value:A.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${y}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),v.prototype.code=y,v.prototype[i]=!0,c[y]=v}function S(y){let _=u+y.name;return Object.defineProperty(y,"name",{value:_}),y}function w(y,_){if(y&&_&&y!==_){if(Array.isArray(_.errors))return _.errors.push(y),_;let A=new n([_,y],_.message);return A.code=_.code,A}return y||_}var x=class extends Error{constructor(y="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",_);super(y,_),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(y,_,A)=>{f(typeof y=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let v="The ";y.endsWith(" argument")?v+=`${y} `:v+=`"${y}" ${y.includes(".")?"property":"argument"} `,v+="must be ";let C=[],O=[],I=[];for(let k of _)f(typeof k=="string","All expected entries have to be of type string"),a.includes(k)?C.push(k.toLowerCase()):o.test(k)?O.push(k):(f(k!=="object",'The value "object" should be written as "Object"'),I.push(k));if(O.length>0){let k=C.indexOf("object");k!==-1&&(C.splice(C,k,1),O.push("Object"))}if(C.length>0){switch(C.length){case 1:v+=`of type ${C[0]}`;break;case 2:v+=`one of type ${C[0]} or ${C[1]}`;break;default:{let k=C.pop();v+=`one of type ${C.join(", ")}, or ${k}`}}(O.length>0||I.length>0)&&(v+=" or ")}if(O.length>0){switch(O.length){case 1:v+=`an instance of ${O[0]}`;break;case 2:v+=`an instance of ${O[0]} or ${O[1]}`;break;default:{let k=O.pop();v+=`an instance of ${O.join(", ")}, or ${k}`}}I.length>0&&(v+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(v+="an "),v+=`${I[0]}`;break;case 2:v+=`one of ${I[0]} or ${I[1]}`;break;default:{let k=I.pop();v+=`one of ${I.join(", ")}, or ${k}`}}if(A==null)v+=`. Received ${A}`;else if(typeof A=="function"&&A.name)v+=`. Received function ${A.name}`;else if(typeof A=="object"){var T;if((T=A.constructor)!==null&&T!==void 0&&T.name)v+=`. Received an instance of ${A.constructor.name}`;else{let k=s(A,{depth:-1});v+=`. Received ${k}`}}else{let k=s(A,{colors:!1});k.length>25&&(k=`${k.slice(0,25)}...`),v+=`. Received type ${typeof A} (${k})`}return v},TypeError),b("ERR_INVALID_ARG_VALUE",(y,_,A="is invalid")=>{let v=s(_);return v.length>128&&(v=v.slice(0,128)+"..."),`The ${y.includes(".")?"property":"argument"} '${y}' ${A}. Received ${v}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(y,_,A)=>{var v;let C=A!=null&&(v=A.constructor)!==null&&v!==void 0&&v.name?`instance of ${A.constructor.name}`:`type ${typeof A}`;return`Expected ${y} to be returned from the "${_}" function but got ${C}.`},TypeError),b("ERR_MISSING_ARGS",(...y)=>{f(y.length>0,"At least one arg needs to be specified");let _,A=y.length;switch(y=(Array.isArray(y)?y:[y]).map(v=>`"${v}"`).join(" or "),A){case 1:_+=`The ${y[0]} argument`;break;case 2:_+=`The ${y[0]} and ${y[1]} arguments`;break;default:{let v=y.pop();_+=`The ${y.join(", ")}, and ${v} arguments`}break}return`${_} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(y,_,A)=>{f(_,'Missing "range" argument');let v;if(Number.isInteger(A)&&Math.abs(A)>2**32)v=p(String(A));else if(typeof A=="bigint"){v=String(A);let C=BigInt(2)**BigInt(32);(A>C||A<-C)&&(v=p(v)),v+="n"}else v=s(A);return`The value of "${y}" is out of range. It must be ${_}. Received ${v}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:x,aggregateTwoErrors:S(w),hideStackFrames:S,codes:c}}),en=be((t,e)=>{fe(),de(),pe();var{AbortController:r,AbortSignal:s}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=r,e.exports.AbortSignal=s,e.exports.default=r}),Kt={};Er(Kt,{EventEmitter:()=>ou,default:()=>br,defaultMaxListeners:()=>su,init:()=>au,listenerCount:()=>lu,on:()=>uu,once:()=>cu});function Fh(){if(Ao)return Lr;Ao=!0;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(A,v,C){return Function.prototype.apply.call(A,v,C)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:r=function(A){return Object.getOwnPropertyNames(A)};function s(A){console&&console.warn&&console.warn(A)}var l=Number.isNaN||function(A){return A!==A};function n(){n.init.call(this)}Lr=n,Lr.once=x,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var i=10;function a(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(A){if(typeof A!="number"||A<0||l(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");i=A}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||l(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function o(A){return A._maxListeners===void 0?n.defaultMaxListeners:A._maxListeners}n.prototype.getMaxListeners=function(){return o(this)},n.prototype.emit=function(A){for(var v=[],C=1;C<arguments.length;C++)v.push(arguments[C]);var O=A==="error",I=this._events;if(I!==void 0)O=O&&I.error===void 0;else if(!O)return!1;if(O){var T;if(v.length>0&&(T=v[0]),T instanceof Error)throw T;var k=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw k.context=T,k}var z=I[A];if(z===void 0)return!1;if(typeof z=="function")e(z,this,v);else for(var E=z.length,j=b(z,E),C=0;C<E;++C)e(j[C],this,v);return!0};function u(A,v,C,O){var I,T,k;if(a(C),T=A._events,T===void 0?(T=A._events=Object.create(null),A._eventsCount=0):(T.newListener!==void 0&&(A.emit("newListener",v,C.listener?C.listener:C),T=A._events),k=T[v]),k===void 0)k=T[v]=C,++A._eventsCount;else if(typeof k=="function"?k=T[v]=O?[C,k]:[k,C]:O?k.unshift(C):k.push(C),I=o(A),I>0&&k.length>I&&!k.warned){k.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");z.name="MaxListenersExceededWarning",z.emitter=A,z.type=v,z.count=k.length,s(z)}return A}n.prototype.addListener=function(A,v){return u(this,A,v,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(A,v){return u(this,A,v,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(A,v,C){var O={fired:!1,wrapFn:void 0,target:A,type:v,listener:C},I=c.bind(O);return I.listener=C,O.wrapFn=I,I}n.prototype.once=function(A,v){return a(v),this.on(A,f(this,A,v)),this},n.prototype.prependOnceListener=function(A,v){return a(v),this.prependListener(A,f(this,A,v)),this},n.prototype.removeListener=function(A,v){var C,O,I,T,k;if(a(v),O=this._events,O===void 0)return this;if(C=O[A],C===void 0)return this;if(C===v||C.listener===v)--this._eventsCount===0?this._events=Object.create(null):(delete O[A],O.removeListener&&this.emit("removeListener",A,C.listener||v));else if(typeof C!="function"){for(I=-1,T=C.length-1;T>=0;T--)if(C[T]===v||C[T].listener===v){k=C[T].listener,I=T;break}if(I<0)return this;I===0?C.shift():S(C,I),C.length===1&&(O[A]=C[0]),O.removeListener!==void 0&&this.emit("removeListener",A,k||v)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(A){var v,C,O;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[A]),this;if(arguments.length===0){var I=Object.keys(C),T;for(O=0;O<I.length;++O)T=I[O],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(v=C[A],typeof v=="function")this.removeListener(A,v);else if(v!==void 0)for(O=v.length-1;O>=0;O--)this.removeListener(A,v[O]);return this};function p(A,v,C){var O=A._events;if(O===void 0)return[];var I=O[v];return I===void 0?[]:typeof I=="function"?C?[I.listener||I]:[I]:C?w(I):b(I,I.length)}n.prototype.listeners=function(A){return p(this,A,!0)},n.prototype.rawListeners=function(A){return p(this,A,!1)},n.listenerCount=function(A,v){return typeof A.listenerCount=="function"?A.listenerCount(v):g.call(A,v)},n.prototype.listenerCount=g;function g(A){var v=this._events;if(v!==void 0){var C=v[A];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function b(A,v){for(var C=new Array(v),O=0;O<v;++O)C[O]=A[O];return C}function S(A,v){for(;v+1<A.length;v++)A[v]=A[v+1];A.pop()}function w(A){for(var v=new Array(A.length),C=0;C<v.length;++C)v[C]=A[C].listener||A[C];return v}function x(A,v){return new Promise(function(C,O){function I(k){A.removeListener(v,T),O(k)}function T(){typeof A.removeListener=="function"&&A.removeListener("error",I),C([].slice.call(arguments))}_(A,v,T,{once:!0}),v!=="error"&&y(A,I,{once:!0})})}function y(A,v,C){typeof A.on=="function"&&_(A,"error",v,C)}function _(A,v,C,O){if(typeof A.on=="function")O.once?A.once(v,C):A.on(v,C);else if(typeof A.addEventListener=="function")A.addEventListener(v,function I(T){O.once&&A.removeEventListener(v,I),C(T)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return Lr}var Lr,Ao,br,ou,su,au,lu,uu,cu,ur=ut(()=>{fe(),de(),pe(),Lr={},Ao=!1,br=Fh(),br.once,br.once=function(t,e){return new Promise((r,s)=>{function l(...i){n!==void 0&&t.removeListener("error",n),r(i)}let n;e!=="error"&&(n=i=>{t.removeListener(name,l),s(i)},t.once("error",n)),t.once(e,l)})},br.on=function(t,e){let r=[],s=[],l=null,n=!1,i={async next(){let u=r.shift();if(u)return createIterResult(u,!1);if(l){let c=Promise.reject(l);return l=null,c}return n?createIterResult(void 0,!0):new Promise((c,f)=>s.push({resolve:c,reject:f}))},async return(){t.removeListener(e,a),t.removeListener("error",o),n=!0;for(let u of s)u.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(u){l=u,t.removeListener(e,a),t.removeListener("error",o)},[Symbol.asyncIterator](){return this}};return t.on(e,a),t.on("error",o),i;function a(...u){let c=s.shift();c?c.resolve(createIterResult(u,!1)):r.push(u)}function o(u){n=!0;let c=s.shift();c?c.reject(u):l=u,i.return()}},{EventEmitter:ou,defaultMaxListeners:su,init:au,listenerCount:lu,on:uu,once:cu}=br}),at=be((t,e)=>{fe(),de(),pe();var r=(et(),De(Ze)),{format:s,inspect:l}=iu(),{codes:{ERR_INVALID_ARG_TYPE:n}}=st(),{kResistStopPropagation:i,AggregateError:a,SymbolDispose:o}=He(),u=globalThis.AbortSignal||en().AbortSignal,c=globalThis.AbortController||en().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||r.Blob,g=typeof p<"u"?function(w){return w instanceof p}:function(w){return!1},b=(w,x)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new n(x,"AbortSignal",w)},S=(w,x)=>{if(typeof w!="function")throw new n(x,"Function",w)};e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(w){let x=!1;return function(...y){x||(x=!0,w.apply(this,y))}},createDeferredPromise:function(){let w,x;return{promise:new Promise((y,_)=>{w=y,x=_}),resolve:w,reject:x}},promisify(w){return new Promise((x,y)=>{w((_,...A)=>_?y(_):x(...A))})},debuglog(){return function(){}},format:s,inspect:l,types:{isAsyncFunction(w){return w instanceof f},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:g,deprecate(w,x){return w},addAbortListener:(ur(),De(Kt)).addAbortListener||function(w,x){if(w===void 0)throw new n("signal","AbortSignal",w);b(w,"signal"),S(x,"listener");let y;return w.aborted?queueMicrotask(()=>x()):(w.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),y=()=>{w.removeEventListener("abort",x)}),{__proto__:null,[o](){var _;(_=y)===null||_===void 0||_()}}},AbortSignalAny:u.any||function(w){if(w.length===1)return w[0];let x=new c,y=()=>x.abort();return w.forEach(_=>{b(_,"signals"),_.addEventListener("abort",y,{once:!0})}),x.signal.addEventListener("abort",()=>{w.forEach(_=>_.removeEventListener("abort",y))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),rn=be((t,e)=>{fe(),de(),pe();var{ArrayIsArray:r,ArrayPrototypeIncludes:s,ArrayPrototypeJoin:l,ArrayPrototypeMap:n,NumberIsInteger:i,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:u,NumberParseInt:c,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:p,String:g,StringPrototypeToUpperCase:b,StringPrototypeTrim:S}=He(),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:x,ERR_INVALID_ARG_TYPE:y,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:A,ERR_UNKNOWN_SIGNAL:v}}=st(),{normalizeEncoding:C}=at(),{isAsyncFunction:O,isArrayBufferView:I}=at().types,T={};function k(re){return re===(re|0)}function z(re){return re===re>>>0}var E=/^[0-7]+$/,j="must be a 32-bit unsigned integer or an octal string";function U(re,ve,Ee){if(typeof re>"u"&&(re=Ee),typeof re=="string"){if(p(E,re)===null)throw new _(ve,re,j);re=c(re,8)}return te(re,ve),re}var N=w((re,ve,Ee=u,he=o)=>{if(typeof re!="number")throw new y(ve,"number",re);if(!i(re))throw new A(ve,"an integer",re);if(re<Ee||re>he)throw new A(ve,`>= ${Ee} && <= ${he}`,re)}),ae=w((re,ve,Ee=-2147483648,he=2147483647)=>{if(typeof re!="number")throw new y(ve,"number",re);if(!i(re))throw new A(ve,"an integer",re);if(re<Ee||re>he)throw new A(ve,`>= ${Ee} && <= ${he}`,re)}),te=w((re,ve,Ee=!1)=>{if(typeof re!="number")throw new y(ve,"number",re);if(!i(re))throw new A(ve,"an integer",re);let he=Ee?1:0,Me=4294967295;if(re<he||re>Me)throw new A(ve,`>= ${he} && <= ${Me}`,re)});function $(re,ve){if(typeof re!="string")throw new y(ve,"string",re)}function ie(re,ve,Ee=void 0,he){if(typeof re!="number")throw new y(ve,"number",re);if(Ee!=null&&re<Ee||he!=null&&re>he||(Ee!=null||he!=null)&&a(re))throw new A(ve,`${Ee!=null?`>= ${Ee}`:""}${Ee!=null&&he!=null?" && ":""}${he!=null?`<= ${he}`:""}`,re)}var H=w((re,ve,Ee)=>{if(!s(Ee,re)){let he="must be one of: "+l(n(Ee,Me=>typeof Me=="string"?`'${Me}'`:g(Me)),", ");throw new _(ve,re,he)}});function ne(re,ve){if(typeof re!="boolean")throw new y(ve,"boolean",re)}function R(re,ve,Ee){return re==null||!f(re,ve)?Ee:re[ve]}var K=w((re,ve,Ee=null)=>{let he=R(Ee,"allowArray",!1),Me=R(Ee,"allowFunction",!1);if(!R(Ee,"nullable",!1)&&re===null||!he&&r(re)||typeof re!="object"&&(!Me||typeof re!="function"))throw new y(ve,"Object",re)}),le=w((re,ve)=>{if(re!=null&&typeof re!="object"&&typeof re!="function")throw new y(ve,"a dictionary",re)}),q=w((re,ve,Ee=0)=>{if(!r(re))throw new y(ve,"Array",re);if(re.length<Ee){let he=`must be longer than ${Ee}`;throw new _(ve,re,he)}});function _e(re,ve){q(re,ve);for(let Ee=0;Ee<re.length;Ee++)$(re[Ee],`${ve}[${Ee}]`)}function J(re,ve){q(re,ve);for(let Ee=0;Ee<re.length;Ee++)ne(re[Ee],`${ve}[${Ee}]`)}function B(re,ve){q(re,ve);for(let Ee=0;Ee<re.length;Ee++){let he=re[Ee],Me=`${ve}[${Ee}]`;if(he==null)throw new y(Me,"AbortSignal",he);ge(he,Me)}}function oe(re,ve="signal"){if($(re,ve),T[re]===void 0)throw T[b(re)]!==void 0?new v(re+" (signals must use all capital letters)"):new v(re)}var G=w((re,ve="buffer")=>{if(!I(re))throw new y(ve,["Buffer","TypedArray","DataView"],re)});function Q(re,ve){let Ee=C(ve),he=re.length;if(Ee==="hex"&&he%2!==0)throw new _("encoding",ve,`is invalid for data of length ${he}`)}function Z(re,ve="Port",Ee=!0){if(typeof re!="number"&&typeof re!="string"||typeof re=="string"&&S(re).length===0||+re!==+re>>>0||re>65535||re===0&&!Ee)throw new x(ve,re,Ee);return re|0}var ge=w((re,ve)=>{if(re!==void 0&&(re===null||typeof re!="object"||!("aborted"in re)))throw new y(ve,"AbortSignal",re)}),ce=w((re,ve)=>{if(typeof re!="function")throw new y(ve,"Function",re)}),D=w((re,ve)=>{if(typeof re!="function"||O(re))throw new y(ve,"Function",re)}),X=w((re,ve)=>{if(re!==void 0)throw new y(ve,"undefined",re)});function ue(re,ve,Ee){if(!s(Ee,re))throw new y(ve,`('${l(Ee,"|")}')`,re)}var me=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ye(re,ve){if(typeof re>"u"||!p(me,re))throw new _(ve,re,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function we(re){if(typeof re=="string")return ye(re,"hints"),re;if(r(re)){let ve=re.length,Ee="";if(ve===0)return Ee;for(let he=0;he<ve;he++){let Me=re[he];ye(Me,"hints"),Ee+=Me,he!==ve-1&&(Ee+=", ")}return Ee}throw new _("hints",re,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:k,isUint32:z,parseFileMode:U,validateArray:q,validateStringArray:_e,validateBooleanArray:J,validateAbortSignalArray:B,validateBoolean:ne,validateBuffer:G,validateDictionary:le,validateEncoding:Q,validateFunction:ce,validateInt32:ae,validateInteger:N,validateNumber:ie,validateObject:K,validateOneOf:H,validatePlainFunction:D,validatePort:Z,validateSignalName:oe,validateString:$,validateUint32:te,validateUndefined:X,validateUnion:ue,validateAbortSignal:ge,validateLinkHeaderValue:we}}),cr=be((t,e)=>{fe(),de(),pe();var r=e.exports={},s,l;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=n}catch{s=n}try{typeof clearTimeout=="function"?l=clearTimeout:l=i}catch{l=i}})();function a(x){if(s===setTimeout)return setTimeout(x,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(x,0);try{return s(x,0)}catch{try{return s.call(null,x,0)}catch{return s.call(this,x,0)}}}function o(x){if(l===clearTimeout)return clearTimeout(x);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(x);try{return l(x)}catch{try{return l.call(null,x)}catch{return l.call(this,x)}}}var u=[],c=!1,f,p=-1;function g(){!c||!f||(c=!1,f.length?u=f.concat(u):p=-1,u.length&&b())}function b(){if(!c){var x=a(g);c=!0;for(var y=u.length;y;){for(f=u,u=[];++p<y;)f&&f[p].run();p=-1,y=u.length}f=null,c=!1,o(x)}}r.nextTick=function(x){var y=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)y[_-1]=arguments[_];u.push(new S(x,y)),u.length===1&&!c&&a(b)};function S(x,y){this.fun=x,this.array=y}S.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function w(){}r.on=w,r.addListener=w,r.once=w,r.off=w,r.removeListener=w,r.removeAllListeners=w,r.emit=w,r.prependListener=w,r.prependOnceListener=w,r.listeners=function(x){return[]},r.binding=function(x){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(x){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),Ot=be((t,e)=>{fe(),de(),pe();var{SymbolAsyncIterator:r,SymbolIterator:s,SymbolFor:l}=He(),n=l("nodejs.stream.destroyed"),i=l("nodejs.stream.errored"),a=l("nodejs.stream.readable"),o=l("nodejs.stream.writable"),u=l("nodejs.stream.disturbed"),c=l("nodejs.webstream.isClosedPromise"),f=l("nodejs.webstream.controllerErrorFunction");function p(R,K=!1){var le;return!!(R&&typeof R.pipe=="function"&&typeof R.on=="function"&&(!K||typeof R.pause=="function"&&typeof R.resume=="function")&&(!R._writableState||((le=R._readableState)===null||le===void 0?void 0:le.readable)!==!1)&&(!R._writableState||R._readableState))}function g(R){var K;return!!(R&&typeof R.write=="function"&&typeof R.on=="function"&&(!R._readableState||((K=R._writableState)===null||K===void 0?void 0:K.writable)!==!1))}function b(R){return!!(R&&typeof R.pipe=="function"&&R._readableState&&typeof R.on=="function"&&typeof R.write=="function")}function S(R){return R&&(R._readableState||R._writableState||typeof R.write=="function"&&typeof R.on=="function"||typeof R.pipe=="function"&&typeof R.on=="function")}function w(R){return!!(R&&!S(R)&&typeof R.pipeThrough=="function"&&typeof R.getReader=="function"&&typeof R.cancel=="function")}function x(R){return!!(R&&!S(R)&&typeof R.getWriter=="function"&&typeof R.abort=="function")}function y(R){return!!(R&&!S(R)&&typeof R.readable=="object"&&typeof R.writable=="object")}function _(R){return w(R)||x(R)||y(R)}function A(R,K){return R==null?!1:K===!0?typeof R[r]=="function":K===!1?typeof R[s]=="function":typeof R[r]=="function"||typeof R[s]=="function"}function v(R){if(!S(R))return null;let K=R._writableState,le=R._readableState,q=K||le;return!!(R.destroyed||R[n]||q!=null&&q.destroyed)}function C(R){if(!g(R))return null;if(R.writableEnded===!0)return!0;let K=R._writableState;return K!=null&&K.errored?!1:typeof(K==null?void 0:K.ended)!="boolean"?null:K.ended}function O(R,K){if(!g(R))return null;if(R.writableFinished===!0)return!0;let le=R._writableState;return le!=null&&le.errored?!1:typeof(le==null?void 0:le.finished)!="boolean"?null:!!(le.finished||K===!1&&le.ended===!0&&le.length===0)}function I(R){if(!p(R))return null;if(R.readableEnded===!0)return!0;let K=R._readableState;return!K||K.errored?!1:typeof(K==null?void 0:K.ended)!="boolean"?null:K.ended}function T(R,K){if(!p(R))return null;let le=R._readableState;return le!=null&&le.errored?!1:typeof(le==null?void 0:le.endEmitted)!="boolean"?null:!!(le.endEmitted||K===!1&&le.ended===!0&&le.length===0)}function k(R){return R&&R[a]!=null?R[a]:typeof(R==null?void 0:R.readable)!="boolean"?null:v(R)?!1:p(R)&&R.readable&&!T(R)}function z(R){return R&&R[o]!=null?R[o]:typeof(R==null?void 0:R.writable)!="boolean"?null:v(R)?!1:g(R)&&R.writable&&!C(R)}function E(R,K){return S(R)?v(R)?!0:!((K==null?void 0:K.readable)!==!1&&k(R)||(K==null?void 0:K.writable)!==!1&&z(R)):null}function j(R){var K,le;return S(R)?R.writableErrored?R.writableErrored:(K=(le=R._writableState)===null||le===void 0?void 0:le.errored)!==null&&K!==void 0?K:null:null}function U(R){var K,le;return S(R)?R.readableErrored?R.readableErrored:(K=(le=R._readableState)===null||le===void 0?void 0:le.errored)!==null&&K!==void 0?K:null:null}function N(R){if(!S(R))return null;if(typeof R.closed=="boolean")return R.closed;let K=R._writableState,le=R._readableState;return typeof(K==null?void 0:K.closed)=="boolean"||typeof(le==null?void 0:le.closed)=="boolean"?(K==null?void 0:K.closed)||(le==null?void 0:le.closed):typeof R._closed=="boolean"&&ae(R)?R._closed:null}function ae(R){return typeof R._closed=="boolean"&&typeof R._defaultKeepAlive=="boolean"&&typeof R._removedConnection=="boolean"&&typeof R._removedContLen=="boolean"}function te(R){return typeof R._sent100=="boolean"&&ae(R)}function $(R){var K;return typeof R._consuming=="boolean"&&typeof R._dumped=="boolean"&&((K=R.req)===null||K===void 0?void 0:K.upgradeOrConnect)===void 0}function ie(R){if(!S(R))return null;let K=R._writableState,le=R._readableState,q=K||le;return!q&&te(R)||!!(q&&q.autoDestroy&&q.emitClose&&q.closed===!1)}function H(R){var K;return!!(R&&((K=R[u])!==null&&K!==void 0?K:R.readableDidRead||R.readableAborted))}function ne(R){var K,le,q,_e,J,B,oe,G,Q,Z;return!!(R&&((K=(le=(q=(_e=(J=(B=R[i])!==null&&B!==void 0?B:R.readableErrored)!==null&&J!==void 0?J:R.writableErrored)!==null&&_e!==void 0?_e:(oe=R._readableState)===null||oe===void 0?void 0:oe.errorEmitted)!==null&&q!==void 0?q:(G=R._writableState)===null||G===void 0?void 0:G.errorEmitted)!==null&&le!==void 0?le:(Q=R._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&K!==void 0?K:!((Z=R._writableState)===null||Z===void 0)&&Z.errored))}e.exports={isDestroyed:v,kIsDestroyed:n,isDisturbed:H,kIsDisturbed:u,isErrored:ne,kIsErrored:i,isReadable:k,kIsReadable:a,kIsClosedPromise:c,kControllerErrorFunction:f,kIsWritable:o,isClosed:N,isDuplexNodeStream:b,isFinished:E,isIterable:A,isReadableNodeStream:p,isReadableStream:w,isReadableEnded:I,isReadableFinished:T,isReadableErrored:U,isNodeStream:S,isWebStream:_,isWritable:z,isWritableNodeStream:g,isWritableStream:x,isWritableEnded:C,isWritableFinished:O,isWritableErrored:j,isServerRequest:$,isServerResponse:te,willEmitClose:ie,isTransformStream:y}}),Gt=be((t,e)=>{fe(),de(),pe();var r=cr(),{AbortError:s,codes:l}=st(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:i}=l,{kEmptyObject:a,once:o}=at(),{validateAbortSignal:u,validateFunction:c,validateObject:f,validateBoolean:p}=rn(),{Promise:g,PromisePrototypeThen:b,SymbolDispose:S}=He(),{isClosed:w,isReadable:x,isReadableNodeStream:y,isReadableStream:_,isReadableFinished:A,isReadableErrored:v,isWritable:C,isWritableNodeStream:O,isWritableStream:I,isWritableFinished:T,isWritableErrored:k,isNodeStream:z,willEmitClose:E,kIsClosedPromise:j}=Ot(),U;function N(H){return H.setHeader&&typeof H.abort=="function"}var ae=()=>{};function te(H,ne,R){var K,le;if(arguments.length===2?(R=ne,ne=a):ne==null?ne=a:f(ne,"options"),c(R,"callback"),u(ne.signal,"options.signal"),R=o(R),_(H)||I(H))return $(H,ne,R);if(!z(H))throw new n("stream",["ReadableStream","WritableStream","Stream"],H);let q=(K=ne.readable)!==null&&K!==void 0?K:y(H),_e=(le=ne.writable)!==null&&le!==void 0?le:O(H),J=H._writableState,B=H._readableState,oe=()=>{H.writable||Z()},G=E(H)&&y(H)===q&&O(H)===_e,Q=T(H,!1),Z=()=>{Q=!0,H.destroyed&&(G=!1),!(G&&(!H.readable||q))&&(!q||ge)&&R.call(H)},ge=A(H,!1),ce=()=>{ge=!0,H.destroyed&&(G=!1),!(G&&(!H.writable||_e))&&(!_e||Q)&&R.call(H)},D=re=>{R.call(H,re)},X=w(H),ue=()=>{X=!0;let re=k(H)||v(H);if(re&&typeof re!="boolean")return R.call(H,re);if(q&&!ge&&y(H,!0)&&!A(H,!1))return R.call(H,new i);if(_e&&!Q&&!T(H,!1))return R.call(H,new i);R.call(H)},me=()=>{X=!0;let re=k(H)||v(H);if(re&&typeof re!="boolean")return R.call(H,re);R.call(H)},ye=()=>{H.req.on("finish",Z)};N(H)?(H.on("complete",Z),G||H.on("abort",ue),H.req?ye():H.on("request",ye)):_e&&!J&&(H.on("end",oe),H.on("close",oe)),!G&&typeof H.aborted=="boolean"&&H.on("aborted",ue),H.on("end",ce),H.on("finish",Z),ne.error!==!1&&H.on("error",D),H.on("close",ue),X?r.nextTick(ue):J!=null&&J.errorEmitted||B!=null&&B.errorEmitted?G||r.nextTick(me):(!q&&(!G||x(H))&&(Q||C(H)===!1)||!_e&&(!G||C(H))&&(ge||x(H)===!1)||B&&H.req&&H.aborted)&&r.nextTick(me);let we=()=>{R=ae,H.removeListener("aborted",ue),H.removeListener("complete",Z),H.removeListener("abort",ue),H.removeListener("request",ye),H.req&&H.req.removeListener("finish",Z),H.removeListener("end",oe),H.removeListener("close",oe),H.removeListener("finish",Z),H.removeListener("end",ce),H.removeListener("error",D),H.removeListener("close",ue)};if(ne.signal&&!X){let re=()=>{let ve=R;we(),ve.call(H,new s(void 0,{cause:ne.signal.reason}))};if(ne.signal.aborted)r.nextTick(re);else{U=U||at().addAbortListener;let ve=U(ne.signal,re),Ee=R;R=o((...he)=>{ve[S](),Ee.apply(H,he)})}}return we}function $(H,ne,R){let K=!1,le=ae;if(ne.signal)if(le=()=>{K=!0,R.call(H,new s(void 0,{cause:ne.signal.reason}))},ne.signal.aborted)r.nextTick(le);else{U=U||at().addAbortListener;let _e=U(ne.signal,le),J=R;R=o((...B)=>{_e[S](),J.apply(H,B)})}let q=(..._e)=>{K||r.nextTick(()=>R.apply(H,_e))};return b(H[j].promise,q,q),ae}function ie(H,ne){var R;let K=!1;return ne===null&&(ne=a),(R=ne)!==null&&R!==void 0&&R.cleanup&&(p(ne.cleanup,"cleanup"),K=ne.cleanup),new g((le,q)=>{let _e=te(H,ne,J=>{K&&_e(),J?q(J):le()})})}e.exports=te,e.exports.finished=ie}),Ar=be((t,e)=>{fe(),de(),pe();var r=cr(),{aggregateTwoErrors:s,codes:{ERR_MULTIPLE_CALLBACK:l},AbortError:n}=st(),{Symbol:i}=He(),{kIsDestroyed:a,isDestroyed:o,isFinished:u,isServerRequest:c}=Ot(),f=i("kDestroy"),p=i("kConstruct");function g(E,j,U){E&&(E.stack,j&&!j.errored&&(j.errored=E),U&&!U.errored&&(U.errored=E))}function b(E,j){let U=this._readableState,N=this._writableState,ae=N||U;return N!=null&&N.destroyed||U!=null&&U.destroyed?(typeof j=="function"&&j(),this):(g(E,N,U),N&&(N.destroyed=!0),U&&(U.destroyed=!0),ae.constructed?S(this,E,j):this.once(f,function(te){S(this,s(te,E),j)}),this)}function S(E,j,U){let N=!1;function ae(te){if(N)return;N=!0;let $=E._readableState,ie=E._writableState;g(te,ie,$),ie&&(ie.closed=!0),$&&($.closed=!0),typeof U=="function"&&U(te),te?r.nextTick(w,E,te):r.nextTick(x,E)}try{E._destroy(j||null,ae)}catch(te){ae(te)}}function w(E,j){y(E,j),x(E)}function x(E){let j=E._readableState,U=E._writableState;U&&(U.closeEmitted=!0),j&&(j.closeEmitted=!0),(U!=null&&U.emitClose||j!=null&&j.emitClose)&&E.emit("close")}function y(E,j){let U=E._readableState,N=E._writableState;N!=null&&N.errorEmitted||U!=null&&U.errorEmitted||(N&&(N.errorEmitted=!0),U&&(U.errorEmitted=!0),E.emit("error",j))}function _(){let E=this._readableState,j=this._writableState;E&&(E.constructed=!0,E.closed=!1,E.closeEmitted=!1,E.destroyed=!1,E.errored=null,E.errorEmitted=!1,E.reading=!1,E.ended=E.readable===!1,E.endEmitted=E.readable===!1),j&&(j.constructed=!0,j.destroyed=!1,j.closed=!1,j.closeEmitted=!1,j.errored=null,j.errorEmitted=!1,j.finalCalled=!1,j.prefinished=!1,j.ended=j.writable===!1,j.ending=j.writable===!1,j.finished=j.writable===!1)}function A(E,j,U){let N=E._readableState,ae=E._writableState;if(ae!=null&&ae.destroyed||N!=null&&N.destroyed)return this;N!=null&&N.autoDestroy||ae!=null&&ae.autoDestroy?E.destroy(j):j&&(j.stack,ae&&!ae.errored&&(ae.errored=j),N&&!N.errored&&(N.errored=j),U?r.nextTick(y,E,j):y(E,j))}function v(E,j){if(typeof E._construct!="function")return;let U=E._readableState,N=E._writableState;U&&(U.constructed=!1),N&&(N.constructed=!1),E.once(p,j),!(E.listenerCount(p)>1)&&r.nextTick(C,E)}function C(E){let j=!1;function U(N){if(j){A(E,N??new l);return}j=!0;let ae=E._readableState,te=E._writableState,$=te||ae;ae&&(ae.constructed=!0),te&&(te.constructed=!0),$.destroyed?E.emit(f,N):N?A(E,N,!0):r.nextTick(O,E)}try{E._construct(N=>{r.nextTick(U,N)})}catch(N){r.nextTick(U,N)}}function O(E){E.emit(p)}function I(E){return(E==null?void 0:E.setHeader)&&typeof E.abort=="function"}function T(E){E.emit("close")}function k(E,j){E.emit("error",j),r.nextTick(T,E)}function z(E,j){!E||o(E)||(!j&&!u(E)&&(j=new n),c(E)?(E.socket=null,E.destroy(j)):I(E)?E.abort():I(E.req)?E.req.abort():typeof E.destroy=="function"?E.destroy(j):typeof E.close=="function"?E.close():j?r.nextTick(k,E,j):r.nextTick(T,E),E.destroyed||(E[a]=!0))}e.exports={construct:v,destroyer:z,destroy:b,undestroy:_,errorOrDestroy:A}}),Cs=be((t,e)=>{fe(),de(),pe();var{ArrayIsArray:r,ObjectSetPrototypeOf:s}=He(),{EventEmitter:l}=(ur(),De(Kt));function n(a){l.call(this,a)}s(n.prototype,l.prototype),s(n,l),n.prototype.pipe=function(a,o){let u=this;function c(x){a.writable&&a.write(x)===!1&&u.pause&&u.pause()}u.on("data",c);function f(){u.readable&&u.resume&&u.resume()}a.on("drain",f),!a._isStdio&&(!o||o.end!==!1)&&(u.on("end",g),u.on("close",b));let p=!1;function g(){p||(p=!0,a.end())}function b(){p||(p=!0,typeof a.destroy=="function"&&a.destroy())}function S(x){w(),l.listenerCount(this,"error")===0&&this.emit("error",x)}i(u,"error",S),i(a,"error",S);function w(){u.removeListener("data",c),a.removeListener("drain",f),u.removeListener("end",g),u.removeListener("close",b),u.removeListener("error",S),a.removeListener("error",S),u.removeListener("end",w),u.removeListener("close",w),a.removeListener("close",w)}return u.on("end",w),u.on("close",w),a.on("close",w),a.emit("pipe",u),a};function i(a,o,u){if(typeof a.prependListener=="function")return a.prependListener(o,u);!a._events||!a._events[o]?a.on(o,u):r(a._events[o])?a._events[o].unshift(u):a._events[o]=[u,a._events[o]]}e.exports={Stream:n,prependListener:i}}),Xn=be((t,e)=>{fe(),de(),pe();var{SymbolDispose:r}=He(),{AbortError:s,codes:l}=st(),{isNodeStream:n,isWebStream:i,kControllerErrorFunction:a}=Ot(),o=Gt(),{ERR_INVALID_ARG_TYPE:u}=l,c,f=(p,g)=>{if(typeof p!="object"||!("aborted"in p))throw new u(g,"AbortSignal",p)};e.exports.addAbortSignal=function(p,g){if(f(p,"signal"),!n(g)&&!i(g))throw new u("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(p,g)},e.exports.addAbortSignalNoValidate=function(p,g){if(typeof p!="object"||!("aborted"in p))return g;let b=n(g)?()=>{g.destroy(new s(void 0,{cause:p.reason}))}:()=>{g[a](new s(void 0,{cause:p.reason}))};if(p.aborted)b();else{c=c||at().addAbortListener;let S=c(p,b);o(g,S[r])}return g}}),Wh=be((t,e)=>{fe(),de(),pe();var{StringPrototypeSlice:r,SymbolIterator:s,TypedArrayPrototypeSet:l,Uint8Array:n}=He(),{Buffer:i}=(et(),De(Ze)),{inspect:a}=at();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){let u={data:o,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(o){let u={data:o,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;let o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=o+u.data;return c}concat(o){if(this.length===0)return i.alloc(0);let u=i.allocUnsafe(o>>>0),c=this.head,f=0;for(;c;)l(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(o,u){let c=this.head.data;if(o<c.length){let f=c.slice(0,o);return this.head.data=c.slice(o),f}return o===c.length?this.shift():u?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[s](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let u="",c=this.head,f=0;do{let p=c.data;if(o>p.length)u+=p,o-=p.length;else{o===p.length?(u+=p,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=r(p,0,o),this.head=c,c.data=r(p,o));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(o){let u=i.allocUnsafe(o),c=o,f=this.head,p=0;do{let g=f.data;if(o>g.length)l(u,g,c-o),o-=g.length;else{o===g.length?(l(u,g,c-o),++p,f.next?this.head=f.next:this.head=this.tail=null):(l(u,new n(g.buffer,g.byteOffset,o),c-o),this.head=f,f.data=g.slice(o));break}++p}while((f=f.next)!==null);return this.length-=p,u}[Symbol.for("nodejs.util.inspect.custom")](o,u){return a(this,{...u,depth:0,customInspect:!1})}}}),Zn=be((t,e)=>{fe(),de(),pe();var{MathFloor:r,NumberIsInteger:s}=He(),{validateInteger:l}=rn(),{ERR_INVALID_ARG_VALUE:n}=st().codes,i=16*1024,a=16;function o(p,g,b){return p.highWaterMark!=null?p.highWaterMark:g?p[b]:null}function u(p){return p?a:i}function c(p,g){l(g,"value",0),p?a=g:i=g}function f(p,g,b,S){let w=o(g,S,b);if(w!=null){if(!s(w)||w<0){let x=S?`options.${b}`:"options.highWaterMark";throw new n(x,w)}return r(w)}return u(p.objectMode)}e.exports={getHighWaterMark:f,getDefaultHighWaterMark:u,setDefaultHighWaterMark:c}}),zh=be((t,e)=>{fe(),de(),pe();var r=(et(),De(Ze)),s=r.Buffer;function l(i,a){for(var o in i)a[o]=i[o]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=r:(l(r,t),t.Buffer=n);function n(i,a,o){return s(i,a,o)}n.prototype=Object.create(s.prototype),l(s,n),n.from=function(i,a,o){if(typeof i=="number")throw new TypeError("Argument must not be a number");return s(i,a,o)},n.alloc=function(i,a,o){if(typeof i!="number")throw new TypeError("Argument must be a number");var u=s(i);return a!==void 0?typeof o=="string"?u.fill(a,o):u.fill(a):u.fill(0),u},n.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return s(i)},n.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(i)}}),qh=be(t=>{fe(),de(),pe();var e=zh().Buffer,r=e.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(y){if(!y)return"utf8";for(var _;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(_)return;y=(""+y).toLowerCase(),_=!0}}function l(y){var _=s(y);if(typeof _!="string"&&(e.isEncoding===r||!r(y)))throw new Error("Unknown encoding: "+y);return _||y}t.StringDecoder=n;function n(y){this.encoding=l(y);var _;switch(this.encoding){case"utf16le":this.text=p,this.end=g,_=4;break;case"utf8":this.fillLast=u,_=4;break;case"base64":this.text=b,this.end=S,_=3;break;default:this.write=w,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}n.prototype.write=function(y){if(y.length===0)return"";var _,A;if(this.lastNeed){if(_=this.fillLast(y),_===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<y.length?_?_+this.text(y,A):this.text(y,A):_||""},n.prototype.end=f,n.prototype.text=c,n.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function i(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function a(y,_,A){var v=_.length-1;if(v<A)return 0;var C=i(_[v]);return C>=0?(C>0&&(y.lastNeed=C-1),C):--v<A||C===-2?0:(C=i(_[v]),C>=0?(C>0&&(y.lastNeed=C-2),C):--v<A||C===-2?0:(C=i(_[v]),C>=0?(C>0&&(C===2?C=0:y.lastNeed=C-3),C):0))}function o(y,_,A){if((_[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return y.lastNeed=2,""}}function u(y){var _=this.lastTotal-this.lastNeed,A=o(this,y);if(A!==void 0)return A;if(this.lastNeed<=y.length)return y.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,_,0,y.length),this.lastNeed-=y.length}function c(y,_){var A=a(this,y,_);if(!this.lastNeed)return y.toString("utf8",_);this.lastTotal=A;var v=y.length-(A-this.lastNeed);return y.copy(this.lastChar,0,v),y.toString("utf8",_,v)}function f(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+"":_}function p(y,_){if((y.length-_)%2===0){var A=y.toString("utf16le",_);if(A){var v=A.charCodeAt(A.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",_,y.length-1)}function g(y){var _=y&&y.length?this.write(y):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,A)}return _}function b(y,_){var A=(y.length-_)%3;return A===0?y.toString("base64",_):(this.lastNeed=3-A,this.lastTotal=3,A===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",_,y.length-A))}function S(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function w(y){return y.toString(this.encoding)}function x(y){return y&&y.length?this.write(y):""}}),hu=be((t,e)=>{fe(),de(),pe();var r=cr(),{PromisePrototypeThen:s,SymbolAsyncIterator:l,SymbolIterator:n}=He(),{Buffer:i}=(et(),De(Ze)),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:o}=st().codes;function u(c,f,p){let g;if(typeof f=="string"||f instanceof i)return new c({objectMode:!0,...p,read(){this.push(f),this.push(null)}});let b;if(f&&f[l])b=!0,g=f[l]();else if(f&&f[n])b=!1,g=f[n]();else throw new a("iterable",["Iterable"],f);let S=new c({objectMode:!0,highWaterMark:1,...p}),w=!1;S._read=function(){w||(w=!0,y())},S._destroy=function(_,A){s(x(_),()=>r.nextTick(A,_),v=>r.nextTick(A,v||_))};async function x(_){let A=_!=null,v=typeof g.throw=="function";if(A&&v){let{value:C,done:O}=await g.throw(_);if(await C,O)return}if(typeof g.return=="function"){let{value:C}=await g.return();await C}}async function y(){for(;;){try{let{value:_,done:A}=b?await g.next():g.next();if(A)S.push(null);else{let v=_&&typeof _.then=="function"?await _:_;if(v===null)throw w=!1,new o;if(S.push(v))continue;w=!1}}catch(_){S.destroy(_)}break}}return S}e.exports=u}),ei=be((t,e)=>{fe(),de(),pe();var r=cr(),{ArrayPrototypeIndexOf:s,NumberIsInteger:l,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:a,ObjectKeys:o,ObjectSetPrototypeOf:u,Promise:c,SafeSet:f,SymbolAsyncDispose:p,SymbolAsyncIterator:g,Symbol:b}=He();e.exports=he,he.ReadableState=Ee;var{EventEmitter:S}=(ur(),De(Kt)),{Stream:w,prependListener:x}=Cs(),{Buffer:y}=(et(),De(Ze)),{addAbortSignal:_}=Xn(),A=Gt(),v=at().debuglog("stream",M=>{v=M}),C=Wh(),O=Ar(),{getHighWaterMark:I,getDefaultHighWaterMark:T}=Zn(),{aggregateTwoErrors:k,codes:{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_OUT_OF_RANGE:j,ERR_STREAM_PUSH_AFTER_EOF:U,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:N},AbortError:ae}=st(),{validateObject:te}=rn(),$=b("kPaused"),{StringDecoder:ie}=qh(),H=hu();u(he.prototype,w.prototype),u(he,w);var ne=()=>{},{errorOrDestroy:R}=O,K=1,le=2,q=4,_e=8,J=16,B=32,oe=64,G=128,Q=256,Z=512,ge=1024,ce=2048,D=4096,X=8192,ue=16384,me=32768,ye=65536,we=1<<17,re=1<<18;function ve(M){return{enumerable:!1,get(){return(this.state&M)!==0},set(F){F?this.state|=M:this.state&=~M}}}a(Ee.prototype,{objectMode:ve(K),ended:ve(le),endEmitted:ve(q),reading:ve(_e),constructed:ve(J),sync:ve(B),needReadable:ve(oe),emittedReadable:ve(G),readableListening:ve(Q),resumeScheduled:ve(Z),errorEmitted:ve(ge),emitClose:ve(ce),autoDestroy:ve(D),destroyed:ve(X),closed:ve(ue),closeEmitted:ve(me),multiAwaitDrain:ve(ye),readingMore:ve(we),dataEmitted:ve(re)});function Ee(M,F,Se){typeof Se!="boolean"&&(Se=F instanceof kt()),this.state=ce|D|J|B,M&&M.objectMode&&(this.state|=K),Se&&M&&M.readableObjectMode&&(this.state|=K),this.highWaterMark=M?I(this,M,"readableHighWaterMark",Se):T(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[$]=null,M&&M.emitClose===!1&&(this.state&=~ce),M&&M.autoDestroy===!1&&(this.state&=~D),this.errored=null,this.defaultEncoding=M&&M.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,M&&M.encoding&&(this.decoder=new ie(M.encoding),this.encoding=M.encoding)}function he(M){if(!(this instanceof he))return new he(M);let F=this instanceof kt();this._readableState=new Ee(M,this,F),M&&(typeof M.read=="function"&&(this._read=M.read),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.construct=="function"&&(this._construct=M.construct),M.signal&&!F&&_(M.signal,this)),w.call(this,M),O.construct(this,()=>{this._readableState.needReadable&&V(this,this._readableState)})}he.prototype.destroy=O.destroy,he.prototype._undestroy=O.undestroy,he.prototype._destroy=function(M,F){F(M)},he.prototype[S.captureRejectionSymbol]=function(M){this.destroy(M)},he.prototype[p]=function(){let M;return this.destroyed||(M=this.readableEnded?null:new ae,this.destroy(M)),new c((F,Se)=>A(this,Ie=>Ie&&Ie!==M?Se(Ie):F(null)))},he.prototype.push=function(M,F){return Me(this,M,F,!1)},he.prototype.unshift=function(M,F){return Me(this,M,F,!0)};function Me(M,F,Se,Ie){v("readableAddChunk",F);let Te=M._readableState,Je;if(!(Te.state&K)&&(typeof F=="string"?(Se=Se||Te.defaultEncoding,Te.encoding!==Se&&(Ie&&Te.encoding?F=y.from(F,Se).toString(Te.encoding):(F=y.from(F,Se),Se=""))):F instanceof y?Se="":w._isUint8Array(F)?(F=w._uint8ArrayToBuffer(F),Se=""):F!=null&&(Je=new z("chunk",["string","Buffer","Uint8Array"],F))),Je)R(M,Je);else if(F===null)Te.state&=~_e,L(M,Te);else if(Te.state&K||F&&F.length>0)if(Ie)if(Te.state&q)R(M,new N);else{if(Te.destroyed||Te.errored)return!1;h(M,Te,F,!0)}else if(Te.ended)R(M,new U);else{if(Te.destroyed||Te.errored)return!1;Te.state&=~_e,Te.decoder&&!Se?(F=Te.decoder.write(F),Te.objectMode||F.length!==0?h(M,Te,F,!1):V(M,Te)):h(M,Te,F,!1)}else Ie||(Te.state&=~_e,V(M,Te));return!Te.ended&&(Te.length<Te.highWaterMark||Te.length===0)}function h(M,F,Se,Ie){F.flowing&&F.length===0&&!F.sync&&M.listenerCount("data")>0?(F.state&ye?F.awaitDrainWriters.clear():F.awaitDrainWriters=null,F.dataEmitted=!0,M.emit("data",Se)):(F.length+=F.objectMode?1:Se.length,Ie?F.buffer.unshift(Se):F.buffer.push(Se),F.state&oe&&Y(M)),V(M,F)}he.prototype.isPaused=function(){let M=this._readableState;return M[$]===!0||M.flowing===!1},he.prototype.setEncoding=function(M){let F=new ie(M);this._readableState.decoder=F,this._readableState.encoding=this._readableState.decoder.encoding;let Se=this._readableState.buffer,Ie="";for(let Te of Se)Ie+=F.write(Te);return Se.clear(),Ie!==""&&Se.push(Ie),this._readableState.length=Ie.length,this};var d=1073741824;function m(M){if(M>d)throw new j("size","<= 1GiB",M);return M--,M|=M>>>1,M|=M>>>2,M|=M>>>4,M|=M>>>8,M|=M>>>16,M++,M}function P(M,F){return M<=0||F.length===0&&F.ended?0:F.state&K?1:n(M)?F.flowing&&F.length?F.buffer.first().length:F.length:M<=F.length?M:F.ended?F.length:0}he.prototype.read=function(M){v("read",M),M===void 0?M=NaN:l(M)||(M=i(M,10));let F=this._readableState,Se=M;if(M>F.highWaterMark&&(F.highWaterMark=m(M)),M!==0&&(F.state&=~G),M===0&&F.needReadable&&((F.highWaterMark!==0?F.length>=F.highWaterMark:F.length>0)||F.ended))return v("read: emitReadable",F.length,F.ended),F.length===0&&F.ended?Be(this):Y(this),null;if(M=P(M,F),M===0&&F.ended)return F.length===0&&Be(this),null;let Ie=(F.state&oe)!==0;if(v("need readable",Ie),(F.length===0||F.length-M<F.highWaterMark)&&(Ie=!0,v("length less than watermark",Ie)),F.ended||F.reading||F.destroyed||F.errored||!F.constructed)Ie=!1,v("reading, ended or constructing",Ie);else if(Ie){v("do read"),F.state|=_e|B,F.length===0&&(F.state|=oe);try{this._read(F.highWaterMark)}catch(Je){R(this,Je)}F.state&=~B,F.reading||(M=P(Se,F))}let Te;return M>0?Te=Ce(M,F):Te=null,Te===null?(F.needReadable=F.length<=F.highWaterMark,M=0):(F.length-=M,F.multiAwaitDrain?F.awaitDrainWriters.clear():F.awaitDrainWriters=null),F.length===0&&(F.ended||(F.needReadable=!0),Se!==M&&F.ended&&Be(this)),Te!==null&&!F.errorEmitted&&!F.closeEmitted&&(F.dataEmitted=!0,this.emit("data",Te)),Te};function L(M,F){if(v("onEofChunk"),!F.ended){if(F.decoder){let Se=F.decoder.end();Se&&Se.length&&(F.buffer.push(Se),F.length+=F.objectMode?1:Se.length)}F.ended=!0,F.sync?Y(M):(F.needReadable=!1,F.emittedReadable=!0,se(M))}}function Y(M){let F=M._readableState;v("emitReadable",F.needReadable,F.emittedReadable),F.needReadable=!1,F.emittedReadable||(v("emitReadable",F.flowing),F.emittedReadable=!0,r.nextTick(se,M))}function se(M){let F=M._readableState;v("emitReadable_",F.destroyed,F.length,F.ended),!F.destroyed&&!F.errored&&(F.length||F.ended)&&(M.emit("readable"),F.emittedReadable=!1),F.needReadable=!F.flowing&&!F.ended&&F.length<=F.highWaterMark,Ke(M)}function V(M,F){!F.readingMore&&F.constructed&&(F.readingMore=!0,r.nextTick(ee,M,F))}function ee(M,F){for(;!F.reading&&!F.ended&&(F.length<F.highWaterMark||F.flowing&&F.length===0);){let Se=F.length;if(v("maybeReadMore read 0"),M.read(0),Se===F.length)break}F.readingMore=!1}he.prototype._read=function(M){throw new E("_read()")},he.prototype.pipe=function(M,F){let Se=this,Ie=this._readableState;Ie.pipes.length===1&&(Ie.multiAwaitDrain||(Ie.multiAwaitDrain=!0,Ie.awaitDrainWriters=new f(Ie.awaitDrainWriters?[Ie.awaitDrainWriters]:[]))),Ie.pipes.push(M),v("pipe count=%d opts=%j",Ie.pipes.length,F);let Te=(!F||F.end!==!1)&&M!==r.stdout&&M!==r.stderr?ot:Qt;Ie.endEmitted?r.nextTick(Te):Se.once("end",Te),M.on("unpipe",Je);function Je(gt,vt){v("onunpipe"),gt===Se&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,Tr())}function ot(){v("onend"),M.end()}let pt,Pr=!1;function Tr(){v("cleanup"),M.removeListener("close",dt),M.removeListener("finish",Mt),pt&&M.removeListener("drain",pt),M.removeListener("error",Yt),M.removeListener("unpipe",Je),Se.removeListener("end",ot),Se.removeListener("end",Qt),Se.removeListener("data",on),Pr=!0,pt&&Ie.awaitDrainWriters&&(!M._writableState||M._writableState.needDrain)&&pt()}function Or(){Pr||(Ie.pipes.length===1&&Ie.pipes[0]===M?(v("false write response, pause",0),Ie.awaitDrainWriters=M,Ie.multiAwaitDrain=!1):Ie.pipes.length>1&&Ie.pipes.includes(M)&&(v("false write response, pause",Ie.awaitDrainWriters.size),Ie.awaitDrainWriters.add(M)),Se.pause()),pt||(pt=Ae(Se,M),M.on("drain",pt))}Se.on("data",on);function on(gt){v("ondata");let vt=M.write(gt);v("dest.write",vt),vt===!1&&Or()}function Yt(gt){if(v("onerror",gt),Qt(),M.removeListener("error",Yt),M.listenerCount("error")===0){let vt=M._writableState||M._readableState;vt&&!vt.errorEmitted?R(M,gt):M.emit("error",gt)}}x(M,"error",Yt);function dt(){M.removeListener("finish",Mt),Qt()}M.once("close",dt);function Mt(){v("onfinish"),M.removeListener("close",dt),Qt()}M.once("finish",Mt);function Qt(){v("unpipe"),Se.unpipe(M)}return M.emit("pipe",Se),M.writableNeedDrain===!0?Or():Ie.flowing||(v("pipe resume"),Se.resume()),M};function Ae(M,F){return function(){let Se=M._readableState;Se.awaitDrainWriters===F?(v("pipeOnDrain",1),Se.awaitDrainWriters=null):Se.multiAwaitDrain&&(v("pipeOnDrain",Se.awaitDrainWriters.size),Se.awaitDrainWriters.delete(F)),(!Se.awaitDrainWriters||Se.awaitDrainWriters.size===0)&&M.listenerCount("data")&&M.resume()}}he.prototype.unpipe=function(M){let F=this._readableState,Se={hasUnpiped:!1};if(F.pipes.length===0)return this;if(!M){let Te=F.pipes;F.pipes=[],this.pause();for(let Je=0;Je<Te.length;Je++)Te[Je].emit("unpipe",this,{hasUnpiped:!1});return this}let Ie=s(F.pipes,M);return Ie===-1?this:(F.pipes.splice(Ie,1),F.pipes.length===0&&this.pause(),M.emit("unpipe",this,Se),this)},he.prototype.on=function(M,F){let Se=w.prototype.on.call(this,M,F),Ie=this._readableState;return M==="data"?(Ie.readableListening=this.listenerCount("readable")>0,Ie.flowing!==!1&&this.resume()):M==="readable"&&!Ie.endEmitted&&!Ie.readableListening&&(Ie.readableListening=Ie.needReadable=!0,Ie.flowing=!1,Ie.emittedReadable=!1,v("on readable",Ie.length,Ie.reading),Ie.length?Y(this):Ie.reading||r.nextTick(Pe,this)),Se},he.prototype.addListener=he.prototype.on,he.prototype.removeListener=function(M,F){let Se=w.prototype.removeListener.call(this,M,F);return M==="readable"&&r.nextTick(ke,this),Se},he.prototype.off=he.prototype.removeListener,he.prototype.removeAllListeners=function(M){let F=w.prototype.removeAllListeners.apply(this,arguments);return(M==="readable"||M===void 0)&&r.nextTick(ke,this),F};function ke(M){let F=M._readableState;F.readableListening=M.listenerCount("readable")>0,F.resumeScheduled&&F[$]===!1?F.flowing=!0:M.listenerCount("data")>0?M.resume():F.readableListening||(F.flowing=null)}function Pe(M){v("readable nexttick read 0"),M.read(0)}he.prototype.resume=function(){let M=this._readableState;return M.flowing||(v("resume"),M.flowing=!M.readableListening,je(this,M)),M[$]=!1,this};function je(M,F){F.resumeScheduled||(F.resumeScheduled=!0,r.nextTick(qe,M,F))}function qe(M,F){v("resume",F.reading),F.reading||M.read(0),F.resumeScheduled=!1,M.emit("resume"),Ke(M),F.flowing&&!F.reading&&M.read(0)}he.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[$]=!0,this};function Ke(M){let F=M._readableState;for(v("flow",F.flowing);F.flowing&&M.read()!==null;);}he.prototype.wrap=function(M){let F=!1;M.on("data",Ie=>{!this.push(Ie)&&M.pause&&(F=!0,M.pause())}),M.on("end",()=>{this.push(null)}),M.on("error",Ie=>{R(this,Ie)}),M.on("close",()=>{this.destroy()}),M.on("destroy",()=>{this.destroy()}),this._read=()=>{F&&M.resume&&(F=!1,M.resume())};let Se=o(M);for(let Ie=1;Ie<Se.length;Ie++){let Te=Se[Ie];this[Te]===void 0&&typeof M[Te]=="function"&&(this[Te]=M[Te].bind(M))}return this},he.prototype[g]=function(){return Ne(this)},he.prototype.iterator=function(M){return M!==void 0&&te(M,"options"),Ne(this,M)};function Ne(M,F){typeof M.read!="function"&&(M=he.wrap(M,{objectMode:!0}));let Se=Fe(M,F);return Se.stream=M,Se}async function*Fe(M,F){let Se=ne;function Ie(ot){this===M?(Se(),Se=ne):Se=ot}M.on("readable",Ie);let Te,Je=A(M,{writable:!1},ot=>{Te=ot?k(Te,ot):null,Se(),Se=ne});try{for(;;){let ot=M.destroyed?null:M.read();if(ot!==null)yield ot;else{if(Te)throw Te;if(Te===null)return;await new c(Ie)}}}catch(ot){throw Te=k(Te,ot),Te}finally{(Te||(F==null?void 0:F.destroyOnReturn)!==!1)&&(Te===void 0||M._readableState.autoDestroy)?O.destroyer(M,null):(M.off("readable",Ie),Je())}}a(he.prototype,{readable:{__proto__:null,get(){let M=this._readableState;return!!M&&M.readable!==!1&&!M.destroyed&&!M.errorEmitted&&!M.endEmitted},set(M){this._readableState&&(this._readableState.readable=!!M)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(M){this._readableState&&(this._readableState.flowing=M)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(M){this._readableState&&(this._readableState.destroyed=M)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(Ee.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[$]!==!1},set(M){this[$]=!!M}}}),he._fromList=Ce;function Ce(M,F){if(F.length===0)return null;let Se;return F.objectMode?Se=F.buffer.shift():!M||M>=F.length?(F.decoder?Se=F.buffer.join(""):F.buffer.length===1?Se=F.buffer.first():Se=F.buffer.concat(F.length),F.buffer.clear()):Se=F.buffer.consume(M,F.decoder),Se}function Be(M){let F=M._readableState;v("endReadable",F.endEmitted),F.endEmitted||(F.ended=!0,r.nextTick($e,F,M))}function $e(M,F){if(v("endReadableNT",M.endEmitted,M.length),!M.errored&&!M.closeEmitted&&!M.endEmitted&&M.length===0){if(M.endEmitted=!0,F.emit("end"),F.writable&&F.allowHalfOpen===!1)r.nextTick(Ve,F);else if(M.autoDestroy){let Se=F._writableState;(!Se||Se.autoDestroy&&(Se.finished||Se.writable===!1))&&F.destroy()}}}function Ve(M){M.writable&&!M.writableEnded&&!M.destroyed&&M.end()}he.from=function(M,F){return H(he,M,F)};var Xe;function ft(){return Xe===void 0&&(Xe={}),Xe}he.fromWeb=function(M,F){return ft().newStreamReadableFromReadableStream(M,F)},he.toWeb=function(M,F){return ft().newReadableStreamFromStreamReadable(M,F)},he.wrap=function(M,F){var Se,Ie;return new he({objectMode:(Se=(Ie=M.readableObjectMode)!==null&&Ie!==void 0?Ie:M.objectMode)!==null&&Se!==void 0?Se:!0,...F,destroy(Te,Je){O.destroyer(M,Te),Je(Te)}}).wrap(M)}}),Rs=be((t,e)=>{fe(),de(),pe();var r=cr(),{ArrayPrototypeSlice:s,Error:l,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:a,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:u,Symbol:c,SymbolHasInstance:f}=He();e.exports=te,te.WritableState=N;var{EventEmitter:p}=(ur(),De(Kt)),g=Cs().Stream,{Buffer:b}=(et(),De(Ze)),S=Ar(),{addAbortSignal:w}=Xn(),{getHighWaterMark:x,getDefaultHighWaterMark:y}=Zn(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:O,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:k,ERR_UNKNOWN_ENCODING:z}=st().codes,{errorOrDestroy:E}=S;o(te.prototype,g.prototype),o(te,g);function j(){}var U=c("kOnFinished");function N(D,X,ue){typeof ue!="boolean"&&(ue=X instanceof kt()),this.objectMode=!!(D&&D.objectMode),ue&&(this.objectMode=this.objectMode||!!(D&&D.writableObjectMode)),this.highWaterMark=D?x(this,D,"writableHighWaterMark",ue):y(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let me=!!(D&&D.decodeStrings===!1);this.decodeStrings=!me,this.defaultEncoding=D&&D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=R.bind(void 0,X),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ae(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!D||D.emitClose!==!1,this.autoDestroy=!D||D.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[U]=[]}function ae(D){D.buffered=[],D.bufferedIndex=0,D.allBuffers=!0,D.allNoop=!0}N.prototype.getBuffer=function(){return s(this.buffered,this.bufferedIndex)},i(N.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function te(D){let X=this instanceof kt();if(!X&&!n(te,this))return new te(D);this._writableState=new N(D,this,X),D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final),typeof D.construct=="function"&&(this._construct=D.construct),D.signal&&w(D.signal,this)),g.call(this,D),S.construct(this,()=>{let ue=this._writableState;ue.writing||_e(this,ue),G(this,ue)})}i(te,f,{__proto__:null,value:function(D){return n(this,D)?!0:this!==te?!1:D&&D._writableState instanceof N}}),te.prototype.pipe=function(){E(this,new C)};function $(D,X,ue,me){let ye=D._writableState;if(typeof ue=="function")me=ue,ue=ye.defaultEncoding;else{if(!ue)ue=ye.defaultEncoding;else if(ue!=="buffer"&&!b.isEncoding(ue))throw new z(ue);typeof me!="function"&&(me=j)}if(X===null)throw new T;if(!ye.objectMode)if(typeof X=="string")ye.decodeStrings!==!1&&(X=b.from(X,ue),ue="buffer");else if(X instanceof b)ue="buffer";else if(g._isUint8Array(X))X=g._uint8ArrayToBuffer(X),ue="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],X);let we;return ye.ending?we=new k:ye.destroyed&&(we=new O("write")),we?(r.nextTick(me,we),E(D,we,!0),we):(ye.pendingcb++,ie(D,ye,X,ue,me))}te.prototype.write=function(D,X,ue){return $(this,D,X,ue)===!0},te.prototype.cork=function(){this._writableState.corked++},te.prototype.uncork=function(){let D=this._writableState;D.corked&&(D.corked--,D.writing||_e(this,D))},te.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=u(D)),!b.isEncoding(D))throw new z(D);return this._writableState.defaultEncoding=D,this};function ie(D,X,ue,me,ye){let we=X.objectMode?1:ue.length;X.length+=we;let re=X.length<X.highWaterMark;return re||(X.needDrain=!0),X.writing||X.corked||X.errored||!X.constructed?(X.buffered.push({chunk:ue,encoding:me,callback:ye}),X.allBuffers&&me!=="buffer"&&(X.allBuffers=!1),X.allNoop&&ye!==j&&(X.allNoop=!1)):(X.writelen=we,X.writecb=ye,X.writing=!0,X.sync=!0,D._write(ue,me,X.onwrite),X.sync=!1),re&&!X.errored&&!X.destroyed}function H(D,X,ue,me,ye,we,re){X.writelen=me,X.writecb=re,X.writing=!0,X.sync=!0,X.destroyed?X.onwrite(new O("write")):ue?D._writev(ye,X.onwrite):D._write(ye,we,X.onwrite),X.sync=!1}function ne(D,X,ue,me){--X.pendingcb,me(ue),q(X),E(D,ue)}function R(D,X){let ue=D._writableState,me=ue.sync,ye=ue.writecb;if(typeof ye!="function"){E(D,new v);return}ue.writing=!1,ue.writecb=null,ue.length-=ue.writelen,ue.writelen=0,X?(X.stack,ue.errored||(ue.errored=X),D._readableState&&!D._readableState.errored&&(D._readableState.errored=X),me?r.nextTick(ne,D,ue,X,ye):ne(D,ue,X,ye)):(ue.buffered.length>ue.bufferedIndex&&_e(D,ue),me?ue.afterWriteTickInfo!==null&&ue.afterWriteTickInfo.cb===ye?ue.afterWriteTickInfo.count++:(ue.afterWriteTickInfo={count:1,cb:ye,stream:D,state:ue},r.nextTick(K,ue.afterWriteTickInfo)):le(D,ue,1,ye))}function K({stream:D,state:X,count:ue,cb:me}){return X.afterWriteTickInfo=null,le(D,X,ue,me)}function le(D,X,ue,me){for(!X.ending&&!D.destroyed&&X.length===0&&X.needDrain&&(X.needDrain=!1,D.emit("drain"));ue-- >0;)X.pendingcb--,me();X.destroyed&&q(X),G(D,X)}function q(D){if(D.writing)return;for(let ye=D.bufferedIndex;ye<D.buffered.length;++ye){var X;let{chunk:we,callback:re}=D.buffered[ye],ve=D.objectMode?1:we.length;D.length-=ve,re((X=D.errored)!==null&&X!==void 0?X:new O("write"))}let ue=D[U].splice(0);for(let ye=0;ye<ue.length;ye++){var me;ue[ye]((me=D.errored)!==null&&me!==void 0?me:new O("end"))}ae(D)}function _e(D,X){if(X.corked||X.bufferProcessing||X.destroyed||!X.constructed)return;let{buffered:ue,bufferedIndex:me,objectMode:ye}=X,we=ue.length-me;if(!we)return;let re=me;if(X.bufferProcessing=!0,we>1&&D._writev){X.pendingcb-=we-1;let ve=X.allNoop?j:he=>{for(let Me=re;Me<ue.length;++Me)ue[Me].callback(he)},Ee=X.allNoop&&re===0?ue:s(ue,re);Ee.allBuffers=X.allBuffers,H(D,X,!0,X.length,Ee,"",ve),ae(X)}else{do{let{chunk:ve,encoding:Ee,callback:he}=ue[re];ue[re++]=null;let Me=ye?1:ve.length;H(D,X,!1,Me,ve,Ee,he)}while(re<ue.length&&!X.writing);re===ue.length?ae(X):re>256?(ue.splice(0,re),X.bufferedIndex=0):X.bufferedIndex=re}X.bufferProcessing=!1}te.prototype._write=function(D,X,ue){if(this._writev)this._writev([{chunk:D,encoding:X}],ue);else throw new A("_write()")},te.prototype._writev=null,te.prototype.end=function(D,X,ue){let me=this._writableState;typeof D=="function"?(ue=D,D=null,X=null):typeof X=="function"&&(ue=X,X=null);let ye;if(D!=null){let we=$(this,D,X);we instanceof l&&(ye=we)}return me.corked&&(me.corked=1,this.uncork()),ye||(!me.errored&&!me.ending?(me.ending=!0,G(this,me,!0),me.ended=!0):me.finished?ye=new I("end"):me.destroyed&&(ye=new O("end"))),typeof ue=="function"&&(ye||me.finished?r.nextTick(ue,ye):me[U].push(ue)),this};function J(D){return D.ending&&!D.destroyed&&D.constructed&&D.length===0&&!D.errored&&D.buffered.length===0&&!D.finished&&!D.writing&&!D.errorEmitted&&!D.closeEmitted}function B(D,X){let ue=!1;function me(ye){if(ue){E(D,ye??v());return}if(ue=!0,X.pendingcb--,ye){let we=X[U].splice(0);for(let re=0;re<we.length;re++)we[re](ye);E(D,ye,X.sync)}else J(X)&&(X.prefinished=!0,D.emit("prefinish"),X.pendingcb++,r.nextTick(Q,D,X))}X.sync=!0,X.pendingcb++;try{D._final(me)}catch(ye){me(ye)}X.sync=!1}function oe(D,X){!X.prefinished&&!X.finalCalled&&(typeof D._final=="function"&&!X.destroyed?(X.finalCalled=!0,B(D,X)):(X.prefinished=!0,D.emit("prefinish")))}function G(D,X,ue){J(X)&&(oe(D,X),X.pendingcb===0&&(ue?(X.pendingcb++,r.nextTick((me,ye)=>{J(ye)?Q(me,ye):ye.pendingcb--},D,X)):J(X)&&(X.pendingcb++,Q(D,X))))}function Q(D,X){X.pendingcb--,X.finished=!0;let ue=X[U].splice(0);for(let me=0;me<ue.length;me++)ue[me]();if(D.emit("finish"),X.autoDestroy){let me=D._readableState;(!me||me.autoDestroy&&(me.endEmitted||me.readable===!1))&&D.destroy()}}a(te.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(D){this._writableState&&(this._writableState.destroyed=D)}},writable:{__proto__:null,get(){let D=this._writableState;return!!D&&D.writable!==!1&&!D.destroyed&&!D.errored&&!D.ending&&!D.ended},set(D){this._writableState&&(this._writableState.writable=!!D)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let D=this._writableState;return D?!D.destroyed&&!D.ending&&D.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Z=S.destroy;te.prototype.destroy=function(D,X){let ue=this._writableState;return!ue.destroyed&&(ue.bufferedIndex<ue.buffered.length||ue[U].length)&&r.nextTick(q,ue),Z.call(this,D,X),this},te.prototype._undestroy=S.undestroy,te.prototype._destroy=function(D,X){X(D)},te.prototype[p.captureRejectionSymbol]=function(D){this.destroy(D)};var ge;function ce(){return ge===void 0&&(ge={}),ge}te.fromWeb=function(D,X){return ce().newStreamWritableFromWritableStream(D,X)},te.toWeb=function(D){return ce().newWritableStreamFromStreamWritable(D)}}),Hh=be((t,e)=>{fe(),de(),pe();var r=cr(),s=(et(),De(Ze)),{isReadable:l,isWritable:n,isIterable:i,isNodeStream:a,isReadableNodeStream:o,isWritableNodeStream:u,isDuplexNodeStream:c,isReadableStream:f,isWritableStream:p}=Ot(),g=Gt(),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:S,ERR_INVALID_RETURN_VALUE:w}}=st(),{destroyer:x}=Ar(),y=kt(),_=ei(),A=Rs(),{createDeferredPromise:v}=at(),C=hu(),O=globalThis.Blob||s.Blob,I=typeof O<"u"?function(U){return U instanceof O}:function(U){return!1},T=globalThis.AbortController||en().AbortController,{FunctionPrototypeCall:k}=He(),z=class extends y{constructor(U){super(U),(U==null?void 0:U.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(U==null?void 0:U.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function U(N,ae){if(c(N))return N;if(o(N))return j({readable:N});if(u(N))return j({writable:N});if(a(N))return j({writable:!1,readable:!1});if(f(N))return j({readable:_.fromWeb(N)});if(p(N))return j({writable:A.fromWeb(N)});if(typeof N=="function"){let{value:$,write:ie,final:H,destroy:ne}=E(N);if(i($))return C(z,$,{objectMode:!0,write:ie,final:H,destroy:ne});let R=$==null?void 0:$.then;if(typeof R=="function"){let K,le=k(R,$,q=>{if(q!=null)throw new w("nully","body",q)},q=>{x(K,q)});return K=new z({objectMode:!0,readable:!1,write:ie,final(q){H(async()=>{try{await le,r.nextTick(q,null)}catch(_e){r.nextTick(q,_e)}})},destroy:ne})}throw new w("Iterable, AsyncIterable or AsyncFunction",ae,$)}if(I(N))return U(N.arrayBuffer());if(i(N))return C(z,N,{objectMode:!0,writable:!1});if(f(N==null?void 0:N.readable)&&p(N==null?void 0:N.writable))return z.fromWeb(N);if(typeof(N==null?void 0:N.writable)=="object"||typeof(N==null?void 0:N.readable)=="object"){let $=N!=null&&N.readable?o(N==null?void 0:N.readable)?N==null?void 0:N.readable:U(N.readable):void 0,ie=N!=null&&N.writable?u(N==null?void 0:N.writable)?N==null?void 0:N.writable:U(N.writable):void 0;return j({readable:$,writable:ie})}let te=N==null?void 0:N.then;if(typeof te=="function"){let $;return k(te,N,ie=>{ie!=null&&$.push(ie),$.push(null)},ie=>{x($,ie)}),$=new z({objectMode:!0,writable:!1,read(){}})}throw new S(ae,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],N)};function E(U){let{promise:N,resolve:ae}=v(),te=new T,$=te.signal;return{value:U(async function*(){for(;;){let ie=N;N=null;let{chunk:H,done:ne,cb:R}=await ie;if(r.nextTick(R),ne)return;if($.aborted)throw new b(void 0,{cause:$.reason});({promise:N,resolve:ae}=v()),yield H}}(),{signal:$}),write(ie,H,ne){let R=ae;ae=null,R({chunk:ie,done:!1,cb:ne})},final(ie){let H=ae;ae=null,H({done:!0,cb:ie})},destroy(ie,H){te.abort(),H(ie)}}}function j(U){let N=U.readable&&typeof U.readable.read!="function"?_.wrap(U.readable):U.readable,ae=U.writable,te=!!l(N),$=!!n(ae),ie,H,ne,R,K;function le(q){let _e=R;R=null,_e?_e(q):q&&K.destroy(q)}return K=new z({readableObjectMode:!!(N!=null&&N.readableObjectMode),writableObjectMode:!!(ae!=null&&ae.writableObjectMode),readable:te,writable:$}),$&&(g(ae,q=>{$=!1,q&&x(N,q),le(q)}),K._write=function(q,_e,J){ae.write(q,_e)?J():ie=J},K._final=function(q){ae.end(),H=q},ae.on("drain",function(){if(ie){let q=ie;ie=null,q()}}),ae.on("finish",function(){if(H){let q=H;H=null,q()}})),te&&(g(N,q=>{te=!1,q&&x(N,q),le(q)}),N.on("readable",function(){if(ne){let q=ne;ne=null,q()}}),N.on("end",function(){K.push(null)}),K._read=function(){for(;;){let q=N.read();if(q===null){ne=K._read;return}if(!K.push(q))return}}),K._destroy=function(q,_e){!q&&R!==null&&(q=new b),ne=null,ie=null,H=null,R===null?_e(q):(R=_e,x(ae,q),x(N,q))},K}}),kt=be((t,e)=>{fe(),de(),pe();var{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:s,ObjectKeys:l,ObjectSetPrototypeOf:n}=He();e.exports=o;var i=ei(),a=Rs();n(o.prototype,i.prototype),n(o,i);{let p=l(a.prototype);for(let g=0;g<p.length;g++){let b=p[g];o.prototype[b]||(o.prototype[b]=a.prototype[b])}}function o(p){if(!(this instanceof o))return new o(p);i.call(this,p),a.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(o.prototype,{writable:{__proto__:null,...s(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...s(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...s(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...s(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...s(a.prototype,"writableLength")},writableFinished:{__proto__:null,...s(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...s(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...s(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...s(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var u;function c(){return u===void 0&&(u={}),u}o.fromWeb=function(p,g){return c().newStreamDuplexFromReadableWritablePair(p,g)},o.toWeb=function(p){return c().newReadableWritablePairFromDuplex(p)};var f;o.from=function(p){return f||(f=Hh()),f(p,"body")}}),fu=be((t,e)=>{fe(),de(),pe();var{ObjectSetPrototypeOf:r,Symbol:s}=He();e.exports=o;var{ERR_METHOD_NOT_IMPLEMENTED:l}=st().codes,n=kt(),{getHighWaterMark:i}=Zn();r(o.prototype,n.prototype),r(o,n);var a=s("kCallback");function o(f){if(!(this instanceof o))return new o(f);let p=f?i(this,f,"readableHighWaterMark",!0):null;p===0&&(f={...f,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:f.writableHighWaterMark||0}),n.call(this,f),this._readableState.sync=!1,this[a]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",c)}function u(f){typeof this._flush=="function"&&!this.destroyed?this._flush((p,g)=>{if(p){f?f(p):this.destroy(p);return}g!=null&&this.push(g),this.push(null),f&&f()}):(this.push(null),f&&f())}function c(){this._final!==u&&u.call(this)}o.prototype._final=u,o.prototype._transform=function(f,p,g){throw new l("_transform()")},o.prototype._write=function(f,p,g){let b=this._readableState,S=this._writableState,w=b.length;this._transform(f,p,(x,y)=>{if(x){g(x);return}y!=null&&this.push(y),S.ended||w===b.length||b.length<b.highWaterMark?g():this[a]=g})},o.prototype._read=function(){if(this[a]){let f=this[a];this[a]=null,f()}}}),pu=be((t,e)=>{fe(),de(),pe();var{ObjectSetPrototypeOf:r}=He();e.exports=l;var s=fu();r(l.prototype,s.prototype),r(l,s);function l(n){if(!(this instanceof l))return new l(n);s.call(this,n)}l.prototype._transform=function(n,i,a){a(null,n)}}),Ms=be((t,e)=>{fe(),de(),pe();var r=cr(),{ArrayIsArray:s,Promise:l,SymbolAsyncIterator:n,SymbolDispose:i}=He(),a=Gt(),{once:o}=at(),u=Ar(),c=kt(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:S,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:x}=st(),{validateFunction:y,validateAbortSignal:_}=rn(),{isIterable:A,isReadable:v,isReadableNodeStream:C,isNodeStream:O,isTransformStream:I,isWebStream:T,isReadableStream:k,isReadableFinished:z}=Ot(),E=globalThis.AbortController||en().AbortController,j,U,N;function ae(q,_e,J){let B=!1;q.on("close",()=>{B=!0});let oe=a(q,{readable:_e,writable:J},G=>{B=!G});return{destroy:G=>{B||(B=!0,u.destroyer(q,G||new S("pipe")))},cleanup:oe}}function te(q){return y(q[q.length-1],"streams[stream.length - 1]"),q.pop()}function $(q){if(A(q))return q;if(C(q))return ie(q);throw new p("val",["Readable","Iterable","AsyncIterable"],q)}async function*ie(q){U||(U=ei()),yield*U.prototype[n].call(q)}async function H(q,_e,J,{end:B}){let oe,G=null,Q=ce=>{if(ce&&(oe=ce),G){let D=G;G=null,D()}},Z=()=>new l((ce,D)=>{oe?D(oe):G=()=>{oe?D(oe):ce()}});_e.on("drain",Q);let ge=a(_e,{readable:!1},Q);try{_e.writableNeedDrain&&await Z();for await(let ce of q)_e.write(ce)||await Z();B&&(_e.end(),await Z()),J()}catch(ce){J(oe!==ce?f(oe,ce):ce)}finally{ge(),_e.off("drain",Q)}}async function ne(q,_e,J,{end:B}){I(_e)&&(_e=_e.writable);let oe=_e.getWriter();try{for await(let G of q)await oe.ready,oe.write(G).catch(()=>{});await oe.ready,B&&await oe.close(),J()}catch(G){try{await oe.abort(G),J(G)}catch(Q){J(Q)}}}function R(...q){return K(q,o(te(q)))}function K(q,_e,J){if(q.length===1&&s(q[0])&&(q=q[0]),q.length<2)throw new b("streams");let B=new E,oe=B.signal,G=J==null?void 0:J.signal,Q=[];_(G,"options.signal");function Z(){ye(new x)}N=N||at().addAbortListener;let ge;G&&(ge=N(G,Z));let ce,D,X=[],ue=0;function me(Ee){ye(Ee,--ue===0)}function ye(Ee,he){var Me;if(Ee&&(!ce||ce.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ce=Ee),!(!ce&&!he)){for(;X.length;)X.shift()(ce);(Me=ge)===null||Me===void 0||Me[i](),B.abort(),he&&(ce||Q.forEach(h=>h()),r.nextTick(_e,ce,D))}}let we;for(let Ee=0;Ee<q.length;Ee++){let he=q[Ee],Me=Ee<q.length-1,h=Ee>0,d=Me||(J==null?void 0:J.end)!==!1,m=Ee===q.length-1;if(O(he)){let P=function(L){L&&L.name!=="AbortError"&&L.code!=="ERR_STREAM_PREMATURE_CLOSE"&&me(L)};if(d){let{destroy:L,cleanup:Y}=ae(he,Me,h);X.push(L),v(he)&&m&&Q.push(Y)}he.on("error",P),v(he)&&m&&Q.push(()=>{he.removeListener("error",P)})}if(Ee===0)if(typeof he=="function"){if(we=he({signal:oe}),!A(we))throw new g("Iterable, AsyncIterable or Stream","source",we)}else A(he)||C(he)||I(he)?we=he:we=c.from(he);else if(typeof he=="function"){if(I(we)){var re;we=$((re=we)===null||re===void 0?void 0:re.readable)}else we=$(we);if(we=he(we,{signal:oe}),Me){if(!A(we,!0))throw new g("AsyncIterable",`transform[${Ee-1}]`,we)}else{var ve;j||(j=pu());let P=new j({objectMode:!0}),L=(ve=we)===null||ve===void 0?void 0:ve.then;if(typeof L=="function")ue++,L.call(we,V=>{D=V,V!=null&&P.write(V),d&&P.end(),r.nextTick(me)},V=>{P.destroy(V),r.nextTick(me,V)});else if(A(we,!0))ue++,H(we,P,me,{end:d});else if(k(we)||I(we)){let V=we.readable||we;ue++,H(V,P,me,{end:d})}else throw new g("AsyncIterable or Promise","destination",we);we=P;let{destroy:Y,cleanup:se}=ae(we,!1,!0);X.push(Y),m&&Q.push(se)}}else if(O(he)){if(C(we)){ue+=2;let P=le(we,he,me,{end:d});v(he)&&m&&Q.push(P)}else if(I(we)||k(we)){let P=we.readable||we;ue++,H(P,he,me,{end:d})}else if(A(we))ue++,H(we,he,me,{end:d});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],we);we=he}else if(T(he)){if(C(we))ue++,ne($(we),he,me,{end:d});else if(k(we)||A(we))ue++,ne(we,he,me,{end:d});else if(I(we))ue++,ne(we.readable,he,me,{end:d});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],we);we=he}else we=c.from(he)}return(oe!=null&&oe.aborted||G!=null&&G.aborted)&&r.nextTick(Z),we}function le(q,_e,J,{end:B}){let oe=!1;if(_e.on("close",()=>{oe||J(new w)}),q.pipe(_e,{end:!1}),B){let G=function(){oe=!0,_e.end()};z(q)?r.nextTick(G):q.once("end",G)}else J();return a(q,{readable:!0,writable:!1},G=>{let Q=q._readableState;G&&G.code==="ERR_STREAM_PREMATURE_CLOSE"&&Q&&Q.ended&&!Q.errored&&!Q.errorEmitted?q.once("end",J).once("error",J):J(G)}),a(_e,{readable:!1,writable:!0},J)}e.exports={pipelineImpl:K,pipeline:R}}),du=be((t,e)=>{fe(),de(),pe();var{pipeline:r}=Ms(),s=kt(),{destroyer:l}=Ar(),{isNodeStream:n,isReadable:i,isWritable:a,isWebStream:o,isTransformStream:u,isWritableStream:c,isReadableStream:f}=Ot(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:b}}=st(),S=Gt();e.exports=function(...w){if(w.length===0)throw new b("streams");if(w.length===1)return s.from(w[0]);let x=[...w];if(typeof w[0]=="function"&&(w[0]=s.from(w[0])),typeof w[w.length-1]=="function"){let E=w.length-1;w[E]=s.from(w[E])}for(let E=0;E<w.length;++E)if(!(!n(w[E])&&!o(w[E]))){if(E<w.length-1&&!(i(w[E])||f(w[E])||u(w[E])))throw new g(`streams[${E}]`,x[E],"must be readable");if(E>0&&!(a(w[E])||c(w[E])||u(w[E])))throw new g(`streams[${E}]`,x[E],"must be writable")}let y,_,A,v,C;function O(E){let j=v;v=null,j?j(E):E?C.destroy(E):!z&&!k&&C.destroy()}let I=w[0],T=r(w,O),k=!!(a(I)||c(I)||u(I)),z=!!(i(T)||f(T)||u(T));if(C=new s({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(T!=null&&T.readableObjectMode),writable:k,readable:z}),k){if(n(I))C._write=function(j,U,N){I.write(j,U)?N():y=N},C._final=function(j){I.end(),_=j},I.on("drain",function(){if(y){let j=y;y=null,j()}});else if(o(I)){let j=(u(I)?I.writable:I).getWriter();C._write=async function(U,N,ae){try{await j.ready,j.write(U).catch(()=>{}),ae()}catch(te){ae(te)}},C._final=async function(U){try{await j.ready,j.close().catch(()=>{}),_=U}catch(N){U(N)}}}let E=u(T)?T.readable:T;S(E,()=>{if(_){let j=_;_=null,j()}})}if(z){if(n(T))T.on("readable",function(){if(A){let E=A;A=null,E()}}),T.on("end",function(){C.push(null)}),C._read=function(){for(;;){let E=T.read();if(E===null){A=C._read;return}if(!C.push(E))return}};else if(o(T)){let E=(u(T)?T.readable:T).getReader();C._read=async function(){for(;;)try{let{value:j,done:U}=await E.read();if(!C.push(j))return;if(U){C.push(null);return}}catch{return}}}}return C._destroy=function(E,j){!E&&v!==null&&(E=new p),A=null,y=null,_=null,v===null?j(E):(v=j,n(T)&&l(T,E))},C}}),Vh=be((t,e)=>{fe(),de(),pe();var r=globalThis.AbortController||en().AbortController,{codes:{ERR_INVALID_ARG_VALUE:s,ERR_INVALID_ARG_TYPE:l,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:i},AbortError:a}=st(),{validateAbortSignal:o,validateInteger:u,validateObject:c}=rn(),f=He().Symbol("kWeak"),p=He().Symbol("kResistStopPropagation"),{finished:g}=Gt(),b=du(),{addAbortSignalNoValidate:S}=Xn(),{isWritable:w,isNodeStream:x}=Ot(),{deprecate:y}=at(),{ArrayPrototypePush:_,Boolean:A,MathFloor:v,Number:C,NumberIsNaN:O,Promise:I,PromiseReject:T,PromiseResolve:k,PromisePrototypeThen:z,Symbol:E}=He(),j=E("kEmpty"),U=E("kEof");function N(G,Q){if(Q!=null&&c(Q,"options"),(Q==null?void 0:Q.signal)!=null&&o(Q.signal,"options.signal"),x(G)&&!w(G))throw new s("stream",G,"must be writable");let Z=b(this,G);return Q!=null&&Q.signal&&S(Q.signal,Z),Z}function ae(G,Q){if(typeof G!="function")throw new l("fn",["Function","AsyncFunction"],G);Q!=null&&c(Q,"options"),(Q==null?void 0:Q.signal)!=null&&o(Q.signal,"options.signal");let Z=1;(Q==null?void 0:Q.concurrency)!=null&&(Z=v(Q.concurrency));let ge=Z-1;return(Q==null?void 0:Q.highWaterMark)!=null&&(ge=v(Q.highWaterMark)),u(Z,"options.concurrency",1),u(ge,"options.highWaterMark",0),ge+=Z,(async function*(){let ce=at().AbortSignalAny([Q==null?void 0:Q.signal].filter(A)),D=this,X=[],ue={signal:ce},me,ye,we=!1,re=0;function ve(){we=!0,Ee()}function Ee(){re-=1,he()}function he(){ye&&!we&&re<Z&&X.length<ge&&(ye(),ye=null)}async function Me(){try{for await(let h of D){if(we)return;if(ce.aborted)throw new a;try{if(h=G(h,ue),h===j)continue;h=k(h)}catch(d){h=T(d)}re+=1,z(h,Ee,ve),X.push(h),me&&(me(),me=null),!we&&(X.length>=ge||re>=Z)&&await new I(d=>{ye=d})}X.push(U)}catch(h){let d=T(h);z(d,Ee,ve),X.push(d)}finally{we=!0,me&&(me(),me=null)}}Me();try{for(;;){for(;X.length>0;){let h=await X[0];if(h===U)return;if(ce.aborted)throw new a;h!==j&&(yield h),X.shift(),he()}await new I(h=>{me=h})}}finally{we=!0,ye&&(ye(),ye=null)}}).call(this)}function te(G=void 0){return G!=null&&c(G,"options"),(G==null?void 0:G.signal)!=null&&o(G.signal,"options.signal"),(async function*(){let Q=0;for await(let ge of this){var Z;if(G!=null&&(Z=G.signal)!==null&&Z!==void 0&&Z.aborted)throw new a({cause:G.signal.reason});yield[Q++,ge]}}).call(this)}async function $(G,Q=void 0){for await(let Z of R.call(this,G,Q))return!0;return!1}async function ie(G,Q=void 0){if(typeof G!="function")throw new l("fn",["Function","AsyncFunction"],G);return!await $.call(this,async(...Z)=>!await G(...Z),Q)}async function H(G,Q){for await(let Z of R.call(this,G,Q))return Z}async function ne(G,Q){if(typeof G!="function")throw new l("fn",["Function","AsyncFunction"],G);async function Z(ge,ce){return await G(ge,ce),j}for await(let ge of ae.call(this,Z,Q));}function R(G,Q){if(typeof G!="function")throw new l("fn",["Function","AsyncFunction"],G);async function Z(ge,ce){return await G(ge,ce)?ge:j}return ae.call(this,Z,Q)}var K=class extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function le(G,Q,Z){var ge;if(typeof G!="function")throw new l("reducer",["Function","AsyncFunction"],G);Z!=null&&c(Z,"options"),(Z==null?void 0:Z.signal)!=null&&o(Z.signal,"options.signal");let ce=arguments.length>1;if(Z!=null&&(ge=Z.signal)!==null&&ge!==void 0&&ge.aborted){let ye=new a(void 0,{cause:Z.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(ye)),ye}let D=new r,X=D.signal;if(Z!=null&&Z.signal){let ye={once:!0,[f]:this,[p]:!0};Z.signal.addEventListener("abort",()=>D.abort(),ye)}let ue=!1;try{for await(let ye of this){var me;if(ue=!0,Z!=null&&(me=Z.signal)!==null&&me!==void 0&&me.aborted)throw new a;ce?Q=await G(Q,ye,{signal:X}):(Q=ye,ce=!0)}if(!ue&&!ce)throw new K}finally{D.abort()}return Q}async function q(G){G!=null&&c(G,"options"),(G==null?void 0:G.signal)!=null&&o(G.signal,"options.signal");let Q=[];for await(let ge of this){var Z;if(G!=null&&(Z=G.signal)!==null&&Z!==void 0&&Z.aborted)throw new a(void 0,{cause:G.signal.reason});_(Q,ge)}return Q}function _e(G,Q){let Z=ae.call(this,G,Q);return(async function*(){for await(let ge of Z)yield*ge}).call(this)}function J(G){if(G=C(G),O(G))return 0;if(G<0)throw new i("number",">= 0",G);return G}function B(G,Q=void 0){return Q!=null&&c(Q,"options"),(Q==null?void 0:Q.signal)!=null&&o(Q.signal,"options.signal"),G=J(G),(async function*(){var Z;if(Q!=null&&(Z=Q.signal)!==null&&Z!==void 0&&Z.aborted)throw new a;for await(let ce of this){var ge;if(Q!=null&&(ge=Q.signal)!==null&&ge!==void 0&&ge.aborted)throw new a;G--<=0&&(yield ce)}}).call(this)}function oe(G,Q=void 0){return Q!=null&&c(Q,"options"),(Q==null?void 0:Q.signal)!=null&&o(Q.signal,"options.signal"),G=J(G),(async function*(){var Z;if(Q!=null&&(Z=Q.signal)!==null&&Z!==void 0&&Z.aborted)throw new a;for await(let ce of this){var ge;if(Q!=null&&(ge=Q.signal)!==null&&ge!==void 0&&ge.aborted)throw new a;if(G-- >0&&(yield ce),G<=0)return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:y(te,"readable.asIndexedPairs will be removed in a future version."),drop:B,filter:R,flatMap:_e,map:ae,take:oe,compose:N},e.exports.promiseReturningOperators={every:ie,forEach:ne,reduce:le,toArray:q,some:$,find:H}}),gu=be((t,e)=>{fe(),de(),pe();var{ArrayPrototypePop:r,Promise:s}=He(),{isIterable:l,isNodeStream:n,isWebStream:i}=Ot(),{pipelineImpl:a}=Ms(),{finished:o}=Gt();yu();function u(...c){return new s((f,p)=>{let g,b,S=c[c.length-1];if(S&&typeof S=="object"&&!n(S)&&!l(S)&&!i(S)){let w=r(c);g=w.signal,b=w.end}a(c,(w,x)=>{w?p(w):f(x)},{signal:g,end:b})})}e.exports={finished:o,pipeline:u}}),yu=be((t,e)=>{fe(),de(),pe();var{Buffer:r}=(et(),De(Ze)),{ObjectDefineProperty:s,ObjectKeys:l,ReflectApply:n}=He(),{promisify:{custom:i}}=at(),{streamReturningOperators:a,promiseReturningOperators:o}=Vh(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=st(),c=du(),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:p}=Zn(),{pipeline:g}=Ms(),{destroyer:b}=Ar(),S=Gt(),w=gu(),x=Ot(),y=e.exports=Cs().Stream;y.isDestroyed=x.isDestroyed,y.isDisturbed=x.isDisturbed,y.isErrored=x.isErrored,y.isReadable=x.isReadable,y.isWritable=x.isWritable,y.Readable=ei();for(let A of l(a)){let v=function(...O){if(new.target)throw u();return y.Readable.from(n(C,this,O))},C=a[A];s(v,"name",{__proto__:null,value:C.name}),s(v,"length",{__proto__:null,value:C.length}),s(y.Readable.prototype,A,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(let A of l(o)){let v=function(...O){if(new.target)throw u();return n(C,this,O)},C=o[A];s(v,"name",{__proto__:null,value:C.name}),s(v,"length",{__proto__:null,value:C.length}),s(y.Readable.prototype,A,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}y.Writable=Rs(),y.Duplex=kt(),y.Transform=fu(),y.PassThrough=pu(),y.pipeline=g;var{addAbortSignal:_}=Xn();y.addAbortSignal=_,y.finished=S,y.destroy=b,y.compose=c,y.setDefaultHighWaterMark=f,y.getDefaultHighWaterMark=p,s(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return w}}),s(g,i,{__proto__:null,enumerable:!0,get(){return w.pipeline}}),s(S,i,{__proto__:null,enumerable:!0,get(){return w.finished}}),y.Stream=y,y._isUint8Array=function(A){return A instanceof Uint8Array},y._uint8ArrayToBuffer=function(A){return r.from(A.buffer,A.byteOffset,A.byteLength)}}),hr=be((t,e)=>{fe(),de(),pe();var r=yu(),s=gu(),l=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=l,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return s}}),e.exports.Stream=r.Stream,e.exports.default=e.exports}),Kh=be((t,e)=>{fe(),de(),pe(),typeof Object.create=="function"?e.exports=function(r,s){s&&(r.super_=s,r.prototype=Object.create(s.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(r,s){if(s){r.super_=s;var l=function(){};l.prototype=s.prototype,r.prototype=new l,r.prototype.constructor=r}}}),Gh=be((t,e)=>{fe(),de(),pe();var{Buffer:r}=(et(),De(Ze)),s=Symbol.for("BufferList");function l(n){if(!(this instanceof l))return new l(n);l._init.call(this,n)}l._init=function(n){Object.defineProperty(this,s,{value:!0}),this._bufs=[],this.length=0,n&&this.append(n)},l.prototype._new=function(n){return new l(n)},l.prototype._offset=function(n){if(n===0)return[0,0];let i=0;for(let a=0;a<this._bufs.length;a++){let o=i+this._bufs[a].length;if(n<o||a===this._bufs.length-1)return[a,n-i];i=o}},l.prototype._reverseOffset=function(n){let i=n[0],a=n[1];for(let o=0;o<i;o++)a+=this._bufs[o].length;return a},l.prototype.getBuffers=function(){return this._bufs},l.prototype.get=function(n){if(n>this.length||n<0)return;let i=this._offset(n);return this._bufs[i[0]][i[1]]},l.prototype.slice=function(n,i){return typeof n=="number"&&n<0&&(n+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,n,i)},l.prototype.copy=function(n,i,a,o){if((typeof a!="number"||a<0)&&(a=0),(typeof o!="number"||o>this.length)&&(o=this.length),a>=this.length||o<=0)return n||r.alloc(0);let u=!!n,c=this._offset(a),f=o-a,p=f,g=u&&i||0,b=c[1];if(a===0&&o===this.length){if(!u)return this._bufs.length===1?this._bufs[0]:r.concat(this._bufs,this.length);for(let S=0;S<this._bufs.length;S++)this._bufs[S].copy(n,g),g+=this._bufs[S].length;return n}if(p<=this._bufs[c[0]].length-b)return u?this._bufs[c[0]].copy(n,i,b,b+p):this._bufs[c[0]].slice(b,b+p);u||(n=r.allocUnsafe(f));for(let S=c[0];S<this._bufs.length;S++){let w=this._bufs[S].length-b;if(p>w)this._bufs[S].copy(n,g,b),g+=w;else{this._bufs[S].copy(n,g,b,b+p),g+=w;break}p-=w,b&&(b=0)}return n.length>g?n.slice(0,g):n},l.prototype.shallowSlice=function(n,i){if(n=n||0,i=typeof i!="number"?this.length:i,n<0&&(n+=this.length),i<0&&(i+=this.length),n===i)return this._new();let a=this._offset(n),o=this._offset(i),u=this._bufs.slice(a[0],o[0]+1);return o[1]===0?u.pop():u[u.length-1]=u[u.length-1].slice(0,o[1]),a[1]!==0&&(u[0]=u[0].slice(a[1])),this._new(u)},l.prototype.toString=function(n,i,a){return this.slice(i,a).toString(n)},l.prototype.consume=function(n){if(n=Math.trunc(n),Number.isNaN(n)||n<=0)return this;for(;this._bufs.length;)if(n>=this._bufs[0].length)n-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(n),this.length-=n;break}return this},l.prototype.duplicate=function(){let n=this._new();for(let i=0;i<this._bufs.length;i++)n.append(this._bufs[i]);return n},l.prototype.append=function(n){return this._attach(n,l.prototype._appendBuffer)},l.prototype.prepend=function(n){return this._attach(n,l.prototype._prependBuffer,!0)},l.prototype._attach=function(n,i,a){if(n==null)return this;if(n.buffer)i.call(this,r.from(n.buffer,n.byteOffset,n.byteLength));else if(Array.isArray(n)){let[o,u]=a?[n.length-1,-1]:[0,1];for(let c=o;c>=0&&c<n.length;c+=u)this._attach(n[c],i,a)}else if(this._isBufferList(n)){let[o,u]=a?[n._bufs.length-1,-1]:[0,1];for(let c=o;c>=0&&c<n._bufs.length;c+=u)this._attach(n._bufs[c],i,a)}else typeof n=="number"&&(n=n.toString()),i.call(this,r.from(n));return this},l.prototype._appendBuffer=function(n){this._bufs.push(n),this.length+=n.length},l.prototype._prependBuffer=function(n){this._bufs.unshift(n),this.length+=n.length},l.prototype.indexOf=function(n,i,a){if(a===void 0&&typeof i=="string"&&(a=i,i=void 0),typeof n=="function"||Array.isArray(n))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof n=="number"?n=r.from([n]):typeof n=="string"?n=r.from(n,a):this._isBufferList(n)?n=n.slice():Array.isArray(n.buffer)?n=r.from(n.buffer,n.byteOffset,n.byteLength):r.isBuffer(n)||(n=r.from(n)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),n.length===0)return i>this.length?this.length:i;let o=this._offset(i),u=o[0],c=o[1];for(;u<this._bufs.length;u++){let f=this._bufs[u];for(;c<f.length;)if(f.length-c>=n.length){let p=f.indexOf(n,c);if(p!==-1)return this._reverseOffset([u,p]);c=f.length-n.length+1}else{let p=this._reverseOffset([u,c]);if(this._match(p,n))return p;c++}c=0}return-1},l.prototype._match=function(n,i){if(this.length-n<i.length)return!1;for(let a=0;a<i.length;a++)if(this.get(n+a)!==i[a])return!1;return!0},function(){let n={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let i in n)(function(a){n[a]===null?l.prototype[a]=function(o,u){return this.slice(o,o+u)[a](0,u)}:l.prototype[a]=function(o=0){return this.slice(o,o+n[a])[a](0)}})(i)}(),l.prototype._isBufferList=function(n){return n instanceof l||l.isBufferList(n)},l.isBufferList=function(n){return n!=null&&n[s]},e.exports=l}),Yh=be((t,e)=>{fe(),de(),pe();var r=hr().Duplex,s=Kh(),l=Gh();function n(i){if(!(this instanceof n))return new n(i);if(typeof i=="function"){this._callback=i;let a=(function(o){this._callback&&(this._callback(o),this._callback=null)}).bind(this);this.on("pipe",function(o){o.on("error",a)}),this.on("unpipe",function(o){o.removeListener("error",a)}),i=null}l._init.call(this,i),r.call(this)}s(n,r),Object.assign(n.prototype,l.prototype),n.prototype._new=function(i){return new n(i)},n.prototype._write=function(i,a,o){this._appendBuffer(i),typeof o=="function"&&o()},n.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)},n.prototype.end=function(i){r.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)},n.prototype._destroy=function(i,a){this._bufs.length=0,this.length=0,a(i)},n.prototype._isBufferList=function(i){return i instanceof n||i instanceof l||n.isBufferList(i)},n.isBufferList=l.isBufferList,e.exports=n,e.exports.BufferListStream=n,e.exports.BufferList=l}),Qh=be((t,e)=>{fe(),de(),pe();var r=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=r}),mu=be((t,e)=>{fe(),de(),pe();var r=e.exports,{Buffer:s}=(et(),De(Ze));r.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},r.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},r.requiredHeaderFlagsErrors={};for(let n in r.requiredHeaderFlags){let i=r.requiredHeaderFlags[n];r.requiredHeaderFlagsErrors[n]="Invalid header flag bits, must be 0x"+i.toString(16)+" for "+r.types[n]+" packet"}r.codes={};for(let n in r.types){let i=r.types[n];r.codes[i]=n}r.CMD_SHIFT=4,r.CMD_MASK=240,r.DUP_MASK=8,r.QOS_MASK=3,r.QOS_SHIFT=1,r.RETAIN_MASK=1,r.VARBYTEINT_MASK=127,r.VARBYTEINT_FIN_MASK=128,r.VARBYTEINT_MAX=268435455,r.SESSIONPRESENT_MASK=1,r.SESSIONPRESENT_HEADER=s.from([r.SESSIONPRESENT_MASK]),r.CONNACK_HEADER=s.from([r.codes.connack<<r.CMD_SHIFT]),r.USERNAME_MASK=128,r.PASSWORD_MASK=64,r.WILL_RETAIN_MASK=32,r.WILL_QOS_MASK=24,r.WILL_QOS_SHIFT=3,r.WILL_FLAG_MASK=4,r.CLEAN_SESSION_MASK=2,r.CONNECT_HEADER=s.from([r.codes.connect<<r.CMD_SHIFT]),r.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},r.propertiesCodes={};for(let n in r.properties){let i=r.properties[n];r.propertiesCodes[i]=n}r.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function l(n){return[0,1,2].map(i=>[0,1].map(a=>[0,1].map(o=>{let u=s.alloc(1);return u.writeUInt8(r.codes[n]<<r.CMD_SHIFT|(a?r.DUP_MASK:0)|i<<r.QOS_SHIFT|o,0,!0),u})))}r.PUBLISH_HEADER=l("publish"),r.SUBSCRIBE_HEADER=l("subscribe"),r.SUBSCRIBE_OPTIONS_QOS_MASK=3,r.SUBSCRIBE_OPTIONS_NL_MASK=1,r.SUBSCRIBE_OPTIONS_NL_SHIFT=2,r.SUBSCRIBE_OPTIONS_RAP_MASK=1,r.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,r.SUBSCRIBE_OPTIONS_RH_MASK=3,r.SUBSCRIBE_OPTIONS_RH_SHIFT=4,r.SUBSCRIBE_OPTIONS_RH=[0,16,32],r.SUBSCRIBE_OPTIONS_NL=4,r.SUBSCRIBE_OPTIONS_RAP=8,r.SUBSCRIBE_OPTIONS_QOS=[0,1,2],r.UNSUBSCRIBE_HEADER=l("unsubscribe"),r.ACKS={unsuback:l("unsuback"),puback:l("puback"),pubcomp:l("pubcomp"),pubrel:l("pubrel"),pubrec:l("pubrec")},r.SUBACK_HEADER=s.from([r.codes.suback<<r.CMD_SHIFT]),r.VERSION3=s.from([3]),r.VERSION4=s.from([4]),r.VERSION5=s.from([5]),r.VERSION131=s.from([131]),r.VERSION132=s.from([132]),r.QOS=[0,1,2].map(n=>s.from([n])),r.EMPTY={pingreq:s.from([r.codes.pingreq<<4,0]),pingresp:s.from([r.codes.pingresp<<4,0]),disconnect:s.from([r.codes.disconnect<<4,0])},r.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},r.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},r.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},r.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Jh=be((t,e)=>{fe(),de(),pe();var r=1e3,s=r*60,l=s*60,n=l*24,i=n*7,a=n*365.25;e.exports=function(p,g){g=g||{};var b=typeof p;if(b==="string"&&p.length>0)return o(p);if(b==="number"&&isFinite(p))return g.long?c(p):u(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function o(p){if(p=String(p),!(p.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(g){var b=parseFloat(g[1]),S=(g[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return b*a;case"weeks":case"week":case"w":return b*i;case"days":case"day":case"d":return b*n;case"hours":case"hour":case"hrs":case"hr":case"h":return b*l;case"minutes":case"minute":case"mins":case"min":case"m":return b*s;case"seconds":case"second":case"secs":case"sec":case"s":return b*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function u(p){var g=Math.abs(p);return g>=n?Math.round(p/n)+"d":g>=l?Math.round(p/l)+"h":g>=s?Math.round(p/s)+"m":g>=r?Math.round(p/r)+"s":p+"ms"}function c(p){var g=Math.abs(p);return g>=n?f(p,g,n,"day"):g>=l?f(p,g,l,"hour"):g>=s?f(p,g,s,"minute"):g>=r?f(p,g,r,"second"):p+" ms"}function f(p,g,b,S){var w=g>=b*1.5;return Math.round(p/b)+" "+S+(w?"s":"")}}),Xh=be((t,e)=>{fe(),de(),pe();function r(s){n.debug=n,n.default=n,n.coerce=f,n.disable=u,n.enable=a,n.enabled=c,n.humanize=Jh(),n.destroy=p,Object.keys(s).forEach(g=>{n[g]=s[g]}),n.names=[],n.skips=[],n.formatters={};function l(g){let b=0;for(let S=0;S<g.length;S++)b=(b<<5)-b+g.charCodeAt(S),b|=0;return n.colors[Math.abs(b)%n.colors.length]}n.selectColor=l;function n(g){let b,S=null,w,x;function y(..._){if(!y.enabled)return;let A=y,v=Number(new Date),C=v-(b||v);A.diff=C,A.prev=b,A.curr=v,b=v,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let O=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(I,T)=>{if(I==="%%")return"%";O++;let k=n.formatters[T];if(typeof k=="function"){let z=_[O];I=k.call(A,z),_.splice(O,1),O--}return I}),n.formatArgs.call(A,_),(A.log||n.log).apply(A,_)}return y.namespace=g,y.useColors=n.useColors(),y.color=n.selectColor(g),y.extend=i,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(w!==n.namespaces&&(w=n.namespaces,x=n.enabled(g)),x),set:_=>{S=_}}),typeof n.init=="function"&&n.init(y),y}function i(g,b){let S=n(this.namespace+(typeof b>"u"?":":b)+g);return S.log=this.log,S}function a(g){n.save(g),n.namespaces=g,n.names=[],n.skips=[];let b=(typeof g=="string"?g:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let S of b)S[0]==="-"?n.skips.push(S.slice(1)):n.names.push(S)}function o(g,b){let S=0,w=0,x=-1,y=0;for(;S<g.length;)if(w<b.length&&(b[w]===g[S]||b[w]==="*"))b[w]==="*"?(x=w,y=S,w++):(S++,w++);else if(x!==-1)w=x+1,y++,S=y;else return!1;for(;w<b.length&&b[w]==="*";)w++;return w===b.length}function u(){let g=[...n.names,...n.skips.map(b=>"-"+b)].join(",");return n.enable(""),g}function c(g){for(let b of n.skips)if(o(g,b))return!1;for(let b of n.names)if(o(g,b))return!0;return!1}function f(g){return g instanceof Error?g.stack||g.message:g}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}e.exports=r}),Pt=be((t,e)=>{fe(),de(),pe(),t.formatArgs=s,t.save=l,t.load=n,t.useColors=r,t.storage=i(),t.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let o;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(o=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(o[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let u="color: "+this.color;o.splice(1,0,u,"color: inherit");let c=0,f=0;o[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(c++,p==="%c"&&(f=c))}),o.splice(f,0,u)}t.log=console.debug||console.log||(()=>{});function l(o){try{o?t.storage.setItem("debug",o):t.storage.removeItem("debug")}catch{}}function n(){let o;try{o=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!o&&typeof Le<"u"&&"env"in Le&&(o=Le.env.DEBUG),o}function i(){try{return localStorage}catch{}}e.exports=Xh()(t);var{formatters:a}=e.exports;a.j=function(o){try{return JSON.stringify(o)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}),Zh=be((t,e)=>{fe(),de(),pe();var r=Yh(),{EventEmitter:s}=(ur(),De(Kt)),l=Qh(),n=mu(),i=Pt()("mqtt-packet:parser"),a=class xo extends s{constructor(){super(),this.parser=this.constructor.parser}static parser(u){return this instanceof xo?(this.settings=u||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new xo().parser(u)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new l,this.error=null,this._list=r(),this._stateCounter=0}parse(u){for(this.error&&this._resetState(),this._list.append(u),i("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let u=this._list.readUInt8(0),c=u>>n.CMD_SHIFT;this.packet.cmd=n.types[c];let f=u&15,p=n.requiredHeaderFlags[c];return p!=null&&f!==p?this._emitError(new Error(n.requiredHeaderFlagsErrors[c])):(this.packet.retain=(u&n.RETAIN_MASK)!==0,this.packet.qos=u>>n.QOS_SHIFT&n.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(u&n.DUP_MASK)!==0,i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let u=this._parseVarByteNum(!0);return u&&(this.packet.length=u.value,this._list.consume(u.bytes)),i("_parseLength %d",u.value),!!u}_parsePayload(){i("_parsePayload: payload %O",this._list);let u=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}u=!0}return i("_parsePayload complete result: %s",u),u}_parseConnect(){i("_parseConnect");let u,c,f,p,g={},b=this.packet,S=this._parseString();if(S===null)return this._emitError(new Error("Cannot parse protocolId"));if(S!=="MQTT"&&S!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=S,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));g.username=this._list.readUInt8(this._pos)&n.USERNAME_MASK,g.password=this._list.readUInt8(this._pos)&n.PASSWORD_MASK,g.will=this._list.readUInt8(this._pos)&n.WILL_FLAG_MASK;let w=!!(this._list.readUInt8(this._pos)&n.WILL_RETAIN_MASK),x=(this._list.readUInt8(this._pos)&n.WILL_QOS_MASK)>>n.WILL_QOS_SHIFT;if(g.will)b.will={},b.will.retain=w,b.will.qos=x;else{if(w)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(x)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&n.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(b.properties=_)}let y=this._parseString();if(y===null)return this._emitError(new Error("Packet too short"));if(b.clientId=y,i("_parseConnect: packet.clientId: %s",b.clientId),g.will){if(b.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(b.will.properties=_)}if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=u,i("_parseConnect: packet.will.topic: %s",b.will.topic),c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=c,i("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(g.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));b.username=p,i("_parseConnect: packet.username: %s",b.username)}if(g.password){if(f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse password"));b.password=f}return this.settings=b,i("_parseConnect: complete"),b}_parseConnack(){i("_parseConnack");let u=this.packet;if(this._list.length<1)return null;let c=this._list.readUInt8(this._pos++);if(c>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(u.sessionPresent=!!(c&n.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?u.reasonCode=this._list.readUInt8(this._pos++):u.reasonCode=0;else{if(this._list.length<2)return null;u.returnCode=this._list.readUInt8(this._pos++)}if(u.returnCode===-1||u.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(u.properties=f)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");let u=this.packet;if(u.topic=this._parseString(),u.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(u.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(u.properties=c)}u.payload=this._list.slice(this._pos,u.length),i("_parsePublish: payload from buffer list: %o",u.payload)}}_parseSubscribe(){i("_parseSubscribe");let u=this.packet,c,f,p,g,b,S,w;if(u.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(u.properties=x)}if(u.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<u.length;){if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=u.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(f=this._parseByte(),this.settings.protocolVersion===5){if(f&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(f&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=f&n.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(S=(f>>n.SUBSCRIBE_OPTIONS_NL_SHIFT&n.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(f>>n.SUBSCRIBE_OPTIONS_RAP_SHIFT&n.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,g=f>>n.SUBSCRIBE_OPTIONS_RH_SHIFT&n.SUBSCRIBE_OPTIONS_RH_MASK,g>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));w={topic:c,qos:p},this.settings.protocolVersion===5?(w.nl=S,w.rap=b,w.rh=g):this.settings.bridgeMode&&(w.rh=0,w.rap=!0,w.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",w),u.subscriptions.push(w)}}}_parseSuback(){i("_parseSuback");let u=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(u.properties=c)}if(u.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!n.MQTT5_SUBACK_CODES[c])return this._emitError(new Error("Invalid suback code"))}else if(c>2&&c!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(c)}}}_parseUnsubscribe(){i("_parseUnsubscribe");let u=this.packet;if(u.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(u.properties=c)}if(u.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<u.length;){let c=this._parseString();if(c===null)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",c),u.unsubscriptions.push(c)}}}_parseUnsuback(){i("_parseUnsuback");let u=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&u.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(u.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let c=this._parseProperties();for(Object.getOwnPropertyNames(c).length&&(u.properties=c),u.granted=[];this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(!n.MQTT5_UNSUBACK_CODES[f])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(f)}}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let u=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(u.length>2){switch(u.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!n.MQTT5_PUBACK_PUBREC_CODES[u.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!n.MQTT5_PUBREL_PUBCOMP_CODES[u.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}i("_parseConfirmation: packet.reasonCode `%d`",u.reasonCode)}else u.reasonCode=0;if(u.length>3){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(u.properties=c)}}return!0}_parseDisconnect(){let u=this.packet;if(i("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(u.reasonCode=this._parseByte(),n.MQTT5_DISCONNECT_CODES[u.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):u.reasonCode=0;let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(u.properties=c)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");let u=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(u.reasonCode=this._parseByte(),!n.MQTT5_AUTH_CODES[u.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let c=this._parseProperties();return Object.getOwnPropertyNames(c).length&&(u.properties=c),i("_parseAuth: result: true"),!0}_parseMessageId(){let u=this.packet;return u.messageId=this._parseNum(),u.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",u.messageId),!0)}_parseString(u){let c=this._parseNum(),f=c+this._pos;if(c===-1||f>this._list.length||f>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,f);return this._pos+=c,i("_parseString: result: %s",p),p}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let u=this._parseNum(),c=u+this._pos;if(u===-1||c>this._list.length||c>this.packet.length)return null;let f=this._list.slice(this._pos,c);return this._pos+=u,i("_parseBuffer: result: %o",f),f}_parseNum(){if(this._list.length-this._pos<2)return-1;let u=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",u),u}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let u=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",u),u}_parseVarByteNum(u){i("_parseVarByteNum");let c=4,f=0,p=1,g=0,b=!1,S,w=this._pos?this._pos:0;for(;f<c&&w+f<this._list.length;){if(S=this._list.readUInt8(w+f++),g+=p*(S&n.VARBYTEINT_MASK),p*=128,(S&n.VARBYTEINT_FIN_MASK)===0){b=!0;break}if(this._list.length<=f)break}return!b&&f===c&&this._list.length>=f&&this._emitError(new Error("Invalid variable byte integer")),w&&(this._pos+=f),b?u?b={bytes:f,value:g}:b=g:b=!1,i("_parseVarByteNum: result: %o",b),b}_parseByte(){let u;return this._pos<this._list.length&&(u=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",u),u}_parseByType(u){switch(i("_parseByType: type: %s",u),u){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");let u=this._parseVarByteNum(),c=this._pos+u,f={};for(;this._pos<c;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let g=n.propertiesCodes[p];if(!g)return this._emitError(new Error("Unknown property")),!1;if(g==="userProperties"){f[g]||(f[g]=Object.create(null));let b=this._parseByType(n.propertiesTypes[g]);if(f[g][b.name])if(Array.isArray(f[g][b.name]))f[g][b.name].push(b.value);else{let S=f[g][b.name];f[g][b.name]=[S],f[g][b.name].push(b.value)}else f[g][b.name]=b.value;continue}f[g]?Array.isArray(f[g])?f[g].push(this._parseByType(n.propertiesTypes[g])):(f[g]=[f[g]],f[g].push(this._parseByType(n.propertiesTypes[g]))):f[g]=this._parseByType(n.propertiesTypes[g])}return f}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new l,this._pos=0,!0}_emitError(u){i("_emitError",u),this.error=u,this.emit("error",u)}};e.exports=a}),ef=be((t,e)=>{fe(),de(),pe();var{Buffer:r}=(et(),De(Ze)),s=65536,l={},n=r.isBuffer(r.from([1,2]).subarray(0,1));function i(c){let f=r.allocUnsafe(2);return f.writeUInt8(c>>8,0),f.writeUInt8(c&255,1),f}function a(){for(let c=0;c<s;c++)l[c]=i(c)}function o(c){let f=0,p=0,g=r.allocUnsafe(4);do f=c%128|0,c=c/128|0,c>0&&(f=f|128),g.writeUInt8(f,p++);while(c>0&&p<4);return c>0&&(p=0),n?g.subarray(0,p):g.slice(0,p)}function u(c){let f=r.allocUnsafe(4);return f.writeUInt32BE(c,0),f}e.exports={cache:l,generateCache:a,generateNumber:i,genBufVariableByteInt:o,generate4ByteBuffer:u}}),tf=be((t,e)=>{fe(),de(),pe(),typeof Le>"u"||!Le.version||Le.version.indexOf("v0.")===0||Le.version.indexOf("v1.")===0&&Le.version.indexOf("v1.8.")!==0?e.exports={nextTick:r}:e.exports=Le;function r(s,l,n,i){if(typeof s!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,o,u;switch(a){case 0:case 1:return Le.nextTick(s);case 2:return Le.nextTick(function(){s.call(null,l)});case 3:return Le.nextTick(function(){s.call(null,l,n)});case 4:return Le.nextTick(function(){s.call(null,l,n,i)});default:for(o=new Array(a-1),u=0;u<o.length;)o[u++]=arguments[u];return Le.nextTick(function(){s.apply(null,o)})}}}),bu=be((t,e)=>{fe(),de(),pe();var r=mu(),{Buffer:s}=(et(),De(Ze)),l=s.allocUnsafe(0),n=s.from([0]),i=ef(),a=tf().nextTick,o=Pt()("mqtt-packet:writeToStream"),u=i.cache,c=i.generateNumber,f=i.generateCache,p=i.genBufVariableByteInt,g=i.generate4ByteBuffer,b=te,S=!0;function w(J,B,oe){switch(o("generate called"),B.cork&&(B.cork(),a(x,B)),S&&(S=!1,f()),o("generate: packet.cmd: %s",J.cmd),J.cmd){case"connect":return y(J,B);case"connack":return _(J,B,oe);case"publish":return A(J,B,oe);case"puback":case"pubrec":case"pubrel":case"pubcomp":return v(J,B,oe);case"subscribe":return C(J,B,oe);case"suback":return O(J,B,oe);case"unsubscribe":return I(J,B,oe);case"unsuback":return T(J,B,oe);case"pingreq":case"pingresp":return k(J,B);case"disconnect":return z(J,B,oe);case"auth":return E(J,B,oe);default:return B.destroy(new Error("Unknown command")),!1}}Object.defineProperty(w,"cacheNumbers",{get(){return b===te},set(J){J?((!u||Object.keys(u).length===0)&&(S=!0),b=te):(S=!1,b=$)}});function x(J){J.uncork()}function y(J,B,oe){let G=J||{},Q=G.protocolId||"MQTT",Z=G.protocolVersion||4,ge=G.will,ce=G.clean,D=G.keepalive||0,X=G.clientId||"",ue=G.username,me=G.password,ye=G.properties;ce===void 0&&(ce=!0);let we=0;if(typeof Q!="string"&&!s.isBuffer(Q))return B.destroy(new Error("Invalid protocolId")),!1;if(we+=Q.length+2,Z!==3&&Z!==4&&Z!==5)return B.destroy(new Error("Invalid protocol version")),!1;if(we+=1,(typeof X=="string"||s.isBuffer(X))&&(X||Z>=4)&&(X||ce))we+=s.byteLength(X)+2;else{if(Z<4)return B.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ce*1===0)return B.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof D!="number"||D<0||D>65535||D%1!==0)return B.destroy(new Error("Invalid keepalive")),!1;we+=2,we+=1;let re,ve;if(Z===5){if(re=ne(B,ye),!re)return!1;we+=re.length}if(ge){if(typeof ge!="object")return B.destroy(new Error("Invalid will")),!1;if(!ge.topic||typeof ge.topic!="string")return B.destroy(new Error("Invalid will topic")),!1;if(we+=s.byteLength(ge.topic)+2,we+=2,ge.payload)if(ge.payload.length>=0)typeof ge.payload=="string"?we+=s.byteLength(ge.payload):we+=ge.payload.length;else return B.destroy(new Error("Invalid will payload")),!1;if(ve={},Z===5){if(ve=ne(B,ge.properties),!ve)return!1;we+=ve.length}}let Ee=!1;if(ue!=null)if(_e(ue))Ee=!0,we+=s.byteLength(ue)+2;else return B.destroy(new Error("Invalid username")),!1;if(me!=null){if(!Ee)return B.destroy(new Error("Username is required to use password")),!1;if(_e(me))we+=q(me)+2;else return B.destroy(new Error("Invalid password")),!1}B.write(r.CONNECT_HEADER),U(B,we),H(B,Q),G.bridgeMode&&(Z+=128),B.write(Z===131?r.VERSION131:Z===132?r.VERSION132:Z===4?r.VERSION4:Z===5?r.VERSION5:r.VERSION3);let he=0;return he|=ue!=null?r.USERNAME_MASK:0,he|=me!=null?r.PASSWORD_MASK:0,he|=ge&&ge.retain?r.WILL_RETAIN_MASK:0,he|=ge&&ge.qos?ge.qos<<r.WILL_QOS_SHIFT:0,he|=ge?r.WILL_FLAG_MASK:0,he|=ce?r.CLEAN_SESSION_MASK:0,B.write(s.from([he])),b(B,D),Z===5&&re.write(),H(B,X),ge&&(Z===5&&ve.write(),N(B,ge.topic),H(B,ge.payload)),ue!=null&&H(B,ue),me!=null&&H(B,me),!0}function _(J,B,oe){let G=oe?oe.protocolVersion:4,Q=J||{},Z=G===5?Q.reasonCode:Q.returnCode,ge=Q.properties,ce=2;if(typeof Z!="number")return B.destroy(new Error("Invalid return code")),!1;let D=null;if(G===5){if(D=ne(B,ge),!D)return!1;ce+=D.length}return B.write(r.CONNACK_HEADER),U(B,ce),B.write(Q.sessionPresent?r.SESSIONPRESENT_HEADER:n),B.write(s.from([Z])),D==null||D.write(),!0}function A(J,B,oe){o("publish: packet: %o",J);let G=oe?oe.protocolVersion:4,Q=J||{},Z=Q.qos||0,ge=Q.retain?r.RETAIN_MASK:0,ce=Q.topic,D=Q.payload||l,X=Q.messageId,ue=Q.properties,me=0;if(typeof ce=="string")me+=s.byteLength(ce)+2;else if(s.isBuffer(ce))me+=ce.length+2;else return B.destroy(new Error("Invalid topic")),!1;if(s.isBuffer(D)?me+=D.length:me+=s.byteLength(D),Z&&typeof X!="number")return B.destroy(new Error("Invalid messageId")),!1;Z&&(me+=2);let ye=null;if(G===5){if(ye=ne(B,ue),!ye)return!1;me+=ye.length}return B.write(r.PUBLISH_HEADER[Z][Q.dup?1:0][ge?1:0]),U(B,me),b(B,q(ce)),B.write(ce),Z>0&&b(B,X),ye==null||ye.write(),o("publish: payload: %o",D),B.write(D)}function v(J,B,oe){let G=oe?oe.protocolVersion:4,Q=J||{},Z=Q.cmd||"puback",ge=Q.messageId,ce=Q.dup&&Z==="pubrel"?r.DUP_MASK:0,D=0,X=Q.reasonCode,ue=Q.properties,me=G===5?3:2;if(Z==="pubrel"&&(D=1),typeof ge!="number")return B.destroy(new Error("Invalid messageId")),!1;let ye=null;if(G===5&&typeof ue=="object"){if(ye=R(B,ue,oe,me),!ye)return!1;me+=ye.length}return B.write(r.ACKS[Z][D][ce][0]),me===3&&(me+=X!==0?1:-1),U(B,me),b(B,ge),G===5&&me!==2&&B.write(s.from([X])),ye!==null?ye.write():me===4&&B.write(s.from([0])),!0}function C(J,B,oe){o("subscribe: packet: ");let G=oe?oe.protocolVersion:4,Q=J||{},Z=Q.dup?r.DUP_MASK:0,ge=Q.messageId,ce=Q.subscriptions,D=Q.properties,X=0;if(typeof ge!="number")return B.destroy(new Error("Invalid messageId")),!1;X+=2;let ue=null;if(G===5){if(ue=ne(B,D),!ue)return!1;X+=ue.length}if(typeof ce=="object"&&ce.length)for(let ye=0;ye<ce.length;ye+=1){let we=ce[ye].topic,re=ce[ye].qos;if(typeof we!="string")return B.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof re!="number")return B.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(G===5){if(typeof(ce[ye].nl||!1)!="boolean")return B.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ce[ye].rap||!1)!="boolean")return B.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let ve=ce[ye].rh||0;if(typeof ve!="number"||ve>2)return B.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}X+=s.byteLength(we)+2+1}else return B.destroy(new Error("Invalid subscriptions")),!1;o("subscribe: writing to stream: %o",r.SUBSCRIBE_HEADER),B.write(r.SUBSCRIBE_HEADER[1][Z?1:0][0]),U(B,X),b(B,ge),ue!==null&&ue.write();let me=!0;for(let ye of ce){let we=ye.topic,re=ye.qos,ve=+ye.nl,Ee=+ye.rap,he=ye.rh,Me;N(B,we),Me=r.SUBSCRIBE_OPTIONS_QOS[re],G===5&&(Me|=ve?r.SUBSCRIBE_OPTIONS_NL:0,Me|=Ee?r.SUBSCRIBE_OPTIONS_RAP:0,Me|=he?r.SUBSCRIBE_OPTIONS_RH[he]:0),me=B.write(s.from([Me]))}return me}function O(J,B,oe){let G=oe?oe.protocolVersion:4,Q=J||{},Z=Q.messageId,ge=Q.granted,ce=Q.properties,D=0;if(typeof Z!="number")return B.destroy(new Error("Invalid messageId")),!1;if(D+=2,typeof ge=="object"&&ge.length)for(let ue=0;ue<ge.length;ue+=1){if(typeof ge[ue]!="number")return B.destroy(new Error("Invalid qos vector")),!1;D+=1}else return B.destroy(new Error("Invalid qos vector")),!1;let X=null;if(G===5){if(X=R(B,ce,oe,D),!X)return!1;D+=X.length}return B.write(r.SUBACK_HEADER),U(B,D),b(B,Z),X!==null&&X.write(),B.write(s.from(ge))}function I(J,B,oe){let G=oe?oe.protocolVersion:4,Q=J||{},Z=Q.messageId,ge=Q.dup?r.DUP_MASK:0,ce=Q.unsubscriptions,D=Q.properties,X=0;if(typeof Z!="number")return B.destroy(new Error("Invalid messageId")),!1;if(X+=2,typeof ce=="object"&&ce.length)for(let ye=0;ye<ce.length;ye+=1){if(typeof ce[ye]!="string")return B.destroy(new Error("Invalid unsubscriptions")),!1;X+=s.byteLength(ce[ye])+2}else return B.destroy(new Error("Invalid unsubscriptions")),!1;let ue=null;if(G===5){if(ue=ne(B,D),!ue)return!1;X+=ue.length}B.write(r.UNSUBSCRIBE_HEADER[1][ge?1:0][0]),U(B,X),b(B,Z),ue!==null&&ue.write();let me=!0;for(let ye=0;ye<ce.length;ye++)me=N(B,ce[ye]);return me}function T(J,B,oe){let G=oe?oe.protocolVersion:4,Q=J||{},Z=Q.messageId,ge=Q.dup?r.DUP_MASK:0,ce=Q.granted,D=Q.properties,X=Q.cmd,ue=0,me=2;if(typeof Z!="number")return B.destroy(new Error("Invalid messageId")),!1;if(G===5)if(typeof ce=="object"&&ce.length)for(let we=0;we<ce.length;we+=1){if(typeof ce[we]!="number")return B.destroy(new Error("Invalid qos vector")),!1;me+=1}else return B.destroy(new Error("Invalid qos vector")),!1;let ye=null;if(G===5){if(ye=R(B,D,oe,me),!ye)return!1;me+=ye.length}return B.write(r.ACKS[X][ue][ge][0]),U(B,me),b(B,Z),ye!==null&&ye.write(),G===5&&B.write(s.from(ce)),!0}function k(J,B,oe){return B.write(r.EMPTY[J.cmd])}function z(J,B,oe){let G=oe?oe.protocolVersion:4,Q=J||{},Z=Q.reasonCode,ge=Q.properties,ce=G===5?1:0,D=null;if(G===5){if(D=R(B,ge,oe,ce),!D)return!1;ce+=D.length}return B.write(s.from([r.codes.disconnect<<4])),U(B,ce),G===5&&B.write(s.from([Z])),D!==null&&D.write(),!0}function E(J,B,oe){let G=oe?oe.protocolVersion:4,Q=J||{},Z=Q.reasonCode,ge=Q.properties,ce=G===5?1:0;G!==5&&B.destroy(new Error("Invalid mqtt version for auth packet"));let D=R(B,ge,oe,ce);return D?(ce+=D.length,B.write(s.from([r.codes.auth<<4])),U(B,ce),B.write(s.from([Z])),D!==null&&D.write(),!0):!1}var j={};function U(J,B){if(B>r.VARBYTEINT_MAX)return J.destroy(new Error(`Invalid variable byte integer: ${B}`)),!1;let oe=j[B];return oe||(oe=p(B),B<16384&&(j[B]=oe)),o("writeVarByteInt: writing to stream: %o",oe),J.write(oe)}function N(J,B){let oe=s.byteLength(B);return b(J,oe),o("writeString: %s",B),J.write(B,"utf8")}function ae(J,B,oe){N(J,B),N(J,oe)}function te(J,B){return o("writeNumberCached: number: %d",B),o("writeNumberCached: %o",u[B]),J.write(u[B])}function $(J,B){let oe=c(B);return o("writeNumberGenerated: %o",oe),J.write(oe)}function ie(J,B){let oe=g(B);return o("write4ByteNumber: %o",oe),J.write(oe)}function H(J,B){typeof B=="string"?N(J,B):B?(b(J,B.length),J.write(B)):b(J,0)}function ne(J,B){if(typeof B!="object"||B.length!=null)return{length:1,write(){le(J,{},0)}};let oe=0;function G(Q,Z){let ge=r.propertiesTypes[Q],ce=0;switch(ge){case"byte":{if(typeof Z!="boolean")return J.destroy(new Error(`Invalid ${Q}: ${Z}`)),!1;ce+=2;break}case"int8":{if(typeof Z!="number"||Z<0||Z>255)return J.destroy(new Error(`Invalid ${Q}: ${Z}`)),!1;ce+=2;break}case"binary":{if(Z&&Z===null)return J.destroy(new Error(`Invalid ${Q}: ${Z}`)),!1;ce+=1+s.byteLength(Z)+2;break}case"int16":{if(typeof Z!="number"||Z<0||Z>65535)return J.destroy(new Error(`Invalid ${Q}: ${Z}`)),!1;ce+=3;break}case"int32":{if(typeof Z!="number"||Z<0||Z>4294967295)return J.destroy(new Error(`Invalid ${Q}: ${Z}`)),!1;ce+=5;break}case"var":{if(typeof Z!="number"||Z<0||Z>268435455)return J.destroy(new Error(`Invalid ${Q}: ${Z}`)),!1;ce+=1+s.byteLength(p(Z));break}case"string":{if(typeof Z!="string")return J.destroy(new Error(`Invalid ${Q}: ${Z}`)),!1;ce+=3+s.byteLength(Z.toString());break}case"pair":{if(typeof Z!="object")return J.destroy(new Error(`Invalid ${Q}: ${Z}`)),!1;ce+=Object.getOwnPropertyNames(Z).reduce((D,X)=>{let ue=Z[X];return Array.isArray(ue)?D+=ue.reduce((me,ye)=>(me+=3+s.byteLength(X.toString())+2+s.byteLength(ye.toString()),me),0):D+=3+s.byteLength(X.toString())+2+s.byteLength(Z[X].toString()),D},0);break}default:return J.destroy(new Error(`Invalid property ${Q}: ${Z}`)),!1}return ce}if(B)for(let Q in B){let Z=0,ge=0,ce=B[Q];if(ce!==void 0){if(Array.isArray(ce))for(let D=0;D<ce.length;D++){if(ge=G(Q,ce[D]),!ge)return!1;Z+=ge}else{if(ge=G(Q,ce),!ge)return!1;Z=ge}if(!Z)return!1;oe+=Z}}return{length:s.byteLength(p(oe))+oe,write(){le(J,B,oe)}}}function R(J,B,oe,G){let Q=["reasonString","userProperties"],Z=oe&&oe.properties&&oe.properties.maximumPacketSize?oe.properties.maximumPacketSize:0,ge=ne(J,B);if(Z)for(;G+ge.length>Z;){let ce=Q.shift();if(ce&&B[ce])delete B[ce],ge=ne(J,B);else return!1}return ge}function K(J,B,oe){switch(r.propertiesTypes[B]){case"byte":{J.write(s.from([r.properties[B]])),J.write(s.from([+oe]));break}case"int8":{J.write(s.from([r.properties[B]])),J.write(s.from([oe]));break}case"binary":{J.write(s.from([r.properties[B]])),H(J,oe);break}case"int16":{J.write(s.from([r.properties[B]])),b(J,oe);break}case"int32":{J.write(s.from([r.properties[B]])),ie(J,oe);break}case"var":{J.write(s.from([r.properties[B]])),U(J,oe);break}case"string":{J.write(s.from([r.properties[B]])),N(J,oe);break}case"pair":{Object.getOwnPropertyNames(oe).forEach(G=>{let Q=oe[G];Array.isArray(Q)?Q.forEach(Z=>{J.write(s.from([r.properties[B]])),ae(J,G.toString(),Z.toString())}):(J.write(s.from([r.properties[B]])),ae(J,G.toString(),Q.toString()))});break}default:return J.destroy(new Error(`Invalid property ${B} value: ${oe}`)),!1}}function le(J,B,oe){U(J,oe);for(let G in B)if(Object.prototype.hasOwnProperty.call(B,G)&&B[G]!=null){let Q=B[G];if(Array.isArray(Q))for(let Z=0;Z<Q.length;Z++)K(J,G,Q[Z]);else K(J,G,Q)}}function q(J){return J?J instanceof s?J.length:s.byteLength(J):0}function _e(J){return typeof J=="string"||J instanceof s}e.exports=w}),rf=be((t,e)=>{fe(),de(),pe();var r=bu(),{EventEmitter:s}=(ur(),De(Kt)),{Buffer:l}=(et(),De(Ze));function n(a,o){let u=new i;return r(a,u,o),u.concat()}var i=class extends s{constructor(){super(),this._array=new Array(20),this._i=0}write(a){return this._array[this._i++]=a,!0}concat(){let a=0,o=new Array(this._array.length),u=this._array,c=0,f;for(f=0;f<u.length&&u[f]!==void 0;f++)typeof u[f]!="string"?o[f]=u[f].length:o[f]=l.byteLength(u[f]),a+=o[f];let p=l.allocUnsafe(a);for(f=0;f<u.length&&u[f]!==void 0;f++)typeof u[f]!="string"?(u[f].copy(p,c),c+=o[f]):(p.write(u[f],c),c+=o[f]);return p}destroy(a){a&&this.emit("error",a)}};e.exports=n}),nf=be(t=>{fe(),de(),pe(),t.parser=Zh().parser,t.generate=rf(),t.writeToStream=bu()}),of=be((t,e)=>{fe(),de(),pe(),e.exports=s;function r(n){return n instanceof Kn?Kn.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function s(n){if(n=n||{},n.circles)return l(n);let i=new Map;if(i.set(Date,f=>new Date(f)),i.set(Map,(f,p)=>new Map(o(Array.from(f),p))),i.set(Set,(f,p)=>new Set(o(Array.from(f),p))),n.constructorHandlers)for(let f of n.constructorHandlers)i.set(f[0],f[1]);let a=null;return n.proto?c:u;function o(f,p){let g=Object.keys(f),b=new Array(g.length);for(let S=0;S<g.length;S++){let w=g[S],x=f[w];typeof x!="object"||x===null?b[w]=x:x.constructor!==Object&&(a=i.get(x.constructor))?b[w]=a(x,p):ArrayBuffer.isView(x)?b[w]=r(x):b[w]=p(x)}return b}function u(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return o(f,u);if(f.constructor!==Object&&(a=i.get(f.constructor)))return a(f,u);let p={};for(let g in f){if(Object.hasOwnProperty.call(f,g)===!1)continue;let b=f[g];typeof b!="object"||b===null?p[g]=b:b.constructor!==Object&&(a=i.get(b.constructor))?p[g]=a(b,u):ArrayBuffer.isView(b)?p[g]=r(b):p[g]=u(b)}return p}function c(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return o(f,c);if(f.constructor!==Object&&(a=i.get(f.constructor)))return a(f,c);let p={};for(let g in f){let b=f[g];typeof b!="object"||b===null?p[g]=b:b.constructor!==Object&&(a=i.get(b.constructor))?p[g]=a(b,c):ArrayBuffer.isView(b)?p[g]=r(b):p[g]=c(b)}return p}}function l(n){let i=[],a=[],o=new Map;if(o.set(Date,g=>new Date(g)),o.set(Map,(g,b)=>new Map(c(Array.from(g),b))),o.set(Set,(g,b)=>new Set(c(Array.from(g),b))),n.constructorHandlers)for(let g of n.constructorHandlers)o.set(g[0],g[1]);let u=null;return n.proto?p:f;function c(g,b){let S=Object.keys(g),w=new Array(S.length);for(let x=0;x<S.length;x++){let y=S[x],_=g[y];if(typeof _!="object"||_===null)w[y]=_;else if(_.constructor!==Object&&(u=o.get(_.constructor)))w[y]=u(_,b);else if(ArrayBuffer.isView(_))w[y]=r(_);else{let A=i.indexOf(_);A!==-1?w[y]=a[A]:w[y]=b(_)}}return w}function f(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return c(g,f);if(g.constructor!==Object&&(u=o.get(g.constructor)))return u(g,f);let b={};i.push(g),a.push(b);for(let S in g){if(Object.hasOwnProperty.call(g,S)===!1)continue;let w=g[S];if(typeof w!="object"||w===null)b[S]=w;else if(w.constructor!==Object&&(u=o.get(w.constructor)))b[S]=u(w,f);else if(ArrayBuffer.isView(w))b[S]=r(w);else{let x=i.indexOf(w);x!==-1?b[S]=a[x]:b[S]=f(w)}}return i.pop(),a.pop(),b}function p(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return c(g,p);if(g.constructor!==Object&&(u=o.get(g.constructor)))return u(g,p);let b={};i.push(g),a.push(b);for(let S in g){let w=g[S];if(typeof w!="object"||w===null)b[S]=w;else if(w.constructor!==Object&&(u=o.get(w.constructor)))b[S]=u(w,p);else if(ArrayBuffer.isView(w))b[S]=r(w);else{let x=i.indexOf(w);x!==-1?b[S]=a[x]:b[S]=p(w)}}return i.pop(),a.pop(),b}}}),sf=be((t,e)=>{fe(),de(),pe(),e.exports=of()()}),af=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0}),t.validateTopic=e,t.validateTopics=r;function e(s){let l=s.split("/");for(let n=0;n<l.length;n++)if(l[n]!=="+"){if(l[n]==="#")return n===l.length-1;if(l[n].indexOf("+")!==-1||l[n].indexOf("#")!==-1)return!1}return!0}function r(s){if(s.length===0)return"empty_topic_list";for(let l=0;l<s.length;l++)if(!e(s[l]))return s[l];return null}}),vu=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=hr(),r={objectMode:!0},s={clean:!0},l=class{constructor(n){xe(this,"options");xe(this,"_inflights");this.options=n||{},this.options={...s,...n},this._inflights=new Map}put(n,i){return this._inflights.set(n.messageId,n),i&&i(),this}createStream(){let n=new e.Readable(r),i=[],a=!1,o=0;return this._inflights.forEach((u,c)=>{i.push(u)}),n._read=()=>{!a&&o<i.length?n.push(i[o++]):n.push(null)},n.destroy=u=>{if(!a)return a=!0,setTimeout(()=>{n.emit("close")},0),n},n}del(n,i){let a=this._inflights.get(n.messageId);return a?(this._inflights.delete(n.messageId),i(null,a)):i&&i(new Error("missing packet")),this}get(n,i){let a=this._inflights.get(n.messageId);return a?i(null,a):i&&i(new Error("missing packet")),this}close(n){this.options.clean&&(this._inflights=null),n&&n()}};t.default=l}),lf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=[0,16,128,131,135,144,145,151,153],r=(s,l,n)=>{s.log("handlePublish: packet %o",l),n=typeof n<"u"?n:s.noop;let i=l.topic.toString(),a=l.payload,{qos:o}=l,{messageId:u}=l,{options:c}=s;if(s.options.protocolVersion===5){let f;if(l.properties&&(f=l.properties.topicAlias),typeof f<"u")if(i.length===0)if(f>0&&f<=65535){let p=s.topicAliasRecv.getTopicByAlias(f);if(p)i=p,s.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,f);else{s.log("handlePublish :: unregistered topic alias. alias: %d",f),s.emit("error",new Error("Received unregistered Topic Alias"));return}}else{s.log("handlePublish :: topic alias out of range. alias: %d",f),s.emit("error",new Error("Received Topic Alias is out of range"));return}else if(s.topicAliasRecv.put(i,f))s.log("handlePublish :: registered topic: %s - alias: %d",i,f);else{s.log("handlePublish :: topic alias out of range. alias: %d",f),s.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(s.log("handlePublish: qos %d",o),o){case 2:{c.customHandleAcks(i,a,l,(f,p)=>{if(typeof f=="number"&&(p=f,f=null),f)return s.emit("error",f);if(e.indexOf(p)===-1)return s.emit("error",new Error("Wrong reason code for pubrec"));p?s._sendPacket({cmd:"pubrec",messageId:u,reasonCode:p},n):s.incomingStore.put(l,()=>{s._sendPacket({cmd:"pubrec",messageId:u},n)})});break}case 1:{c.customHandleAcks(i,a,l,(f,p)=>{if(typeof f=="number"&&(p=f,f=null),f)return s.emit("error",f);if(e.indexOf(p)===-1)return s.emit("error",new Error("Wrong reason code for puback"));p||s.emit("message",i,a,l),s.handleMessage(l,g=>{if(g)return n&&n(g);s._sendPacket({cmd:"puback",messageId:u,reasonCode:p},n)})});break}case 0:s.emit("message",i,a,l),s.handleMessage(l,n);break;default:s.log("handlePublish: unknown QoS. Doing nothing.");break}};t.default=r}),uf=be((t,e)=>{e.exports={version:"5.14.1"}}),xr=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0}),t.MQTTJS_VERSION=t.nextTick=t.ErrorWithSubackPacket=t.ErrorWithReasonCode=void 0,t.applyMixin=s;var e=class wu extends Error{constructor(i,a){super(i);xe(this,"code");this.code=a,Object.setPrototypeOf(this,wu.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};t.ErrorWithReasonCode=e;var r=class _u extends Error{constructor(i,a){super(i);xe(this,"packet");this.packet=a,Object.setPrototypeOf(this,_u.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};t.ErrorWithSubackPacket=r;function s(l,n,i=!1){let a=[n];for(;;){let o=a[0],u=Object.getPrototypeOf(o);if(u!=null&&u.prototype)a.unshift(u);else break}for(let o of a)for(let u of Object.getOwnPropertyNames(o.prototype))(i||u!=="constructor")&&Object.defineProperty(l.prototype,u,Object.getOwnPropertyDescriptor(o.prototype,u)??Object.create(null))}t.nextTick=typeof(Le==null?void 0:Le.nextTick)=="function"?Le.nextTick:l=>{setTimeout(l,0)},t.MQTTJS_VERSION=uf().version}),ti=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=void 0;var e=xr();t.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var r=(s,l)=>{let{messageId:n}=l,i=l.cmd,a=null,o=s.outgoing[n]?s.outgoing[n].cb:null,u=null;if(!o){s.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(s.log("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{let c=l.reasonCode;c&&c>0&&c!==16?(u=new e.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[c]}`,c),s._removeOutgoingAndStoreMessage(n,()=>{o(u,l)})):s._removeOutgoingAndStoreMessage(n,o);break}case"pubrec":{a={cmd:"pubrel",qos:2,messageId:n};let c=l.reasonCode;c&&c>0&&c!==16?(u=new e.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[c]}`,c),s._removeOutgoingAndStoreMessage(n,()=>{o(u,l)})):s._sendPacket(a);break}case"suback":{delete s.outgoing[n],s.messageIdProvider.deallocate(n);let c=l.granted;for(let f=0;f<c.length;f++){let p=c[f];if(p&128){u=new Error(`Subscribe error: ${t.ReasonCodes[p]}`),u.code=p;let g=s.messageIdToTopic[n];g&&g.forEach(b=>{delete s._resubscribeTopics[b]})}}delete s.messageIdToTopic[n],s._invokeStoreProcessingQueue(),o(u,l);break}case"unsuback":{delete s.outgoing[n],s.messageIdProvider.deallocate(n),s._invokeStoreProcessingQueue(),o(null,l);break}default:s.emit("error",new Error("unrecognized packet type"))}s.disconnecting&&Object.keys(s.outgoing).length===0&&s.emit("outgoingEmpty")};t.default=r}),cf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=xr(),r=ti(),s=(l,n)=>{let{options:i}=l,a=i.protocolVersion,o=a===5?n.reasonCode:n.returnCode;if(a!==5){let u=new e.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${a}`,o);l.emit("error",u);return}l.handleAuth(n,(u,c)=>{if(u){l.emit("error",u);return}if(o===24)l.reconnecting=!1,l._sendPacket(c);else{let f=new e.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[o]}`,o);l.emit("error",f)}})};t.default=s}),hf=be(t=>{var g,b,S,w,x,y,_,A,v,C,O,I,T,k,z,E,j,U,N,ae,te,$,ie,H,ne,R,K,le,q,Io,J,B,oe,G,Su,Z,ge,ce,Bt,Ut,ko,wn,_n,We,Po,$r,Lt,To,Me;fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;var e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,r=new Set,s=typeof Le=="object"&&Le?Le:{},l=(h,d,m,P)=>{typeof s.emitWarning=="function"?s.emitWarning(h,d,m,P):console.error(`[${m}] ${d}: ${h}`)},n=globalThis.AbortController,i=globalThis.AbortSignal;if(typeof n>"u"){i=class{constructor(){xe(this,"onabort");xe(this,"_onabort",[]);xe(this,"reason");xe(this,"aborted",!1)}addEventListener(m,P){this._onabort.push(P)}},n=class{constructor(){xe(this,"signal",new i);d()}abort(m){var P,L;if(!this.signal.aborted){this.signal.reason=m,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(m);(L=(P=this.signal).onabort)==null||L.call(P,m)}}};let h=((g=s.env)==null?void 0:g.LRU_CACHE_IGNORE_AC_WARNING)!=="1",d=()=>{h&&(h=!1,l("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",d))}}var a=h=>!r.has(h),o=h=>h&&h===Math.floor(h)&&h>0&&isFinite(h),u=h=>o(h)?h<=Math.pow(2,8)?Uint8Array:h<=Math.pow(2,16)?Uint16Array:h<=Math.pow(2,32)?Uint32Array:h<=Number.MAX_SAFE_INTEGER?c:null:null,c=class extends Array{constructor(h){super(h),this.fill(0)}},f=(b=class{constructor(d,m){xe(this,"heap");xe(this,"length");if(!W(b,S))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new m(d),this.length=0}static create(d){let m=u(d);if(!m)return[];Re(b,S,!0);let P=new b(d,m);return Re(b,S,!1),P}push(d){this.heap[this.length++]=d}pop(){return this.heap[--this.length]}},S=new WeakMap,Ue(b,S,!1),b),p=(Me=class{constructor(d){Ue(this,q);Ue(this,y);Ue(this,_);Ue(this,A);Ue(this,v);Ue(this,C);Ue(this,O);xe(this,"ttl");xe(this,"ttlResolution");xe(this,"ttlAutopurge");xe(this,"updateAgeOnGet");xe(this,"updateAgeOnHas");xe(this,"allowStale");xe(this,"noDisposeOnSet");xe(this,"noUpdateTTL");xe(this,"maxEntrySize");xe(this,"sizeCalculation");xe(this,"noDeleteOnFetchRejection");xe(this,"noDeleteOnStaleGet");xe(this,"allowStaleOnFetchAbort");xe(this,"allowStaleOnFetchRejection");xe(this,"ignoreFetchAbort");Ue(this,I);Ue(this,T);Ue(this,k);Ue(this,z);Ue(this,E);Ue(this,j);Ue(this,U);Ue(this,N);Ue(this,ae);Ue(this,te);Ue(this,$);Ue(this,ie);Ue(this,H);Ue(this,ne);Ue(this,R);Ue(this,K);Ue(this,le);Ue(this,J,()=>{});Ue(this,B,()=>{});Ue(this,oe,()=>{});Ue(this,G,()=>!1);Ue(this,Z,d=>{});Ue(this,ge,(d,m,P)=>{});Ue(this,ce,(d,m,P,L)=>{if(P||L)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});xe(this,w,"LRUCache");let{max:m=0,ttl:P,ttlResolution:L=1,ttlAutopurge:Y,updateAgeOnGet:se,updateAgeOnHas:V,allowStale:ee,dispose:Ae,disposeAfter:ke,noDisposeOnSet:Pe,noUpdateTTL:je,maxSize:qe=0,maxEntrySize:Ke=0,sizeCalculation:Ne,fetchMethod:Fe,memoMethod:Ce,noDeleteOnFetchRejection:Be,noDeleteOnStaleGet:$e,allowStaleOnFetchRejection:Ve,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:ft}=d;if(m!==0&&!o(m))throw new TypeError("max option must be a nonnegative integer");let M=m?u(m):Array;if(!M)throw new Error("invalid max value: "+m);if(Re(this,y,m),Re(this,_,qe),this.maxEntrySize=Ke||W(this,_),this.sizeCalculation=Ne,this.sizeCalculation){if(!W(this,_)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Ce!==void 0&&typeof Ce!="function")throw new TypeError("memoMethod must be a function if defined");if(Re(this,O,Ce),Fe!==void 0&&typeof Fe!="function")throw new TypeError("fetchMethod must be a function if specified");if(Re(this,C,Fe),Re(this,K,!!Fe),Re(this,k,new Map),Re(this,z,new Array(m).fill(void 0)),Re(this,E,new Array(m).fill(void 0)),Re(this,j,new M(m)),Re(this,U,new M(m)),Re(this,N,0),Re(this,ae,0),Re(this,te,f.create(m)),Re(this,I,0),Re(this,T,0),typeof Ae=="function"&&Re(this,A,Ae),typeof ke=="function"?(Re(this,v,ke),Re(this,$,[])):(Re(this,v,void 0),Re(this,$,void 0)),Re(this,R,!!W(this,A)),Re(this,le,!!W(this,v)),this.noDisposeOnSet=!!Pe,this.noUpdateTTL=!!je,this.noDeleteOnFetchRejection=!!Be,this.allowStaleOnFetchRejection=!!Ve,this.allowStaleOnFetchAbort=!!Xe,this.ignoreFetchAbort=!!ft,this.maxEntrySize!==0){if(W(this,_)!==0&&!o(W(this,_)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Oe(this,q,Su).call(this)}if(this.allowStale=!!ee,this.noDeleteOnStaleGet=!!$e,this.updateAgeOnGet=!!se,this.updateAgeOnHas=!!V,this.ttlResolution=o(L)||L===0?L:1,this.ttlAutopurge=!!Y,this.ttl=P||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Oe(this,q,Io).call(this)}if(W(this,y)===0&&this.ttl===0&&W(this,_)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!W(this,y)&&!W(this,_)){let F="LRU_CACHE_UNBOUNDED";a(F)&&(r.add(F),l("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",F,Me))}}static unsafeExposeInternals(d){return{starts:W(d,H),ttls:W(d,ne),sizes:W(d,ie),keyMap:W(d,k),keyList:W(d,z),valList:W(d,E),next:W(d,j),prev:W(d,U),get head(){return W(d,N)},get tail(){return W(d,ae)},free:W(d,te),isBackgroundFetch:m=>{var P;return Oe(P=d,q,We).call(P,m)},backgroundFetch:(m,P,L,Y)=>{var se;return Oe(se=d,q,_n).call(se,m,P,L,Y)},moveToTail:m=>{var P;return Oe(P=d,q,$r).call(P,m)},indexes:m=>{var P;return Oe(P=d,q,Bt).call(P,m)},rindexes:m=>{var P;return Oe(P=d,q,Ut).call(P,m)},isStale:m=>{var P;return W(P=d,G).call(P,m)}}}get max(){return W(this,y)}get maxSize(){return W(this,_)}get calculatedSize(){return W(this,T)}get size(){return W(this,I)}get fetchMethod(){return W(this,C)}get memoMethod(){return W(this,O)}get dispose(){return W(this,A)}get disposeAfter(){return W(this,v)}getRemainingTTL(d){return W(this,k).has(d)?1/0:0}*entries(){for(let d of Oe(this,q,Bt).call(this))W(this,E)[d]!==void 0&&W(this,z)[d]!==void 0&&!Oe(this,q,We).call(this,W(this,E)[d])&&(yield[W(this,z)[d],W(this,E)[d]])}*rentries(){for(let d of Oe(this,q,Ut).call(this))W(this,E)[d]!==void 0&&W(this,z)[d]!==void 0&&!Oe(this,q,We).call(this,W(this,E)[d])&&(yield[W(this,z)[d],W(this,E)[d]])}*keys(){for(let d of Oe(this,q,Bt).call(this)){let m=W(this,z)[d];m!==void 0&&!Oe(this,q,We).call(this,W(this,E)[d])&&(yield m)}}*rkeys(){for(let d of Oe(this,q,Ut).call(this)){let m=W(this,z)[d];m!==void 0&&!Oe(this,q,We).call(this,W(this,E)[d])&&(yield m)}}*values(){for(let d of Oe(this,q,Bt).call(this))W(this,E)[d]!==void 0&&!Oe(this,q,We).call(this,W(this,E)[d])&&(yield W(this,E)[d])}*rvalues(){for(let d of Oe(this,q,Ut).call(this))W(this,E)[d]!==void 0&&!Oe(this,q,We).call(this,W(this,E)[d])&&(yield W(this,E)[d])}[(x=Symbol.iterator,w=Symbol.toStringTag,x)](){return this.entries()}find(d,m={}){for(let P of Oe(this,q,Bt).call(this)){let L=W(this,E)[P],Y=Oe(this,q,We).call(this,L)?L.__staleWhileFetching:L;if(Y!==void 0&&d(Y,W(this,z)[P],this))return this.get(W(this,z)[P],m)}}forEach(d,m=this){for(let P of Oe(this,q,Bt).call(this)){let L=W(this,E)[P],Y=Oe(this,q,We).call(this,L)?L.__staleWhileFetching:L;Y!==void 0&&d.call(m,Y,W(this,z)[P],this)}}rforEach(d,m=this){for(let P of Oe(this,q,Ut).call(this)){let L=W(this,E)[P],Y=Oe(this,q,We).call(this,L)?L.__staleWhileFetching:L;Y!==void 0&&d.call(m,Y,W(this,z)[P],this)}}purgeStale(){let d=!1;for(let m of Oe(this,q,Ut).call(this,{allowStale:!0}))W(this,G).call(this,m)&&(Oe(this,q,Lt).call(this,W(this,z)[m],"expire"),d=!0);return d}info(d){let m=W(this,k).get(d);if(m===void 0)return;let P=W(this,E)[m],L=Oe(this,q,We).call(this,P)?P.__staleWhileFetching:P;if(L===void 0)return;let Y={value:L};if(W(this,ne)&&W(this,H)){let se=W(this,ne)[m],V=W(this,H)[m];if(se&&V){let ee=se-(e.now()-V);Y.ttl=ee,Y.start=Date.now()}}return W(this,ie)&&(Y.size=W(this,ie)[m]),Y}dump(){let d=[];for(let m of Oe(this,q,Bt).call(this,{allowStale:!0})){let P=W(this,z)[m],L=W(this,E)[m],Y=Oe(this,q,We).call(this,L)?L.__staleWhileFetching:L;if(Y===void 0||P===void 0)continue;let se={value:Y};if(W(this,ne)&&W(this,H)){se.ttl=W(this,ne)[m];let V=e.now()-W(this,H)[m];se.start=Math.floor(Date.now()-V)}W(this,ie)&&(se.size=W(this,ie)[m]),d.unshift([P,se])}return d}load(d){this.clear();for(let[m,P]of d){if(P.start){let L=Date.now()-P.start;P.start=e.now()-L}this.set(m,P.value,P)}}set(d,m,P={}){var je,qe,Ke,Ne,Fe;if(m===void 0)return this.delete(d),this;let{ttl:L=this.ttl,start:Y,noDisposeOnSet:se=this.noDisposeOnSet,sizeCalculation:V=this.sizeCalculation,status:ee}=P,{noUpdateTTL:Ae=this.noUpdateTTL}=P,ke=W(this,ce).call(this,d,m,P.size||0,V);if(this.maxEntrySize&&ke>this.maxEntrySize)return ee&&(ee.set="miss",ee.maxEntrySizeExceeded=!0),Oe(this,q,Lt).call(this,d,"set"),this;let Pe=W(this,I)===0?void 0:W(this,k).get(d);if(Pe===void 0)Pe=W(this,I)===0?W(this,ae):W(this,te).length!==0?W(this,te).pop():W(this,I)===W(this,y)?Oe(this,q,wn).call(this,!1):W(this,I),W(this,z)[Pe]=d,W(this,E)[Pe]=m,W(this,k).set(d,Pe),W(this,j)[W(this,ae)]=Pe,W(this,U)[Pe]=W(this,ae),Re(this,ae,Pe),sn(this,I)._++,W(this,ge).call(this,Pe,ke,ee),ee&&(ee.set="add"),Ae=!1;else{Oe(this,q,$r).call(this,Pe);let Ce=W(this,E)[Pe];if(m!==Ce){if(W(this,K)&&Oe(this,q,We).call(this,Ce)){Ce.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Be}=Ce;Be!==void 0&&!se&&(W(this,R)&&((je=W(this,A))==null||je.call(this,Be,d,"set")),W(this,le)&&((qe=W(this,$))==null||qe.push([Be,d,"set"])))}else se||(W(this,R)&&((Ke=W(this,A))==null||Ke.call(this,Ce,d,"set")),W(this,le)&&((Ne=W(this,$))==null||Ne.push([Ce,d,"set"])));if(W(this,Z).call(this,Pe),W(this,ge).call(this,Pe,ke,ee),W(this,E)[Pe]=m,ee){ee.set="replace";let Be=Ce&&Oe(this,q,We).call(this,Ce)?Ce.__staleWhileFetching:Ce;Be!==void 0&&(ee.oldValue=Be)}}else ee&&(ee.set="update")}if(L!==0&&!W(this,ne)&&Oe(this,q,Io).call(this),W(this,ne)&&(Ae||W(this,oe).call(this,Pe,L,Y),ee&&W(this,B).call(this,ee,Pe)),!se&&W(this,le)&&W(this,$)){let Ce=W(this,$),Be;for(;Be=Ce==null?void 0:Ce.shift();)(Fe=W(this,v))==null||Fe.call(this,...Be)}return this}pop(){var d;try{for(;W(this,I);){let m=W(this,E)[W(this,N)];if(Oe(this,q,wn).call(this,!0),Oe(this,q,We).call(this,m)){if(m.__staleWhileFetching)return m.__staleWhileFetching}else if(m!==void 0)return m}}finally{if(W(this,le)&&W(this,$)){let m=W(this,$),P;for(;P=m==null?void 0:m.shift();)(d=W(this,v))==null||d.call(this,...P)}}}has(d,m={}){let{updateAgeOnHas:P=this.updateAgeOnHas,status:L}=m,Y=W(this,k).get(d);if(Y!==void 0){let se=W(this,E)[Y];if(Oe(this,q,We).call(this,se)&&se.__staleWhileFetching===void 0)return!1;if(W(this,G).call(this,Y))L&&(L.has="stale",W(this,B).call(this,L,Y));else return P&&W(this,J).call(this,Y),L&&(L.has="hit",W(this,B).call(this,L,Y)),!0}else L&&(L.has="miss");return!1}peek(d,m={}){let{allowStale:P=this.allowStale}=m,L=W(this,k).get(d);if(L===void 0||!P&&W(this,G).call(this,L))return;let Y=W(this,E)[L];return Oe(this,q,We).call(this,Y)?Y.__staleWhileFetching:Y}async fetch(d,m={}){let{allowStale:P=this.allowStale,updateAgeOnGet:L=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:se=this.ttl,noDisposeOnSet:V=this.noDisposeOnSet,size:ee=0,sizeCalculation:Ae=this.sizeCalculation,noUpdateTTL:ke=this.noUpdateTTL,noDeleteOnFetchRejection:Pe=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:je=this.allowStaleOnFetchRejection,ignoreFetchAbort:qe=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ke=this.allowStaleOnFetchAbort,context:Ne,forceRefresh:Fe=!1,status:Ce,signal:Be}=m;if(!W(this,K))return Ce&&(Ce.fetch="get"),this.get(d,{allowStale:P,updateAgeOnGet:L,noDeleteOnStaleGet:Y,status:Ce});let $e={allowStale:P,updateAgeOnGet:L,noDeleteOnStaleGet:Y,ttl:se,noDisposeOnSet:V,size:ee,sizeCalculation:Ae,noUpdateTTL:ke,noDeleteOnFetchRejection:Pe,allowStaleOnFetchRejection:je,allowStaleOnFetchAbort:Ke,ignoreFetchAbort:qe,status:Ce,signal:Be},Ve=W(this,k).get(d);if(Ve===void 0){Ce&&(Ce.fetch="miss");let Xe=Oe(this,q,_n).call(this,d,Ve,$e,Ne);return Xe.__returned=Xe}else{let Xe=W(this,E)[Ve];if(Oe(this,q,We).call(this,Xe)){let Se=P&&Xe.__staleWhileFetching!==void 0;return Ce&&(Ce.fetch="inflight",Se&&(Ce.returnedStale=!0)),Se?Xe.__staleWhileFetching:Xe.__returned=Xe}let ft=W(this,G).call(this,Ve);if(!Fe&&!ft)return Ce&&(Ce.fetch="hit"),Oe(this,q,$r).call(this,Ve),L&&W(this,J).call(this,Ve),Ce&&W(this,B).call(this,Ce,Ve),Xe;let M=Oe(this,q,_n).call(this,d,Ve,$e,Ne),F=M.__staleWhileFetching!==void 0&&P;return Ce&&(Ce.fetch=ft?"stale":"refresh",F&&ft&&(Ce.returnedStale=!0)),F?M.__staleWhileFetching:M.__returned=M}}async forceFetch(d,m={}){let P=await this.fetch(d,m);if(P===void 0)throw new Error("fetch() returned undefined");return P}memo(d,m={}){let P=W(this,O);if(!P)throw new Error("no memoMethod provided to constructor");let{context:L,forceRefresh:Y,...se}=m,V=this.get(d,se);if(!Y&&V!==void 0)return V;let ee=P(d,V,{options:se,context:L});return this.set(d,ee,se),ee}get(d,m={}){let{allowStale:P=this.allowStale,updateAgeOnGet:L=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:se}=m,V=W(this,k).get(d);if(V!==void 0){let ee=W(this,E)[V],Ae=Oe(this,q,We).call(this,ee);return se&&W(this,B).call(this,se,V),W(this,G).call(this,V)?(se&&(se.get="stale"),Ae?(se&&P&&ee.__staleWhileFetching!==void 0&&(se.returnedStale=!0),P?ee.__staleWhileFetching:void 0):(Y||Oe(this,q,Lt).call(this,d,"expire"),se&&P&&(se.returnedStale=!0),P?ee:void 0)):(se&&(se.get="hit"),Ae?ee.__staleWhileFetching:(Oe(this,q,$r).call(this,V),L&&W(this,J).call(this,V),ee))}else se&&(se.get="miss")}delete(d){return Oe(this,q,Lt).call(this,d,"delete")}clear(){return Oe(this,q,To).call(this,"delete")}},y=new WeakMap,_=new WeakMap,A=new WeakMap,v=new WeakMap,C=new WeakMap,O=new WeakMap,I=new WeakMap,T=new WeakMap,k=new WeakMap,z=new WeakMap,E=new WeakMap,j=new WeakMap,U=new WeakMap,N=new WeakMap,ae=new WeakMap,te=new WeakMap,$=new WeakMap,ie=new WeakMap,H=new WeakMap,ne=new WeakMap,R=new WeakMap,K=new WeakMap,le=new WeakMap,q=new WeakSet,Io=function(){let d=new c(W(this,y)),m=new c(W(this,y));Re(this,ne,d),Re(this,H,m),Re(this,oe,(Y,se,V=e.now())=>{if(m[Y]=se!==0?V:0,d[Y]=se,se!==0&&this.ttlAutopurge){let ee=setTimeout(()=>{W(this,G).call(this,Y)&&Oe(this,q,Lt).call(this,W(this,z)[Y],"expire")},se+1);ee.unref&&ee.unref()}}),Re(this,J,Y=>{m[Y]=d[Y]!==0?e.now():0}),Re(this,B,(Y,se)=>{if(d[se]){let V=d[se],ee=m[se];if(!V||!ee)return;Y.ttl=V,Y.start=ee,Y.now=P||L();let Ae=Y.now-ee;Y.remainingTTL=V-Ae}});let P=0,L=()=>{let Y=e.now();if(this.ttlResolution>0){P=Y;let se=setTimeout(()=>P=0,this.ttlResolution);se.unref&&se.unref()}return Y};this.getRemainingTTL=Y=>{let se=W(this,k).get(Y);if(se===void 0)return 0;let V=d[se],ee=m[se];if(!V||!ee)return 1/0;let Ae=(P||L())-ee;return V-Ae},Re(this,G,Y=>{let se=m[Y],V=d[Y];return!!V&&!!se&&(P||L())-se>V})},J=new WeakMap,B=new WeakMap,oe=new WeakMap,G=new WeakMap,Su=function(){let d=new c(W(this,y));Re(this,T,0),Re(this,ie,d),Re(this,Z,m=>{Re(this,T,W(this,T)-d[m]),d[m]=0}),Re(this,ce,(m,P,L,Y)=>{if(Oe(this,q,We).call(this,P))return 0;if(!o(L))if(Y){if(typeof Y!="function")throw new TypeError("sizeCalculation must be a function");if(L=Y(P,m),!o(L))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return L}),Re(this,ge,(m,P,L)=>{if(d[m]=P,W(this,_)){let Y=W(this,_)-d[m];for(;W(this,T)>Y;)Oe(this,q,wn).call(this,!0)}Re(this,T,W(this,T)+d[m]),L&&(L.entrySize=P,L.totalCalculatedSize=W(this,T))})},Z=new WeakMap,ge=new WeakMap,ce=new WeakMap,Bt=function*({allowStale:d=this.allowStale}={}){if(W(this,I))for(let m=W(this,ae);!(!Oe(this,q,ko).call(this,m)||((d||!W(this,G).call(this,m))&&(yield m),m===W(this,N)));)m=W(this,U)[m]},Ut=function*({allowStale:d=this.allowStale}={}){if(W(this,I))for(let m=W(this,N);!(!Oe(this,q,ko).call(this,m)||((d||!W(this,G).call(this,m))&&(yield m),m===W(this,ae)));)m=W(this,j)[m]},ko=function(d){return d!==void 0&&W(this,k).get(W(this,z)[d])===d},wn=function(d){var Y,se;let m=W(this,N),P=W(this,z)[m],L=W(this,E)[m];return W(this,K)&&Oe(this,q,We).call(this,L)?L.__abortController.abort(new Error("evicted")):(W(this,R)||W(this,le))&&(W(this,R)&&((Y=W(this,A))==null||Y.call(this,L,P,"evict")),W(this,le)&&((se=W(this,$))==null||se.push([L,P,"evict"]))),W(this,Z).call(this,m),d&&(W(this,z)[m]=void 0,W(this,E)[m]=void 0,W(this,te).push(m)),W(this,I)===1?(Re(this,N,Re(this,ae,0)),W(this,te).length=0):Re(this,N,W(this,j)[m]),W(this,k).delete(P),sn(this,I)._--,m},_n=function(d,m,P,L){let Y=m===void 0?void 0:W(this,E)[m];if(Oe(this,q,We).call(this,Y))return Y;let se=new n,{signal:V}=P;V==null||V.addEventListener("abort",()=>se.abort(V.reason),{signal:se.signal});let ee={signal:se.signal,options:P,context:L},Ae=(Ne,Fe=!1)=>{let{aborted:Ce}=se.signal,Be=P.ignoreFetchAbort&&Ne!==void 0;if(P.status&&(Ce&&!Fe?(P.status.fetchAborted=!0,P.status.fetchError=se.signal.reason,Be&&(P.status.fetchAbortIgnored=!0)):P.status.fetchResolved=!0),Ce&&!Be&&!Fe)return Pe(se.signal.reason);let $e=qe;return W(this,E)[m]===qe&&(Ne===void 0?$e.__staleWhileFetching?W(this,E)[m]=$e.__staleWhileFetching:Oe(this,q,Lt).call(this,d,"fetch"):(P.status&&(P.status.fetchUpdated=!0),this.set(d,Ne,ee.options))),Ne},ke=Ne=>(P.status&&(P.status.fetchRejected=!0,P.status.fetchError=Ne),Pe(Ne)),Pe=Ne=>{let{aborted:Fe}=se.signal,Ce=Fe&&P.allowStaleOnFetchAbort,Be=Ce||P.allowStaleOnFetchRejection,$e=Be||P.noDeleteOnFetchRejection,Ve=qe;if(W(this,E)[m]===qe&&(!$e||Ve.__staleWhileFetching===void 0?Oe(this,q,Lt).call(this,d,"fetch"):Ce||(W(this,E)[m]=Ve.__staleWhileFetching)),Be)return P.status&&Ve.__staleWhileFetching!==void 0&&(P.status.returnedStale=!0),Ve.__staleWhileFetching;if(Ve.__returned===Ve)throw Ne},je=(Ne,Fe)=>{var Be;let Ce=(Be=W(this,C))==null?void 0:Be.call(this,d,Y,ee);Ce&&Ce instanceof Promise&&Ce.then($e=>Ne($e===void 0?void 0:$e),Fe),se.signal.addEventListener("abort",()=>{(!P.ignoreFetchAbort||P.allowStaleOnFetchAbort)&&(Ne(void 0),P.allowStaleOnFetchAbort&&(Ne=$e=>Ae($e,!0)))})};P.status&&(P.status.fetchDispatched=!0);let qe=new Promise(je).then(Ae,ke),Ke=Object.assign(qe,{__abortController:se,__staleWhileFetching:Y,__returned:void 0});return m===void 0?(this.set(d,Ke,{...ee.options,status:void 0}),m=W(this,k).get(d)):W(this,E)[m]=Ke,Ke},We=function(d){if(!W(this,K))return!1;let m=d;return!!m&&m instanceof Promise&&m.hasOwnProperty("__staleWhileFetching")&&m.__abortController instanceof n},Po=function(d,m){W(this,U)[m]=d,W(this,j)[d]=m},$r=function(d){d!==W(this,ae)&&(d===W(this,N)?Re(this,N,W(this,j)[d]):Oe(this,q,Po).call(this,W(this,U)[d],W(this,j)[d]),Oe(this,q,Po).call(this,W(this,ae),d),Re(this,ae,d))},Lt=function(d,m){var L,Y,se,V;let P=!1;if(W(this,I)!==0){let ee=W(this,k).get(d);if(ee!==void 0)if(P=!0,W(this,I)===1)Oe(this,q,To).call(this,m);else{W(this,Z).call(this,ee);let Ae=W(this,E)[ee];if(Oe(this,q,We).call(this,Ae)?Ae.__abortController.abort(new Error("deleted")):(W(this,R)||W(this,le))&&(W(this,R)&&((L=W(this,A))==null||L.call(this,Ae,d,m)),W(this,le)&&((Y=W(this,$))==null||Y.push([Ae,d,m]))),W(this,k).delete(d),W(this,z)[ee]=void 0,W(this,E)[ee]=void 0,ee===W(this,ae))Re(this,ae,W(this,U)[ee]);else if(ee===W(this,N))Re(this,N,W(this,j)[ee]);else{let ke=W(this,U)[ee];W(this,j)[ke]=W(this,j)[ee];let Pe=W(this,j)[ee];W(this,U)[Pe]=W(this,U)[ee]}sn(this,I)._--,W(this,te).push(ee)}}if(W(this,le)&&((se=W(this,$))!=null&&se.length)){let ee=W(this,$),Ae;for(;Ae=ee==null?void 0:ee.shift();)(V=W(this,v))==null||V.call(this,...Ae)}return P},To=function(d){var m,P,L;for(let Y of Oe(this,q,Ut).call(this,{allowStale:!0})){let se=W(this,E)[Y];if(Oe(this,q,We).call(this,se))se.__abortController.abort(new Error("deleted"));else{let V=W(this,z)[Y];W(this,R)&&((m=W(this,A))==null||m.call(this,se,V,d)),W(this,le)&&((P=W(this,$))==null||P.push([se,V,d]))}}if(W(this,k).clear(),W(this,E).fill(void 0),W(this,z).fill(void 0),W(this,ne)&&W(this,H)&&(W(this,ne).fill(0),W(this,H).fill(0)),W(this,ie)&&W(this,ie).fill(0),Re(this,N,0),Re(this,ae,0),W(this,te).length=0,Re(this,T,0),Re(this,I,0),W(this,le)&&W(this,$)){let Y=W(this,$),se;for(;se=Y==null?void 0:Y.shift();)(L=W(this,v))==null||L.call(this,...se)}},Me);t.LRUCache=p}),Ct=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.ContainerIterator=t.Container=t.Base=void 0;var e=class{constructor(l=0){this.iteratorType=l}equals(l){return this.o===l.o}};t.ContainerIterator=e;var r=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};t.Base=r;var s=class extends r{};t.Container=s}),ff=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ct(),r=class extends e.Base{constructor(l=[]){super(),this.S=[];let n=this;l.forEach(function(i){n.push(i)})}clear(){this.i=0,this.S=[]}push(l){return this.S.push(l),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},s=r;t.default=s}),pf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ct(),r=class extends e.Base{constructor(l=[]){super(),this.j=0,this.q=[];let n=this;l.forEach(function(i){n.push(i)})}clear(){this.q=[],this.i=this.j=0}push(l){let n=this.q.length;if(this.j/n>.5&&this.j+this.i>=n&&n>4096){let i=this.i;for(let a=0;a<i;++a)this.q[a]=this.q[this.j+a];this.j=0,this.q[this.i]=l}else this.q[this.j+this.i]=l;return++this.i}pop(){if(this.i===0)return;let l=this.q[this.j++];return this.i-=1,l}front(){if(this.i!==0)return this.q[this.j]}},s=r;t.default=s}),df=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ct(),r=class extends e.Base{constructor(l=[],n=function(a,o){return a>o?-1:a<o?1:0},i=!0){if(super(),this.v=n,Array.isArray(l))this.C=i?[...l]:l;else{this.C=[];let o=this;l.forEach(function(u){o.C.push(u)})}this.i=this.C.length;let a=this.i>>1;for(let o=this.i-1>>1;o>=0;--o)this.k(o,a)}m(l){let n=this.C[l];for(;l>0;){let i=l-1>>1,a=this.C[i];if(this.v(a,n)<=0)break;this.C[l]=a,l=i}this.C[l]=n}k(l,n){let i=this.C[l];for(;l<n;){let a=l<<1|1,o=a+1,u=this.C[a];if(o<this.i&&this.v(u,this.C[o])>0&&(a=o,u=this.C[o]),this.v(u,i)>=0)break;this.C[l]=u,l=a}this.C[l]=i}clear(){this.i=0,this.C.length=0}push(l){this.C.push(l),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let l=this.C[0],n=this.C.pop();return this.i-=1,this.i&&(this.C[0]=n,this.k(0,this.i>>1)),l}top(){return this.C[0]}find(l){return this.C.indexOf(l)>=0}remove(l){let n=this.C.indexOf(l);return n<0?!1:(n===0?this.pop():n===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(n,1,this.C.pop()),this.i-=1,this.m(n),this.k(n,this.i>>1)),!0)}updateItem(l){let n=this.C.indexOf(l);return n<0?!1:(this.m(n),this.k(n,this.i>>1),!0)}toArray(){return[...this.C]}},s=r;t.default=s}),js=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ct(),r=class extends e.Container{},s=r;t.default=s}),Rt=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.throwIteratorAccessError=e;function e(){throw new RangeError("Iterator access denied!")}}),Eu=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.RandomIterator=void 0;var e=Ct(),r=Rt(),s=class extends e.ContainerIterator{constructor(l,n){super(n),this.o=l,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,r.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,r.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,r.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,r.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(l){this.container.setElementByPos(this.o,l)}};t.RandomIterator=s}),gf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=s(js()),r=Eu();function s(a){return a&&a.t?a:{default:a}}var l=class Au extends r.RandomIterator{constructor(o,u,c){super(o,c),this.container=u}copy(){return new Au(this.o,this.container,this.iteratorType)}},n=class extends e.default{constructor(a=[],o=!0){if(super(),Array.isArray(a))this.J=o?[...a]:a,this.i=a.length;else{this.J=[];let u=this;a.forEach(function(c){u.pushBack(c)})}}clear(){this.i=0,this.J.length=0}begin(){return new l(0,this)}end(){return new l(this.i,this)}rBegin(){return new l(this.i-1,this,1)}rEnd(){return new l(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J[a]}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J.splice(a,1),this.i-=1,this.i}eraseElementByValue(a){let o=0;for(let u=0;u<this.i;++u)this.J[u]!==a&&(this.J[o++]=this.J[u]);return this.i=this.J.length=o,this.i}eraseElementByIterator(a){let o=a.o;return a=a.next(),this.eraseElementByPos(o),a}pushBack(a){return this.J.push(a),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(a,o){if(a<0||a>this.i-1)throw new RangeError;this.J[a]=o}insert(a,o,u=1){if(a<0||a>this.i)throw new RangeError;return this.J.splice(a,0,...new Array(u).fill(o)),this.i+=u,this.i}find(a){for(let o=0;o<this.i;++o)if(this.J[o]===a)return new l(o,this);return this.end()}reverse(){this.J.reverse()}unique(){let a=1;for(let o=1;o<this.i;++o)this.J[o]!==this.J[o-1]&&(this.J[a++]=this.J[o]);return this.i=this.J.length=a,this.i}sort(a){this.J.sort(a)}forEach(a){for(let o=0;o<this.i;++o)a(this.J[o],o,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},i=n;t.default=i}),yf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=l(js()),r=Ct(),s=Rt();function l(o){return o&&o.t?o:{default:o}}var n=class xu extends r.ContainerIterator{constructor(u,c,f,p){super(p),this.o=u,this.h=c,this.container=f,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.l}set pointer(u){this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.l=u}copy(){return new xu(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.default{constructor(o=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let u=this;o.forEach(function(c){u.pushBack(c)})}V(o){let{L:u,B:c}=o;u.B=c,c.L=u,o===this.p&&(this.p=c),o===this._&&(this._=u),this.i-=1}G(o,u){let c=u.B,f={l:o,L:u,B:c};u.B=f,c.L=f,u===this.h&&(this.p=f),c===this.h&&(this._=f),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let u=this.p;for(;o--;)u=u.B;return u.l}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let u=this.p;for(;o--;)u=u.B;return this.V(u),this.i}eraseElementByValue(o){let u=this.p;for(;u!==this.h;)u.l===o&&this.V(u),u=u.B;return this.i}eraseElementByIterator(o){let u=o.o;return u===this.h&&(0,s.throwIteratorAccessError)(),o=o.next(),this.V(u),o}pushBack(o){return this.G(o,this._),this.i}popBack(){if(this.i===0)return;let o=this._.l;return this.V(this._),o}pushFront(o){return this.G(o,this.h),this.i}popFront(){if(this.i===0)return;let o=this.p.l;return this.V(this.p),o}setElementByPos(o,u){if(o<0||o>this.i-1)throw new RangeError;let c=this.p;for(;o--;)c=c.B;c.l=u}insert(o,u,c=1){if(o<0||o>this.i)throw new RangeError;if(c<=0)return this.i;if(o===0)for(;c--;)this.pushFront(u);else if(o===this.i)for(;c--;)this.pushBack(u);else{let f=this.p;for(let g=1;g<o;++g)f=f.B;let p=f.B;for(this.i+=c;c--;)f.B={l:u,L:f},f.B.L=f,f=f.B;f.B=p,p.L=f}return this.i}find(o){let u=this.p;for(;u!==this.h;){if(u.l===o)return new n(u,this.h,this);u=u.B}return this.end()}reverse(){if(this.i<=1)return;let o=this.p,u=this._,c=0;for(;c<<1<this.i;){let f=o.l;o.l=u.l,u.l=f,o=o.B,u=u.L,c+=1}}unique(){if(this.i<=1)return this.i;let o=this.p;for(;o!==this.h;){let u=o;for(;u.B!==this.h&&u.l===u.B.l;)u=u.B,this.i-=1;o.B=u.B,o.B.L=o,o=o.B}return this.i}sort(o){if(this.i<=1)return;let u=[];this.forEach(function(f){u.push(f)}),u.sort(o);let c=this.p;u.forEach(function(f){c.l=f,c=c.B})}merge(o){let u=this;if(this.i===0)o.forEach(function(c){u.pushBack(c)});else{let c=this.p;o.forEach(function(f){for(;c!==u.h&&c.l<=f;)c=c.B;u.G(f,c.L)})}return this.i}forEach(o){let u=this.p,c=0;for(;u!==this.h;)o(u.l,c++,this),u=u.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let o=this.p;for(;o!==this.h;)yield o.l,o=o.B}).bind(this)()}},a=i;t.default=a}),mf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=s(js()),r=Eu();function s(a){return a&&a.t?a:{default:a}}var l=class Iu extends r.RandomIterator{constructor(o,u,c){super(o,c),this.container=u}copy(){return new Iu(this.o,this.container,this.iteratorType)}},n=class extends e.default{constructor(a=[],o=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let u=(()=>{if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size;if(typeof a.size=="function")return a.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=o,this.P=Math.max(Math.ceil(u/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let c=Math.ceil(u/this.F);this.j=this.R=(this.P>>1)-(c>>1),this.D=this.N=this.F-u%this.F>>1;let f=this;a.forEach(function(p){f.pushBack(p)})}T(){let a=[],o=Math.max(this.P>>1,1);for(let u=0;u<o;++u)a[u]=new Array(this.F);for(let u=this.j;u<this.P;++u)a[a.length]=this.A[u];for(let u=0;u<this.R;++u)a[a.length]=this.A[u];a[a.length]=[...this.A[this.R]],this.j=o,this.R=a.length-1;for(let u=0;u<o;++u)a[a.length]=new Array(this.F);this.A=a,this.P=a.length}O(a){let o=this.D+a+1,u=o%this.F,c=u-1,f=this.j+(o-u)/this.F;return u===0&&(f-=1),f%=this.P,c<0&&(c+=this.F),{curNodeBucketIndex:f,curNodePointerIndex:c}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new l(0,this)}end(){return new l(this.i,this)}rBegin(){return new l(this.i-1,this,1)}rEnd(){return new l(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(a){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=a,this.i}popBack(){if(this.i===0)return;let a=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,a}pushFront(a){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=a,this.i}popFront(){if(this.i===0)return;let a=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,a}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:o,curNodePointerIndex:u}=this.O(a);return this.A[o][u]}setElementByPos(a,o){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:u,curNodePointerIndex:c}=this.O(a);this.A[u][c]=o}insert(a,o,u=1){if(a<0||a>this.i)throw new RangeError;if(a===0)for(;u--;)this.pushFront(o);else if(a===this.i)for(;u--;)this.pushBack(o);else{let c=[];for(let f=a;f<this.i;++f)c.push(this.getElementByPos(f));this.cut(a-1);for(let f=0;f<u;++f)this.pushBack(o);for(let f=0;f<c.length;++f)this.pushBack(c[f])}return this.i}cut(a){if(a<0)return this.clear(),0;let{curNodeBucketIndex:o,curNodePointerIndex:u}=this.O(a);return this.R=o,this.N=u,this.i=a+1,this.i}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;if(a===0)this.popFront();else if(a===this.i-1)this.popBack();else{let o=[];for(let c=a+1;c<this.i;++c)o.push(this.getElementByPos(c));this.cut(a),this.popBack();let u=this;o.forEach(function(c){u.pushBack(c)})}return this.i}eraseElementByValue(a){if(this.i===0)return 0;let o=[];for(let c=0;c<this.i;++c){let f=this.getElementByPos(c);f!==a&&o.push(f)}let u=o.length;for(let c=0;c<u;++c)this.setElementByPos(c,o[c]);return this.cut(u-1)}eraseElementByIterator(a){let o=a.o;return this.eraseElementByPos(o),a=a.next(),a}find(a){for(let o=0;o<this.i;++o)if(this.getElementByPos(o)===a)return new l(o,this);return this.end()}reverse(){let a=0,o=this.i-1;for(;a<o;){let u=this.getElementByPos(a);this.setElementByPos(a,this.getElementByPos(o)),this.setElementByPos(o,u),a+=1,o-=1}}unique(){if(this.i<=1)return this.i;let a=1,o=this.getElementByPos(0);for(let u=1;u<this.i;++u){let c=this.getElementByPos(u);c!==o&&(o=c,this.setElementByPos(a++,c))}for(;this.i>a;)this.popBack();return this.i}sort(a){let o=[];for(let u=0;u<this.i;++u)o.push(this.getElementByPos(u));o.sort(a);for(let u=0;u<this.i;++u)this.setElementByPos(u,o[u])}shrinkToFit(){if(this.i===0)return;let a=[];this.forEach(function(o){a.push(o)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let o=0;o<this.P;++o)this.A.push(new Array(this.F));for(let o=0;o<a.length;++o)this.pushBack(a[o])}forEach(a){for(let o=0;o<this.i;++o)a(this.getElementByPos(o),o,this)}[Symbol.iterator](){return(function*(){for(let a=0;a<this.i;++a)yield this.getElementByPos(a)}).bind(this)()}},i=n;t.default=i}),bf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.TreeNodeEnableIndex=t.TreeNode=void 0;var e=class{constructor(s,l){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=s,this.l=l}L(){let s=this;if(s.ee===1&&s.tt.tt===s)s=s.W;else if(s.U)for(s=s.U;s.W;)s=s.W;else{let l=s.tt;for(;l.U===s;)s=l,l=s.tt;s=l}return s}B(){let s=this;if(s.W){for(s=s.W;s.U;)s=s.U;return s}else{let l=s.tt;for(;l.W===s;)s=l,l=s.tt;return s.W!==l?l:s}}te(){let s=this.tt,l=this.W,n=l.U;return s.tt===this?s.tt=l:s.U===this?s.U=l:s.W=l,l.tt=s,l.U=this,this.tt=l,this.W=n,n&&(n.tt=this),l}se(){let s=this.tt,l=this.U,n=l.W;return s.tt===this?s.tt=l:s.U===this?s.U=l:s.W=l,l.tt=s,l.W=this,this.tt=l,this.U=n,n&&(n.tt=this),l}};t.TreeNode=e;var r=class extends e{constructor(){super(...arguments),this.rt=1}te(){let s=super.te();return this.ie(),s.ie(),s}se(){let s=super.se();return this.ie(),s.ie(),s}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};t.TreeNodeEnableIndex=r}),ku=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=bf(),r=Ct(),s=Rt(),l=class extends r.Container{constructor(i=function(o,u){return o<u?-1:o>u?1:0},a=!1){super(),this.Y=void 0,this.v=i,a?(this.re=e.TreeNodeEnableIndex,this.M=function(o,u,c){let f=this.ne(o,u,c);if(f){let p=f.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let g=this.he(f);if(g){let{parentNode:b,grandParent:S,curNode:w}=g;b.ie(),S.ie(),w.ie()}}return this.i},this.V=function(o){let u=this.fe(o);for(;u!==this.h;)u.rt-=1,u=u.tt}):(this.re=e.TreeNode,this.M=function(o,u,c){let f=this.ne(o,u,c);return f&&this.he(f),this.i},this.V=this.fe),this.h=new this.re}X(i,a){let o=this.h;for(;i;){let u=this.v(i.u,a);if(u<0)i=i.W;else if(u>0)o=i,i=i.U;else return i}return o}Z(i,a){let o=this.h;for(;i;)this.v(i.u,a)<=0?i=i.W:(o=i,i=i.U);return o}$(i,a){let o=this.h;for(;i;){let u=this.v(i.u,a);if(u<0)o=i,i=i.W;else if(u>0)i=i.U;else return i}return o}rr(i,a){let o=this.h;for(;i;)this.v(i.u,a)<0?(o=i,i=i.W):i=i.U;return o}ue(i){for(;;){let a=i.tt;if(a===this.h)return;if(i.ee===1){i.ee=0;return}if(i===a.U){let o=a.W;if(o.ee===1)o.ee=0,a.ee=1,a===this.Y?this.Y=a.te():a.te();else if(o.W&&o.W.ee===1){o.ee=a.ee,a.ee=0,o.W.ee=0,a===this.Y?this.Y=a.te():a.te();return}else o.U&&o.U.ee===1?(o.ee=1,o.U.ee=0,o.se()):(o.ee=1,i=a)}else{let o=a.U;if(o.ee===1)o.ee=0,a.ee=1,a===this.Y?this.Y=a.se():a.se();else if(o.U&&o.U.ee===1){o.ee=a.ee,a.ee=0,o.U.ee=0,a===this.Y?this.Y=a.se():a.se();return}else o.W&&o.W.ee===1?(o.ee=1,o.W.ee=0,o.te()):(o.ee=1,i=a)}}}fe(i){if(this.i===1)return this.clear(),this.h;let a=i;for(;a.U||a.W;){if(a.W)for(a=a.W;a.U;)a=a.U;else a=a.U;[i.u,a.u]=[a.u,i.u],[i.l,a.l]=[a.l,i.l],i=a}this.h.U===a?this.h.U=a.tt:this.h.W===a&&(this.h.W=a.tt),this.ue(a);let o=a.tt;return a===o.U?o.U=void 0:o.W=void 0,this.i-=1,this.Y.ee=0,o}oe(i,a){return i===void 0?!1:this.oe(i.U,a)||a(i)?!0:this.oe(i.W,a)}he(i){for(;;){let a=i.tt;if(a.ee===0)return;let o=a.tt;if(a===o.U){let u=o.W;if(u&&u.ee===1){if(u.ee=a.ee=0,o===this.Y)return;o.ee=1,i=o;continue}else if(i===a.W){if(i.ee=0,i.U&&(i.U.tt=a),i.W&&(i.W.tt=o),a.W=i.U,o.U=i.W,i.U=a,i.W=o,o===this.Y)this.Y=i,this.h.tt=i;else{let c=o.tt;c.U===o?c.U=i:c.W=i}return i.tt=o.tt,a.tt=i,o.tt=i,o.ee=1,{parentNode:a,grandParent:o,curNode:i}}else a.ee=0,o===this.Y?this.Y=o.se():o.se(),o.ee=1}else{let u=o.U;if(u&&u.ee===1){if(u.ee=a.ee=0,o===this.Y)return;o.ee=1,i=o;continue}else if(i===a.U){if(i.ee=0,i.U&&(i.U.tt=o),i.W&&(i.W.tt=a),o.W=i.U,a.U=i.W,i.U=o,i.W=a,o===this.Y)this.Y=i,this.h.tt=i;else{let c=o.tt;c.U===o?c.U=i:c.W=i}return i.tt=o.tt,a.tt=i,o.tt=i,o.ee=1,{parentNode:a,grandParent:o,curNode:i}}else a.ee=0,o===this.Y?this.Y=o.te():o.te(),o.ee=1}return}}ne(i,a,o){if(this.Y===void 0){this.i+=1,this.Y=new this.re(i,a),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let u,c=this.h.U,f=this.v(c.u,i);if(f===0){c.l=a;return}else if(f>0)c.U=new this.re(i,a),c.U.tt=c,u=c.U,this.h.U=u;else{let p=this.h.W,g=this.v(p.u,i);if(g===0){p.l=a;return}else if(g<0)p.W=new this.re(i,a),p.W.tt=p,u=p.W,this.h.W=u;else{if(o!==void 0){let b=o.o;if(b!==this.h){let S=this.v(b.u,i);if(S===0){b.l=a;return}else if(S>0){let w=b.L(),x=this.v(w.u,i);if(x===0){w.l=a;return}else x<0&&(u=new this.re(i,a),w.W===void 0?(w.W=u,u.tt=w):(b.U=u,u.tt=b))}}}if(u===void 0)for(u=this.Y;;){let b=this.v(u.u,i);if(b>0){if(u.U===void 0){u.U=new this.re(i,a),u.U.tt=u,u=u.U;break}u=u.U}else if(b<0){if(u.W===void 0){u.W=new this.re(i,a),u.W.tt=u,u=u.W;break}u=u.W}else{u.l=a;return}}}}return this.i+=1,u}I(i,a){for(;i;){let o=this.v(i.u,a);if(o<0)i=i.W;else if(o>0)i=i.U;else return i}return i||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(i,a){let o=i.o;if(o===this.h&&(0,s.throwIteratorAccessError)(),this.i===1)return o.u=a,!0;if(o===this.h.U)return this.v(o.B().u,a)>0?(o.u=a,!0):!1;if(o===this.h.W)return this.v(o.L().u,a)<0?(o.u=a,!0):!1;let u=o.L().u;if(this.v(u,a)>=0)return!1;let c=o.B().u;return this.v(c,a)<=0?!1:(o.u=a,!0)}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let a=0,o=this;return this.oe(this.Y,function(u){return i===a?(o.V(u),!0):(a+=1,!1)}),this.i}eraseElementByKey(i){if(this.i===0)return!1;let a=this.I(this.Y,i);return a===this.h?!1:(this.V(a),!0)}eraseElementByIterator(i){let a=i.o;a===this.h&&(0,s.throwIteratorAccessError)();let o=a.W===void 0;return i.iteratorType===0?o&&i.next():(!o||a.U===void 0)&&i.next(),this.V(a),i}forEach(i){let a=0;for(let o of this)i(o,a++,this)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let a,o=0;for(let u of this){if(o===i){a=u;break}o+=1}return a}getHeight(){if(this.i===0)return 0;let i=function(a){return a?Math.max(i(a.U),i(a.W))+1:0};return i(this.Y)}},n=l;t.default=n}),Pu=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ct(),r=Rt(),s=class extends e.ContainerIterator{constructor(n,i,a){super(a),this.o=n,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let n=this.o,i=this.h.tt;if(n===this.h)return i?i.rt-1:0;let a=0;for(n.U&&(a+=n.U.rt);n!==i;){let o=n.tt;n===o.W&&(a+=1,o.U&&(a+=o.U.rt)),n=o}return a}},l=s;t.default=l}),vf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=l(ku()),r=l(Pu()),s=Rt();function l(o){return o&&o.t?o:{default:o}}var n=class Tu extends r.default{constructor(u,c,f,p){super(u,c,p),this.container=f}get pointer(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.u}copy(){return new Tu(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.default{constructor(o=[],u,c){super(u,c);let f=this;o.forEach(function(p){f.insert(p)})}*K(o){o!==void 0&&(yield*this.K(o.U),yield o.u,yield*this.K(o.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(o,u){return this.M(o,void 0,u)}find(o){let u=this.I(this.Y,o);return new n(u,this.h,this)}lowerBound(o){let u=this.X(this.Y,o);return new n(u,this.h,this)}upperBound(o){let u=this.Z(this.Y,o);return new n(u,this.h,this)}reverseLowerBound(o){let u=this.$(this.Y,o);return new n(u,this.h,this)}reverseUpperBound(o){let u=this.rr(this.Y,o);return new n(u,this.h,this)}union(o){let u=this;return o.forEach(function(c){u.insert(c)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=i;t.default=a}),wf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=l(ku()),r=l(Pu()),s=Rt();function l(o){return o&&o.t?o:{default:o}}var n=class Ou extends r.default{constructor(u,c,f,p){super(u,c,p),this.container=f}get pointer(){this.o===this.h&&(0,s.throwIteratorAccessError)();let u=this;return new Proxy([],{get(c,f){if(f==="0")return u.o.u;if(f==="1")return u.o.l},set(c,f,p){if(f!=="1")throw new TypeError("props must be 1");return u.o.l=p,!0}})}copy(){return new Ou(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.default{constructor(o=[],u,c){super(u,c);let f=this;o.forEach(function(p){f.setElement(p[0],p[1])})}*K(o){o!==void 0&&(yield*this.K(o.U),yield[o.u,o.l],yield*this.K(o.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i===0)return;let o=this.h.U;return[o.u,o.l]}back(){if(this.i===0)return;let o=this.h.W;return[o.u,o.l]}lowerBound(o){let u=this.X(this.Y,o);return new n(u,this.h,this)}upperBound(o){let u=this.Z(this.Y,o);return new n(u,this.h,this)}reverseLowerBound(o){let u=this.$(this.Y,o);return new n(u,this.h,this)}reverseUpperBound(o){let u=this.rr(this.Y,o);return new n(u,this.h,this)}setElement(o,u,c){return this.M(o,u,c)}find(o){let u=this.I(this.Y,o);return new n(u,this.h,this)}getElementByKey(o){return this.I(this.Y,o).l}union(o){let u=this;return o.forEach(function(c){u.setElement(c[0],c[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=i;t.default=a}),Cu=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=e;function e(r){let s=typeof r;return s==="object"&&r!==null||s==="function"}}),Ru=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.HashContainerIterator=t.HashContainer=void 0;var e=Ct(),r=l(Cu()),s=Rt();function l(a){return a&&a.t?a:{default:a}}var n=class extends e.ContainerIterator{constructor(a,o,u){super(u),this.o=a,this.h=o,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this})}};t.HashContainerIterator=n;var i=class extends e.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(a){let{L:o,B:u}=a;o.B=u,u.L=o,a===this.p&&(this.p=u),a===this._&&(this._=o),this.i-=1}M(a,o,u){u===void 0&&(u=(0,r.default)(a));let c;if(u){let f=a[this.HASH_TAG];if(f!==void 0)return this.H[f].l=o,this.i;Object.defineProperty(a,this.HASH_TAG,{value:this.H.length,configurable:!0}),c={u:a,l:o,L:this._,B:this.h},this.H.push(c)}else{let f=this.g[a];if(f)return f.l=o,this.i;c={u:a,l:o,L:this._,B:this.h},this.g[a]=c}return this.i===0?(this.p=c,this.h.B=c):this._.B=c,this._=c,this.h.L=c,++this.i}I(a,o){if(o===void 0&&(o=(0,r.default)(a)),o){let u=a[this.HASH_TAG];return u===void 0?this.h:this.H[u]}else return this.g[a]||this.h}clear(){let a=this.HASH_TAG;this.H.forEach(function(o){delete o.u[a]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(a,o){let u;if(o===void 0&&(o=(0,r.default)(a)),o){let c=a[this.HASH_TAG];if(c===void 0)return!1;delete a[this.HASH_TAG],u=this.H[c],delete this.H[c]}else{if(u=this.g[a],u===void 0)return!1;delete this.g[a]}return this.V(u),!0}eraseElementByIterator(a){let o=a.o;return o===this.h&&(0,s.throwIteratorAccessError)(),this.V(o),a.next()}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let o=this.p;for(;a--;)o=o.B;return this.V(o),this.i}};t.HashContainer=i}),_f=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ru(),r=Rt(),s=class Mu extends e.HashContainerIterator{constructor(a,o,u,c){super(a,o,c),this.container=u}get pointer(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o.u}copy(){return new Mu(this.o,this.h,this.container,this.iteratorType)}},l=class extends e.HashContainer{constructor(i=[]){super();let a=this;i.forEach(function(o){a.insert(o)})}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(i,a){return this.M(i,void 0,a)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let a=this.p;for(;i--;)a=a.B;return a.u}find(i,a){let o=this.I(i,a);return new s(o,this.h,this)}forEach(i){let a=0,o=this.p;for(;o!==this.h;)i(o.u,a++,this),o=o.B}[Symbol.iterator](){return(function*(){let i=this.p;for(;i!==this.h;)yield i.u,i=i.B}).bind(this)()}},n=l;t.default=n}),Sf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ru(),r=l(Cu()),s=Rt();function l(o){return o&&o.t?o:{default:o}}var n=class ju extends e.HashContainerIterator{constructor(u,c,f,p){super(u,c,p),this.container=f}get pointer(){this.o===this.h&&(0,s.throwIteratorAccessError)();let u=this;return new Proxy([],{get(c,f){if(f==="0")return u.o.u;if(f==="1")return u.o.l},set(c,f,p){if(f!=="1")throw new TypeError("props must be 1");return u.o.l=p,!0}})}copy(){return new ju(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.HashContainer{constructor(o=[]){super();let u=this;o.forEach(function(c){u.setElement(c[0],c[1])})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(o,u,c){return this.M(o,u,c)}getElementByKey(o,u){if(u===void 0&&(u=(0,r.default)(o)),u){let f=o[this.HASH_TAG];return f!==void 0?this.H[f].l:void 0}let c=this.g[o];return c?c.l:void 0}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let u=this.p;for(;o--;)u=u.B;return[u.u,u.l]}find(o,u){let c=this.I(o,u);return new n(c,this.h,this)}forEach(o){let u=0,c=this.p;for(;c!==this.h;)o([c.u,c.l],u++,this),c=c.B}[Symbol.iterator](){return(function*(){let o=this.p;for(;o!==this.h;)yield[o.u,o.l],o=o.B}).bind(this)()}},a=i;t.default=a}),Ef=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"t",{value:!0}),Object.defineProperty(t,"Deque",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"HashSet",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"LinkList",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"OrderedMap",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"OrderedSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"PriorityQueue",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Queue",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Stack",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return l.default}});var e=f(ff()),r=f(pf()),s=f(df()),l=f(gf()),n=f(yf()),i=f(mf()),a=f(vf()),o=f(wf()),u=f(_f()),c=f(Sf());function f(p){return p&&p.t?p:{default:p}}}),Af=be((t,e)=>{fe(),de(),pe();var r=Ef().OrderedSet,s=Pt()("number-allocator:trace"),l=Pt()("number-allocator:error");function n(a,o){this.low=a,this.high=o}n.prototype.equals=function(a){return this.low===a.low&&this.high===a.high},n.prototype.compare=function(a){return this.low<a.low&&this.high<a.low?-1:a.low<this.low&&a.high<this.low?1:0};function i(a,o){if(!(this instanceof i))return new i(a,o);this.min=a,this.max=o,this.ss=new r([],(u,c)=>u.compare(c)),s("Create"),this.clear()}i.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},i.prototype.alloc=function(){if(this.ss.size()===0)return s("alloc():empty"),null;let a=this.ss.begin(),o=a.pointer.low,u=a.pointer.high,c=o;return c+1<=u?this.ss.updateKeyByIterator(a,new n(o+1,u)):this.ss.eraseElementByPos(0),s("alloc():"+c),c},i.prototype.use=function(a){let o=new n(a,a),u=this.ss.lowerBound(o);if(!u.equals(this.ss.end())){let c=u.pointer.low,f=u.pointer.high;return u.pointer.equals(o)?(this.ss.eraseElementByIterator(u),s("use():"+a),!0):c>a?!1:c===a?(this.ss.updateKeyByIterator(u,new n(c+1,f)),s("use():"+a),!0):f===a?(this.ss.updateKeyByIterator(u,new n(c,f-1)),s("use():"+a),!0):(this.ss.updateKeyByIterator(u,new n(a+1,f)),this.ss.insert(new n(c,a-1)),s("use():"+a),!0)}return s("use():failed"),!1},i.prototype.free=function(a){if(a<this.min||a>this.max){l("free():"+a+" is out of range");return}let o=new n(a,a),u=this.ss.upperBound(o);if(u.equals(this.ss.end())){if(u.equals(this.ss.begin())){this.ss.insert(o);return}u.pre();let c=u.pointer.high;u.pointer.high+1===a?this.ss.updateKeyByIterator(u,new n(c,a)):this.ss.insert(o)}else if(u.equals(this.ss.begin()))if(a+1===u.pointer.low){let c=u.pointer.high;this.ss.updateKeyByIterator(u,new n(a,c))}else this.ss.insert(o);else{let c=u.pointer.low,f=u.pointer.high;u.pre();let p=u.pointer.low;u.pointer.high+1===a?a+1===c?(this.ss.eraseElementByIterator(u),this.ss.updateKeyByIterator(u,new n(p,f))):this.ss.updateKeyByIterator(u,new n(p,a)):a+1===c?(this.ss.eraseElementByIterator(u.next()),this.ss.insert(new n(a,f))):this.ss.insert(o)}s("free():"+a)},i.prototype.clear=function(){s("clear()"),this.ss.clear(),this.ss.insert(new n(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(let a of this.ss)console.log(a)},e.exports=i}),Nu=be((t,e)=>{fe(),de(),pe();var r=Af();e.exports.NumberAllocator=r}),xf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=hf(),r=Nu(),s=class{constructor(l){xe(this,"aliasToTopic");xe(this,"topicToAlias");xe(this,"max");xe(this,"numberAllocator");xe(this,"length");l>0&&(this.aliasToTopic=new e.LRUCache({max:l}),this.topicToAlias={},this.numberAllocator=new r.NumberAllocator(1,l),this.max=l,this.length=0)}put(l,n){if(n===0||n>this.max)return!1;let i=this.aliasToTopic.get(n);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(n,l),this.topicToAlias[l]=n,this.numberAllocator.use(n),this.length=this.aliasToTopic.size,!0}getTopicByAlias(l){return this.aliasToTopic.get(l)}getAliasByTopic(l){let n=this.topicToAlias[l];return typeof n<"u"&&this.aliasToTopic.get(n),n}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};t.default=s}),If=be(t=>{fe(),de(),pe();var e=t&&t.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0});var r=ti(),s=e(xf()),l=xr(),n=(i,a)=>{i.log("_handleConnack");let{options:o}=i,u=o.protocolVersion===5?a.reasonCode:a.returnCode;if(clearTimeout(i.connackTimer),delete i.topicAliasSend,a.properties){if(a.properties.topicAliasMaximum){if(a.properties.topicAliasMaximum>65535){i.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}a.properties.topicAliasMaximum>0&&(i.topicAliasSend=new s.default(a.properties.topicAliasMaximum))}a.properties.serverKeepAlive&&o.keepalive&&(o.keepalive=a.properties.serverKeepAlive),a.properties.maximumPacketSize&&(o.properties||(o.properties={}),o.properties.maximumPacketSize=a.properties.maximumPacketSize)}if(u===0)i.reconnecting=!1,i._onConnect(a);else if(u>0){let c=new l.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[u]}`,u);i.emit("error",c),i.options.reconnectOnConnackError&&i._cleanUp(!0)}};t.default=n}),kf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=(r,s,l)=>{r.log("handling pubrel packet");let n=typeof l<"u"?l:r.noop,{messageId:i}=s,a={cmd:"pubcomp",messageId:i};r.incomingStore.get(s,(o,u)=>{o?r._sendPacket(a,n):(r.emit("message",u.topic,u.payload,u),r.handleMessage(u,c=>{if(c)return n(c);r.incomingStore.del(u,r.noop),r._sendPacket(a,n)}))})};t.default=e}),Pf=be(t=>{fe(),de(),pe();var e=t&&t.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0});var r=e(lf()),s=e(cf()),l=e(If()),n=e(ti()),i=e(kf()),a=(o,u,c)=>{let{options:f}=o;if(f.protocolVersion===5&&f.properties&&f.properties.maximumPacketSize&&f.properties.maximumPacketSize<u.length)return o.emit("error",new Error(`exceeding packets size ${u.cmd}`)),o.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),o;switch(o.log("_handlePacket :: emitting packetreceive"),o.emit("packetreceive",u),u.cmd){case"publish":(0,r.default)(o,u,c);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":o.reschedulePing(),(0,n.default)(o,u),c();break;case"pubrel":o.reschedulePing(),(0,i.default)(o,u,c);break;case"connack":(0,l.default)(o,u),c();break;case"auth":o.reschedulePing(),(0,s.default)(o,u),c();break;case"pingresp":o.log("_handlePacket :: received pingresp"),o.reschedulePing(!0),c();break;case"disconnect":o.emit("disconnect",u),c();break;default:o.log("_handlePacket :: unknown command"),c();break}};t.default=a}),Bu=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=class{constructor(){xe(this,"nextId");this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let r=this.nextId++;return this.nextId===65536&&(this.nextId=1),r}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(r){return!0}deallocate(r){}clear(){}};t.default=e}),Tf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=class{constructor(r){xe(this,"aliasToTopic");xe(this,"max");xe(this,"length");this.aliasToTopic={},this.max=r}put(r,s){return s===0||s>this.max?!1:(this.aliasToTopic[s]=r,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(r){return this.aliasToTopic[r]}clear(){this.aliasToTopic={}}};t.default=e}),Of=be(t=>{fe(),de(),pe();var e=t&&t.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEventEmitter=void 0;var r=e((ur(),De(Kt))),s=xr(),l=class{};t.TypedEventEmitter=l,(0,s.applyMixin)(l,r.default)}),ri=be((t,e)=>{fe(),de(),pe();function r(s){"@babel/helpers - typeof";return e.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e.exports.__esModule=!0,e.exports.default=e.exports,r(s)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),Cf=be((t,e)=>{fe(),de(),pe();var r=ri().default;function s(l,n){if(r(l)!="object"||!l)return l;var i=l[Symbol.toPrimitive];if(i!==void 0){var a=i.call(l,n||"default");if(r(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(l)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),Rf=be((t,e)=>{fe(),de(),pe();var r=ri().default,s=Cf();function l(n){var i=s(n,"string");return r(i)=="symbol"?i:i+""}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports}),Mf=be((t,e)=>{fe(),de(),pe();var r=Rf();function s(l,n,i){return(n=r(n))in l?Object.defineProperty(l,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[n]=i,l}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),jf=be((t,e)=>{fe(),de(),pe();function r(s){if(Array.isArray(s))return s}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),Nf=be((t,e)=>{fe(),de(),pe();function r(s,l){var n=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var i,a,o,u,c=[],f=!0,p=!1;try{if(o=(n=n.call(s)).next,l===0){if(Object(n)!==n)return;f=!1}else for(;!(f=(i=o.call(n)).done)&&(c.push(i.value),c.length!==l);f=!0);}catch(g){p=!0,a=g}finally{try{if(!f&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(p)throw a}}return c}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),Bf=be((t,e)=>{fe(),de(),pe();function r(s,l){(l==null||l>s.length)&&(l=s.length);for(var n=0,i=Array(l);n<l;n++)i[n]=s[n];return i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),Uf=be((t,e)=>{fe(),de(),pe();var r=Bf();function s(l,n){if(l){if(typeof l=="string")return r(l,n);var i={}.toString.call(l).slice(8,-1);return i==="Object"&&l.constructor&&(i=l.constructor.name),i==="Map"||i==="Set"?Array.from(l):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(l,n):void 0}}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),Lf=be((t,e)=>{fe(),de(),pe();function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),$f=be((t,e)=>{fe(),de(),pe();var r=jf(),s=Nf(),l=Uf(),n=Lf();function i(a,o){return r(a)||s(a,o)||l(a,o)||n()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),Uu=be((t,e)=>{fe(),de(),pe(),function(r,s){typeof t=="object"&&typeof e<"u"?s(t):typeof define=="function"&&define.amd?define(["exports"],s):(r=typeof globalThis<"u"?globalThis:r||self,s(r.fastUniqueNumbers={}))}(t,function(r){var s=function(g){return function(b){var S=g(b);return b.add(S),S}},l=function(g){return function(b,S){return g.set(b,S),S}},n=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,a=i*2,o=function(g,b){return function(S){var w=b.get(S),x=w===void 0?S.size:w<a?w+1:0;if(!S.has(x))return g(S,x);if(S.size<i){for(;S.has(x);)x=Math.floor(Math.random()*a);return g(S,x)}if(S.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;S.has(x);)x=Math.floor(Math.random()*n);return g(S,x)}},u=new WeakMap,c=l(u),f=o(c,u),p=s(f);r.addUniqueNumber=p,r.generateUniqueNumber=f})}),Df=be((t,e)=>{fe(),de(),pe();function r(l,n,i,a,o,u,c){try{var f=l[u](c),p=f.value}catch(g){return void i(g)}f.done?n(p):Promise.resolve(p).then(a,o)}function s(l){return function(){var n=this,i=arguments;return new Promise(function(a,o){var u=l.apply(n,i);function c(p){r(u,a,o,c,f,"next",p)}function f(p){r(u,a,o,c,f,"throw",p)}c(void 0)})}}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),Lu=be((t,e)=>{fe(),de(),pe();function r(s,l){this.v=s,this.k=l}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),$u=be((t,e)=>{fe(),de(),pe();function r(s,l,n,i){var a=Object.defineProperty;try{a({},"",{})}catch{a=0}e.exports=r=function(o,u,c,f){function p(g,b){r(o,g,function(S){return this._invoke(g,b,S)})}u?a?a(o,u,{value:c,enumerable:!f,configurable:!f,writable:!f}):o[u]=c:(p("next",0),p("throw",1),p("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,r(s,l,n,i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),Du=be((t,e)=>{fe(),de(),pe();var r=$u();function s(){var l,n,i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",o=i.toStringTag||"@@toStringTag";function u(x,y,_,A){var v=y&&y.prototype instanceof f?y:f,C=Object.create(v.prototype);return r(C,"_invoke",function(O,I,T){var k,z,E,j=0,U=T||[],N=!1,ae={p:0,n:0,v:l,a:te,f:te.bind(l,4),d:function($,ie){return k=$,z=0,E=l,ae.n=ie,c}};function te($,ie){for(z=$,E=ie,n=0;!N&&j&&!H&&n<U.length;n++){var H,ne=U[n],R=ae.p,K=ne[2];$>3?(H=K===ie)&&(E=ne[(z=ne[4])?5:(z=3,3)],ne[4]=ne[5]=l):ne[0]<=R&&((H=$<2&&R<ne[1])?(z=0,ae.v=ie,ae.n=ne[1]):R<K&&(H=$<3||ne[0]>ie||ie>K)&&(ne[4]=$,ne[5]=ie,ae.n=K,z=0))}if(H||$>1)return c;throw N=!0,ie}return function($,ie,H){if(j>1)throw TypeError("Generator is already running");for(N&&ie===1&&te(ie,H),z=ie,E=H;(n=z<2?l:E)||!N;){k||(z?z<3?(z>1&&(ae.n=-1),te(z,E)):ae.n=E:ae.v=E);try{if(j=2,k){if(z||($="next"),n=k[$]){if(!(n=n.call(k,E)))throw TypeError("iterator result is not an object");if(!n.done)return n;E=n.value,z<2&&(z=0)}else z===1&&(n=k.return)&&n.call(k),z<2&&(E=TypeError("The iterator does not provide a '"+$+"' method"),z=1);k=l}else if((n=(N=ae.n<0)?E:O.call(I,ae))!==c)break}catch(ne){k=l,z=1,E=ne}finally{j=1}}return{value:n,done:N}}}(x,_,A),!0),C}var c={};function f(){}function p(){}function g(){}n=Object.getPrototypeOf;var b=[][a]?n(n([][a]())):(r(n={},a,function(){return this}),n),S=g.prototype=f.prototype=Object.create(b);function w(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,g):(x.__proto__=g,r(x,o,"GeneratorFunction")),x.prototype=Object.create(S),x}return p.prototype=g,r(S,"constructor",g),r(g,"constructor",p),p.displayName="GeneratorFunction",r(g,o,"GeneratorFunction"),r(S),r(S,o,"Generator"),r(S,a,function(){return this}),r(S,"toString",function(){return"[object Generator]"}),(e.exports=s=function(){return{w:u,m:w}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),Fu=be((t,e)=>{fe(),de(),pe();var r=Lu(),s=$u();function l(n,i){function a(u,c,f,p){try{var g=n[u](c),b=g.value;return b instanceof r?i.resolve(b.v).then(function(S){a("next",S,f,p)},function(S){a("throw",S,f,p)}):i.resolve(b).then(function(S){g.value=S,f(g)},function(S){return a("throw",S,f,p)})}catch(S){p(S)}}var o;this.next||(s(l.prototype),s(l.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),s(this,"_invoke",function(u,c,f){function p(){return new i(function(g,b){a(u,f,g,b)})}return o=o?o.then(p,p):p()},!0)}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports}),Wu=be((t,e)=>{fe(),de(),pe();var r=Du(),s=Fu();function l(n,i,a,o,u){return new s(r().w(n,i,a,o),u||Promise)}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports}),Ff=be((t,e)=>{fe(),de(),pe();var r=Wu();function s(l,n,i,a,o){var u=r(l,n,i,a,o);return u.next().then(function(c){return c.done?c.value:u.next()})}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),Wf=be((t,e)=>{fe(),de(),pe();function r(s){var l=Object(s),n=[];for(var i in l)n.unshift(i);return function a(){for(;n.length;)if((i=n.pop())in l)return a.value=i,a.done=!1,a;return a.done=!0,a}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),zf=be((t,e)=>{fe(),de(),pe();var r=ri().default;function s(l){if(l!=null){var n=l[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],i=0;if(n)return n.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length))return{next:function(){return l&&i>=l.length&&(l=void 0),{value:l&&l[i++],done:!l}}}}throw new TypeError(r(l)+" is not iterable")}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),qf=be((t,e)=>{fe(),de(),pe();var r=Lu(),s=Du(),l=Ff(),n=Wu(),i=Fu(),a=Wf(),o=zf();function u(){var c=s(),f=c.m(u),p=(Object.getPrototypeOf?Object.getPrototypeOf(f):f.__proto__).constructor;function g(w){var x=typeof w=="function"&&w.constructor;return!!x&&(x===p||(x.displayName||x.name)==="GeneratorFunction")}var b={throw:1,return:2,break:3,continue:3};function S(w){var x,y;return function(_){x||(x={stop:function(){return y(_.a,2)},catch:function(){return _.v},abrupt:function(A,v){return y(_.a,b[A],v)},delegateYield:function(A,v,C){return x.resultName=v,y(_.d,o(A),C)},finish:function(A){return y(_.f,A)}},y=function(A,v,C){_.p=x.prev,_.n=x.next;try{return A(v,C)}finally{x.next=_.n}}),x.resultName&&(x[x.resultName]=_.v,x.resultName=void 0),x.sent=_.v,x.next=_.n;try{return w.call(this,x)}finally{_.p=x.prev,_.n=x.next}}}return(e.exports=u=function(){return{wrap:function(w,x,y,_){return c.w(S(w),x,y,_&&_.reverse())},isGeneratorFunction:g,mark:c.m,awrap:function(w,x){return new r(w,x)},AsyncIterator:i,async:function(w,x,y,_,A){return(g(x)?n:l)(S(w),x,y,_,A)},keys:a,values:o}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports}),Hf=be((t,e)=>{fe(),de(),pe();var r=qf()();e.exports=r;try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}),Vf=be((t,e)=>{fe(),de(),pe(),function(r,s){typeof t=="object"&&typeof e<"u"?s(t,Mf(),$f(),Uu(),Df(),Hf()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],s):(r=typeof globalThis<"u"?globalThis:r||self,s(r.brokerFactory={},r._defineProperty,r._slicedToArray,r.fastUniqueNumbers,r._asyncToGenerator,r._regeneratorRuntime))}(t,function(r,s,l,n,i,a){var o=function(y){return typeof y.start=="function"},u=new WeakMap;function c(y,_){var A=Object.keys(y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(y);_&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(y,C).enumerable})),A.push.apply(A,v)}return A}function f(y){for(var _=1;_<arguments.length;_++){var A=arguments[_]!=null?arguments[_]:{};_%2?c(Object(A),!0).forEach(function(v){s(y,v,A[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(A)):c(Object(A)).forEach(function(v){Object.defineProperty(y,v,Object.getOwnPropertyDescriptor(A,v))})}return y}var p=function(y){return f(f({},y),{},{connect:function(_){var A=_.call;return i(a.mark(function v(){var C,O,I,T;return a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return C=new MessageChannel,O=C.port1,I=C.port2,k.next=1,A("connect",{port:O},[O]);case 1:return T=k.sent,u.set(I,T),k.abrupt("return",I);case 2:case"end":return k.stop()}},v)}))},disconnect:function(_){var A=_.call;return function(){var v=i(a.mark(function C(O){var I;return a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(I=u.get(O),I!==void 0){T.next=1;break}throw new Error("The given port is not connected.");case 1:return T.next=2,A("disconnect",{portId:I});case 2:case"end":return T.stop()}},C)}));return function(C){return v.apply(this,arguments)}}()},isSupported:function(_){var A=_.call;return function(){return A("isSupported")}}})};function g(y,_){var A=Object.keys(y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(y);_&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(y,C).enumerable})),A.push.apply(A,v)}return A}function b(y){for(var _=1;_<arguments.length;_++){var A=arguments[_]!=null?arguments[_]:{};_%2?g(Object(A),!0).forEach(function(v){s(y,v,A[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(A)):g(Object(A)).forEach(function(v){Object.defineProperty(y,v,Object.getOwnPropertyDescriptor(A,v))})}return y}var S=new WeakMap,w=function(y){if(S.has(y))return S.get(y);var _=new Map;return S.set(y,_),_},x=function(y){var _=p(y);return function(A){var v=w(A);A.addEventListener("message",function(U){var N=U.data,ae=N.id;if(ae!==null&&v.has(ae)){var te=v.get(ae),$=te.reject,ie=te.resolve;v.delete(ae),N.error===void 0?ie(N.result):$(new Error(N.error.message))}}),o(A)&&A.start();for(var C=function(U){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(te,$){var ie=n.generateUniqueNumber(v);v.set(ie,{reject:$,resolve:te}),N===null?A.postMessage({id:ie,method:U},ae):A.postMessage({id:ie,method:U,params:N},ae)})},O=function(U,N){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];A.postMessage({id:null,method:U,params:N},ae)},I={},T=0,k=Object.entries(_);T<k.length;T++){var z=l(k[T],2),E=z[0],j=z[1];I=b(b({},I),{},s({},E,j({call:C,notify:O})))}return b({},I)}};r.createBroker=x})}),Kf=be((t,e)=>{fe(),de(),pe(),function(r,s){typeof t=="object"&&typeof e<"u"?s(t,ri(),Vf(),Uu()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],s):(r=typeof globalThis<"u"?globalThis:r||self,s(r.workerTimersBroker={},r._typeof,r.brokerFactory,r.fastUniqueNumbers))}(t,function(r,s,l,n){var i=new Map([[0,null]]),a=new Map([[0,null]]),o=l.createBroker({clearInterval:function(c){var f=c.call;return function(p){s(i.get(p))==="symbol"&&(i.set(p,null),f("clear",{timerId:p,timerType:"interval"}).then(function(){i.delete(p)}))}},clearTimeout:function(c){var f=c.call;return function(p){s(a.get(p))==="symbol"&&(a.set(p,null),f("clear",{timerId:p,timerType:"timeout"}).then(function(){a.delete(p)}))}},setInterval:function(c){var f=c.call;return function(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length,S=new Array(b>2?b-2:0),w=2;w<b;w++)S[w-2]=arguments[w];var x=Symbol(),y=n.generateUniqueNumber(i);i.set(y,x);var _=function(){return f("set",{delay:g,now:performance.timeOrigin+performance.now(),timerId:y,timerType:"interval"}).then(function(){var A=i.get(y);if(A===void 0)throw new Error("The timer is in an undefined state.");A===x&&(p.apply(void 0,S),i.get(y)===x&&_())})};return _(),y}},setTimeout:function(c){var f=c.call;return function(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length,S=new Array(b>2?b-2:0),w=2;w<b;w++)S[w-2]=arguments[w];var x=Symbol(),y=n.generateUniqueNumber(a);return a.set(y,x),f("set",{delay:g,now:performance.timeOrigin+performance.now(),timerId:y,timerType:"timeout"}).then(function(){var _=a.get(y);if(_===void 0)throw new Error("The timer is in an undefined state.");_===x&&(a.delete(y),p.apply(void 0,S))}),y}}}),u=function(c){var f=new Worker(c);return o(f)};r.load=u,r.wrap=o})}),Gf=be((t,e)=>{fe(),de(),pe(),function(r,s){typeof t=="object"&&typeof e<"u"?s(t,Kf()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],s):(r=typeof globalThis<"u"?globalThis:r||self,s(r.workerTimers={},r.workerTimersBroker))}(t,function(r,s){var l=function(f,p){var g=null;return function(){if(g!==null)return g;var b=new Blob([p],{type:"application/javascript; charset=utf-8"}),S=URL.createObjectURL(b);return g=f(S),setTimeout(function(){return URL.revokeObjectURL(S)}),g}},n=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,i=l(s.load,n),a=function(f){return i().clearInterval(f)},o=function(f){return i().clearTimeout(f)},u=function(){var f;return(f=i()).setInterval.apply(f,arguments)},c=function(){var f;return(f=i()).setTimeout.apply(f,arguments)};r.clearInterval=a,r.clearTimeout=o,r.setInterval=u,r.setTimeout=c})}),ni=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNativeBrowser=t.isWebWorker=void 0;var e=()=>{var n;return typeof window<"u"?typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().indexOf(" electron/"))>-1&&(Le!=null&&Le.versions)?!Object.prototype.hasOwnProperty.call(Le.versions,"electron"):typeof window.document<"u":!1},r=()=>{var n,i;return!!(typeof self=="object"&&((i=(n=self==null?void 0:self.constructor)==null?void 0:n.name)!=null&&i.includes("WorkerGlobalScope"))&&typeof Deno>"u")},s=()=>typeof navigator<"u"&&navigator.product==="ReactNative",l=e()||r()||s();t.isWebWorker=r(),t.isReactNativeBrowser=s(),t.default=l}),Yf=be(t=>{fe(),de(),pe();var e=t&&t.__createBinding||(Object.create?function(u,c,f,p){p===void 0&&(p=f);var g=Object.getOwnPropertyDescriptor(c,f);(!g||("get"in g?!c.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(u,p,g)}:function(u,c,f,p){p===void 0&&(p=f),u[p]=c[f]}),r=t&&t.__setModuleDefault||(Object.create?function(u,c){Object.defineProperty(u,"default",{enumerable:!0,value:c})}:function(u,c){u.default=c}),s=t&&t.__importStar||function(){var u=function(c){return u=Object.getOwnPropertyNames||function(f){var p=[];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(p[p.length]=g);return p},u(c)};return function(c){if(c&&c.__esModule)return c;var f={};if(c!=null)for(var p=u(c),g=0;g<p.length;g++)p[g]!=="default"&&e(f,c,p[g]);return r(f,c),f}}();Object.defineProperty(t,"__esModule",{value:!0});var l=Gf(),n=s(ni()),i={set:l.setInterval,clear:l.clearInterval},a={set:(u,c)=>setInterval(u,c),clear:u=>clearInterval(u)},o=u=>{switch(u){case"native":return a;case"worker":return i;case"auto":default:return n.default&&!n.isWebWorker&&!n.isReactNativeBrowser?i:a}};t.default=o}),zu=be(t=>{fe(),de(),pe();var e=t&&t.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0});var r=e(Yf()),s=class{constructor(l,n){xe(this,"_keepalive");xe(this,"timerId");xe(this,"timer");xe(this,"destroyed",!1);xe(this,"counter");xe(this,"client");xe(this,"_keepaliveTimeoutTimestamp");xe(this,"_intervalEvery");this.client=l,this.timer=typeof n=="object"&&"set"in n&&"clear"in n?n:(0,r.default)(n),this.setKeepalive(l.options.keepalive)}get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(l){if(l*=1e3,isNaN(l)||l<=0||l>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${l}`);this._keepalive=l,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${l}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let l=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+l,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};t.default=s}),Oo=be(t=>{var v;fe(),de(),pe();var e=t&&t.__createBinding||(Object.create?function(C,O,I,T){T===void 0&&(T=I);var k=Object.getOwnPropertyDescriptor(O,I);(!k||("get"in k?!O.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return O[I]}}),Object.defineProperty(C,T,k)}:function(C,O,I,T){T===void 0&&(T=I),C[T]=O[I]}),r=t&&t.__setModuleDefault||(Object.create?function(C,O){Object.defineProperty(C,"default",{enumerable:!0,value:O})}:function(C,O){C.default=O}),s=t&&t.__importStar||function(){var C=function(O){return C=Object.getOwnPropertyNames||function(I){var T=[];for(var k in I)Object.prototype.hasOwnProperty.call(I,k)&&(T[T.length]=k);return T},C(O)};return function(O){if(O&&O.__esModule)return O;var I={};if(O!=null)for(var T=C(O),k=0;k<T.length;k++)T[k]!=="default"&&e(I,O,T[k]);return r(I,O),I}}(),l=t&&t.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(t,"__esModule",{value:!0});var n=l(nf()),i=hr(),a=l(sf()),o=l(Pt()),u=s(af()),c=l(vu()),f=l(Pf()),p=l(Bu()),g=l(Tf()),b=xr(),S=Of(),w=l(zu()),x=s(ni()),y=globalThis.setImmediate||((...C)=>{let O=C.shift();(0,b.nextTick)(()=>{O(...C)})}),_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},A=(v=class extends S.TypedEventEmitter{constructor(I,T){super();xe(this,"connected");xe(this,"disconnecting");xe(this,"disconnected");xe(this,"reconnecting");xe(this,"incomingStore");xe(this,"outgoingStore");xe(this,"options");xe(this,"queueQoSZero");xe(this,"_reconnectCount");xe(this,"log");xe(this,"messageIdProvider");xe(this,"outgoing");xe(this,"messageIdToTopic");xe(this,"noop");xe(this,"keepaliveManager");xe(this,"stream");xe(this,"queue");xe(this,"streamBuilder");xe(this,"_resubscribeTopics");xe(this,"connackTimer");xe(this,"reconnectTimer");xe(this,"_storeProcessing");xe(this,"_packetIdsDuringStoreProcessing");xe(this,"_storeProcessingQueue");xe(this,"_firstConnection");xe(this,"topicAliasRecv");xe(this,"topicAliasSend");xe(this,"_deferredReconnect");xe(this,"connackPacket");this.options=T||{};for(let k in _)typeof this.options[k]>"u"?this.options[k]=_[k]:this.options[k]=T[k];this.log=this.options.log||(0,o.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",v.VERSION),x.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",x.default?"browser":"node"),this.log("MqttClient :: options.protocol",T.protocol),this.log("MqttClient :: options.protocolVersion",T.protocolVersion),this.log("MqttClient :: options.username",T.username),this.log("MqttClient :: options.keepalive",T.keepalive),this.log("MqttClient :: options.reconnectPeriod",T.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",T.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",T.properties?T.properties.topicAliasMaximum:void 0),this.options.clientId=typeof T.clientId=="string"?T.clientId:v.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=T.protocolVersion===5&&T.customHandleAcks?T.customHandleAcks:(...k)=>{k[3](null,0)},this.options.writeCache||(n.default.writeToStream.cacheNumbers=!1),this.streamBuilder=I,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new p.default:this.options.messageIdProvider,this.outgoingStore=T.outgoingStore||new c.default,this.incomingStore=T.incomingStore||new c.default,this.queueQoSZero=T.queueQoSZero===void 0?!0:T.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,T.properties&&T.properties.topicAliasMaximum>0&&(T.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new g.default(T.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:k}=this,z=()=>{let E=k.shift();this.log("deliver :: entry %o",E);let j=null;if(!E){this._resubscribe();return}j=E.packet,this.log("deliver :: call _sendPacket for %o",j);let U=!0;j.messageId&&j.messageId!==0&&(this.messageIdProvider.register(j.messageId)||(U=!1)),U?this._sendPacket(j,N=>{E.cb&&E.cb(N),z()}):(this.log("messageId: %d has already used. The message is skipped and removed.",j.messageId),z())};this.log("connect :: sending queued packets"),z()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}handleAuth(I,T){T()}handleMessage(I,T){T()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var ae;let I=new i.Writable,T=n.default.parser(this.options),k=null,z=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new c.default,this.outgoingStore=this.options.outgoingStore||new c.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),T.on("packet",te=>{this.log("parser :: on packet push to packets array."),z.push(te)});let E=()=>{this.log("work :: getting next packet in queue");let te=z.shift();if(te)this.log("work :: packet pulled from queue"),(0,f.default)(this,te,j);else{this.log("work :: no packets in queue");let $=k;k=null,this.log("work :: done flag is %s",!!$),$&&$()}},j=()=>{if(z.length)(0,b.nextTick)(E);else{let te=k;k=null,te()}};I._write=(te,$,ie)=>{k=ie,this.log("writable stream :: parsing buffer"),T.parse(te),E()};let U=te=>{this.log("streamErrorHandler :: error",te.message),te.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",te)):this.noop(te)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",U),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let N={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(N.will={...this.options.will,payload:(ae=this.options.will)==null?void 0:ae.payload}),this.topicAliasRecv&&(N.properties||(N.properties={}),this.topicAliasRecv&&(N.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(N),T.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let te={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(te)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(I,T,k,z){this.log("publish :: message `%s` to topic `%s`",T,I);let{options:E}=this;typeof k=="function"&&(z=k,k=null),k=k||{},k={qos:0,retain:!1,dup:!1,...k};let{qos:j,retain:U,dup:N,properties:ae,cbStorePut:te}=k;if(this._checkDisconnecting(z))return this;let $=()=>{let ie=0;if((j===1||j===2)&&(ie=this._nextId(),ie===null))return this.log("No messageId left"),!1;let H={cmd:"publish",topic:I,payload:T,qos:j,retain:U,messageId:ie,dup:N};switch(E.protocolVersion===5&&(H.properties=ae),this.log("publish :: qos",j),j){case 1:case 2:this.outgoing[H.messageId]={volatile:!1,cb:z||this.noop},this.log("MqttClient:publish: packet cmd: %s",H.cmd),this._sendPacket(H,void 0,te);break;default:this.log("MqttClient:publish: packet cmd: %s",H.cmd),this._sendPacket(H,z,te);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!$())&&this._storeProcessingQueue.push({invoke:$,cbStorePut:k.cbStorePut,callback:z}),this}publishAsync(I,T,k){return new Promise((z,E)=>{this.publish(I,T,k,(j,U)=>{j?E(j):z(U)})})}subscribe(I,T,k){let z=this.options.protocolVersion;typeof T=="function"&&(k=T),k=k||this.noop;let E=!1,j=[];typeof I=="string"?(I=[I],j=I):Array.isArray(I)?j=I:typeof I=="object"&&(E=I.resubscribe,delete I.resubscribe,j=Object.keys(I));let U=u.validateTopics(j);if(U!==null)return y(k,new Error(`Invalid topic ${U}`)),this;if(this._checkDisconnecting(k))return this.log("subscribe: discconecting true"),this;let N={qos:0};z===5&&(N.nl=!1,N.rap=!1,N.rh=0),T={...N,...T};let{properties:ae}=T,te=[],$=(ne,R)=>{if(R=R||T,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,ne)||this._resubscribeTopics[ne].qos<R.qos||E){let K={topic:ne,qos:R.qos};z===5&&(K.nl=R.nl,K.rap=R.rap,K.rh=R.rh,K.properties=ae),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",K.topic,K.qos),te.push(K)}};if(Array.isArray(I)?I.forEach(ne=>{this.log("subscribe: array topic %s",ne),$(ne)}):Object.keys(I).forEach(ne=>{this.log("subscribe: object topic %s, %o",ne,I[ne]),$(ne,I[ne])}),!te.length)return k(null,[]),this;let ie=(ne,R)=>{let K={cmd:"subscribe",subscriptions:ne,messageId:R};if(ae&&(K.properties=ae),this.options.resubscribe){this.log("subscribe :: resubscribe true");let q=[];ne.forEach(_e=>{if(this.options.reconnectPeriod>0){let J={qos:_e.qos};z===5&&(J.nl=_e.nl||!1,J.rap=_e.rap||!1,J.rh=_e.rh||0,J.properties=_e.properties),this._resubscribeTopics[_e.topic]=J,q.push(_e.topic)}}),this.messageIdToTopic[K.messageId]=q}let le=new Promise((q,_e)=>{this.outgoing[K.messageId]={volatile:!0,cb(J,B){if(!J){let{granted:oe}=B;for(let G=0;G<oe.length;G+=1)ne[G].qos=oe[G]}J?_e(new b.ErrorWithSubackPacket(J.message,B)):q(B)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(K),le},H=()=>{let ne=this.options.subscribeBatchSize??te.length,R=[];for(let K=0;K<te.length;K+=ne){let le=te.slice(K,K+ne),q=this._nextId();if(q===null)return this.log("No messageId left"),!1;R.push(ie(le,q))}return Promise.all(R).then(K=>{k(null,te,K.at(-1))}).catch(K=>{k(K,te,K.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!H())&&this._storeProcessingQueue.push({invoke:H,callback:k}),this}subscribeAsync(I,T){return new Promise((k,z)=>{this.subscribe(I,T,(E,j)=>{E?z(E):k(j)})})}unsubscribe(I,T,k){typeof I=="string"&&(I=[I]),typeof T=="function"&&(k=T),k=k||this.noop;let z=u.validateTopics(I);if(z!==null)return y(k,new Error(`Invalid topic ${z}`)),this;if(this._checkDisconnecting(k))return this;let E=()=>{let j=this._nextId();if(j===null)return this.log("No messageId left"),!1;let U={cmd:"unsubscribe",messageId:j,unsubscriptions:[]};return typeof I=="string"?U.unsubscriptions=[I]:Array.isArray(I)&&(U.unsubscriptions=I),this.options.resubscribe&&U.unsubscriptions.forEach(N=>{delete this._resubscribeTopics[N]}),typeof T=="object"&&T.properties&&(U.properties=T.properties),this.outgoing[U.messageId]={volatile:!0,cb:k},this.log("unsubscribe: call _sendPacket"),this._sendPacket(U),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!E())&&this._storeProcessingQueue.push({invoke:E,callback:k}),this}unsubscribeAsync(I,T){return new Promise((k,z)=>{this.unsubscribe(I,T,(E,j)=>{E?z(E):k(j)})})}end(I,T,k){this.log("end :: (%s)",this.options.clientId),(I==null||typeof I!="boolean")&&(k=k||T,T=I,I=!1),typeof T!="object"&&(k=k||T,T=null),this.log("end :: cb? %s",!!k),(!k||typeof k!="function")&&(k=this.noop);let z=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(j=>{this.outgoingStore.close(U=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),k){let N=j||U;this.log("end :: closeStores: invoking callback with args"),k(N)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},E=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,I),this._cleanUp(I,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(z)},T)};return this.disconnecting?(k(),this):(this._clearReconnect(),this.disconnecting=!0,!I&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,E,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),E()),this)}endAsync(I,T){return new Promise((k,z)=>{this.end(I,T,E=>{E?z(E):k()})})}removeOutgoingMessage(I){if(this.outgoing[I]){let{cb:T}=this.outgoing[I];this._removeOutgoingAndStoreMessage(I,()=>{T(new Error("Message removed"))})}return this}reconnect(I){this.log("client reconnect");let T=()=>{I?(this.options.incomingStore=I.incomingStore,this.options.outgoingStore=I.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new c.default,this.outgoingStore=this.options.outgoingStore||new c.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=T:T(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(I=>{this.outgoing[I].volatile&&typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(I=>{typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_removeTopicAliasAndRecoverTopicName(I){let T;I.properties&&(T=I.properties.topicAlias);let k=I.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",T,k),k.length===0){if(typeof T>"u")return new Error("Unregistered Topic Alias");if(k=this.topicAliasSend.getTopicByAlias(T),typeof k>"u")return new Error("Unregistered Topic Alias");I.topic=k}T&&delete I.properties.topicAlias}_checkDisconnecting(I){return this.disconnecting&&(I&&I!==this.noop?I(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(I,T,k={}){if(T&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",T)),this.log("_cleanUp :: forced? %s",I),I)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let z={cmd:"disconnect",...k};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(z,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),y(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),T&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",T),T())}_storeAndSend(I,T,k){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let z=I,E;if(z.cmd==="publish"&&(z=(0,a.default)(I),E=this._removeTopicAliasAndRecoverTopicName(z),E))return T&&T(E);this.outgoingStore.put(z,j=>{if(j)return T&&T(j);k(),this._writePacket(I,T)})}_applyTopicAlias(I){if(this.options.protocolVersion===5&&I.cmd==="publish"){let T;I.properties&&(T=I.properties.topicAlias);let k=I.topic.toString();if(this.topicAliasSend)if(T){if(k.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",k,T),!this.topicAliasSend.put(k,T)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",k,T),new Error("Sending Topic Alias out of range")}else k.length!==0&&(this.options.autoAssignTopicAlias?(T=this.topicAliasSend.getAliasByTopic(k),T?(I.topic="",I.properties={...I.properties,topicAlias:T},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",k,T)):(T=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(k,T),I.properties={...I.properties,topicAlias:T},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",k,T))):this.options.autoUseTopicAlias&&(T=this.topicAliasSend.getAliasByTopic(k),T&&(I.topic="",I.properties={...I.properties,topicAlias:T},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",k,T))));else if(T)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",k,T),new Error("Sending Topic Alias out of range")}}_noop(I){this.log("noop ::",I)}_writePacket(I,T){this.log("_writePacket :: packet: %O",I),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",I),this.log("_writePacket :: writing to stream");let k=n.default.writeToStream(I,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",k),!k&&T&&T!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",T)):T&&(this.log("_writePacket :: invoking cb"),T())}_sendPacket(I,T,k,z){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),k=k||this.noop,T=T||this.noop;let E=this._applyTopicAlias(I);if(E){T(E);return}if(!this.connected){if(I.cmd==="auth"){this._writePacket(I,T);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(I,T,k);return}if(z){this._writePacket(I,T);return}switch(I.cmd){case"publish":break;case"pubrel":this._storeAndSend(I,T,k);return;default:this._writePacket(I,T);return}switch(I.qos){case 2:case 1:this._storeAndSend(I,T,k);break;case 0:default:this._writePacket(I,T);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(I,T,k){this.log("_storePacket :: packet: %o",I),this.log("_storePacket :: cb? %s",!!T),k=k||this.noop;let z=I;if(z.cmd==="publish"){z=(0,a.default)(I);let j=this._removeTopicAliasAndRecoverTopicName(z);if(j)return T&&T(j)}let E=z.qos||0;E===0&&this.queueQoSZero||z.cmd!=="publish"?this.queue.push({packet:z,cb:T}):E>0?(T=this.outgoing[z.messageId]?this.outgoing[z.messageId].cb:null,this.outgoingStore.put(z,j=>{if(j)return T&&T(j);k()})):T&&T(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new w.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(I=!1){this.keepaliveManager&&this.options.keepalive&&(I||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let I=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&I.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let T=0;T<I.length;T++){let k={};k[I[T]]=this._resubscribeTopics[I[T]],k.resubscribe=!0,this.subscribe(k,{properties:k[I[T]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(I){if(this.disconnected){this.emit("connect",I);return}this.connackPacket=I,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let T=()=>{let k=this.outgoingStore.createStream(),z=()=>{k.destroy(),k=null,this._flushStoreProcessingQueue(),E()},E=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",z),k.on("error",U=>{E(),this._flushStoreProcessingQueue(),this.removeListener("close",z),this.emit("error",U)});let j=()=>{if(!k)return;let U=k.read(1),N;if(!U){k.once("readable",j);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[U.messageId]){j();return}!this.disconnecting&&!this.reconnectTimer?(N=this.outgoing[U.messageId]?this.outgoing[U.messageId].cb:null,this.outgoing[U.messageId]={volatile:!1,cb(ae,te){N&&N(ae,te),j()}},this._packetIdsDuringStoreProcessing[U.messageId]=!0,this.messageIdProvider.register(U.messageId)?this._sendPacket(U,void 0,void 0,!0):this.log("messageId: %d has already used.",U.messageId)):k.destroy&&k.destroy()};k.on("end",()=>{let U=!0;for(let N in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[N]){U=!1;break}this.removeListener("close",z),U?(E(),this._invokeAllStoreProcessingQueue(),this.emit("connect",I)):T()}),j()};T()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let I=this._storeProcessingQueue[0];if(I&&I.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let I of this._storeProcessingQueue)I.cbStorePut&&I.cbStorePut(new Error("Connection closed")),I.callback&&I.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(I,T){delete this.outgoing[I],this.outgoingStore.del({messageId:I},(k,z)=>{T(k,z),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue()})}},xe(v,"VERSION",b.MQTTJS_VERSION),v);t.default=A}),Qf=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=Nu(),r=class{constructor(){xe(this,"numberAllocator");xe(this,"lastId");this.numberAllocator=new e.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(s){return this.numberAllocator.use(s)}deallocate(s){this.numberAllocator.free(s)}clear(){this.numberAllocator.clear()}};t.default=r});function Jf(){if(Co)return Sn;Co=!0;let t=2147483647,e=36,r=1,s=26,l=38,n=700,i=72,a=128,o="-",u=/^xn--/,c=/[^\0-\x7F]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=e-r,b=Math.floor,S=String.fromCharCode;function w(k){throw new RangeError(p[k])}function x(k,z){let E=[],j=k.length;for(;j--;)E[j]=z(k[j]);return E}function y(k,z){let E=k.split("@"),j="";E.length>1&&(j=E[0]+"@",k=E[1]),k=k.replace(f,".");let U=k.split("."),N=x(U,z).join(".");return j+N}function _(k){let z=[],E=0,j=k.length;for(;E<j;){let U=k.charCodeAt(E++);if(U>=55296&&U<=56319&&E<j){let N=k.charCodeAt(E++);(N&64512)==56320?z.push(((U&1023)<<10)+(N&1023)+65536):(z.push(U),E--)}else z.push(U)}return z}let A=k=>String.fromCodePoint(...k),v=function(k){return k>=48&&k<58?26+(k-48):k>=65&&k<91?k-65:k>=97&&k<123?k-97:e},C=function(k,z){return k+22+75*(k<26)-((z!=0)<<5)},O=function(k,z,E){let j=0;for(k=E?b(k/n):k>>1,k+=b(k/z);k>g*s>>1;j+=e)k=b(k/g);return b(j+(g+1)*k/(k+l))},I=function(k){let z=[],E=k.length,j=0,U=a,N=i,ae=k.lastIndexOf(o);ae<0&&(ae=0);for(let te=0;te<ae;++te)k.charCodeAt(te)>=128&&w("not-basic"),z.push(k.charCodeAt(te));for(let te=ae>0?ae+1:0;te<E;){let $=j;for(let H=1,ne=e;;ne+=e){te>=E&&w("invalid-input");let R=v(k.charCodeAt(te++));R>=e&&w("invalid-input"),R>b((t-j)/H)&&w("overflow"),j+=R*H;let K=ne<=N?r:ne>=N+s?s:ne-N;if(R<K)break;let le=e-K;H>b(t/le)&&w("overflow"),H*=le}let ie=z.length+1;N=O(j-$,ie,$==0),b(j/ie)>t-U&&w("overflow"),U+=b(j/ie),j%=ie,z.splice(j++,0,U)}return String.fromCodePoint(...z)},T=function(k){let z=[];k=_(k);let E=k.length,j=a,U=0,N=i;for(let $ of k)$<128&&z.push(S($));let ae=z.length,te=ae;for(ae&&z.push(o);te<E;){let $=t;for(let H of k)H>=j&&H<$&&($=H);let ie=te+1;$-j>b((t-U)/ie)&&w("overflow"),U+=($-j)*ie,j=$;for(let H of k)if(H<j&&++U>t&&w("overflow"),H===j){let ne=U;for(let R=e;;R+=e){let K=R<=N?r:R>=N+s?s:R-N;if(ne<K)break;let le=ne-K,q=e-K;z.push(S(C(K+le%q,0))),ne=b(le/q)}z.push(S(C(ne,0))),N=O(U,ie,te===ae),U=0,++te}++U,++j}return z.join("")};return Sn={version:"2.3.1",ucs2:{decode:_,encode:A},decode:I,encode:T,toASCII:function(k){return y(k,function(z){return c.test(z)?"xn--"+T(z):z})},toUnicode:function(k){return y(k,function(z){return u.test(z)?I(z.slice(4).toLowerCase()):z})}},Sn}var Sn,Co,$t,Xf=ut(()=>{fe(),de(),pe(),Sn={},Co=!1,$t=Jf(),$t.decode,$t.encode,$t.toASCII,$t.toUnicode,$t.ucs2,$t.version});function Zf(){return Mo||(Mo=!0,Ro=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var s=42;t[e]=s;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var l=Object.getOwnPropertySymbols(t);if(l.length!==1||l[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var n=Object.getOwnPropertyDescriptor(t,e);if(n.value!==s||n.enumerable!==!0)return!1}return!0}),Ro}function ep(){return No||(No=!0,jo=Error),jo}function tp(){return Uo||(Uo=!0,Bo=EvalError),Bo}function rp(){return $o||($o=!0,Lo=RangeError),Lo}function np(){return Fo||(Fo=!0,Do=ReferenceError),Do}function qu(){return zo||(zo=!0,Wo=SyntaxError),Wo}function nn(){return Ho||(Ho=!0,qo=TypeError),qo}function ip(){return Ko||(Ko=!0,Vo=URIError),Vo}function op(){if(Go)return En;Go=!0;var t=typeof Symbol<"u"&&Symbol,e=Zf();return En=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},En}function sp(){if(Yo)return An;Yo=!0;var t={__proto__:null,foo:{}},e=Object;return An=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof e)},An}function ap(){if(Qo)return xn;Qo=!0;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,s="[object Function]",l=function(a,o){for(var u=[],c=0;c<a.length;c+=1)u[c]=a[c];for(var f=0;f<o.length;f+=1)u[f+a.length]=o[f];return u},n=function(a,o){for(var u=[],c=o,f=0;c<a.length;c+=1,f+=1)u[f]=a[c];return u},i=function(a,o){for(var u="",c=0;c<a.length;c+=1)u+=a[c],c+1<a.length&&(u+=o);return u};return xn=function(a){var o=this;if(typeof o!="function"||e.apply(o)!==s)throw new TypeError(t+o);for(var u=n(arguments,1),c,f=function(){if(this instanceof c){var w=o.apply(this,l(u,arguments));return Object(w)===w?w:this}return o.apply(a,l(u,arguments))},p=r(0,o.length-u.length),g=[],b=0;b<p;b++)g[b]="$"+b;if(c=Function("binder","return function ("+i(g,",")+"){ return binder.apply(this,arguments); }")(f),o.prototype){var S=function(){};S.prototype=o.prototype,c.prototype=new S,S.prototype=null}return c},xn}function Ns(){if(Jo)return In;Jo=!0;var t=ap();return In=Function.prototype.bind||t,In}function lp(){if(Xo)return kn;Xo=!0;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=Ns();return kn=r.call(t,e),kn}function Ir(){if(Zo)return Pn;Zo=!0;var t,e=ep(),r=tp(),s=rp(),l=np(),n=qu(),i=nn(),a=ip(),o=Function,u=function(te){try{return o('"use strict"; return ('+te+").constructor;")()}catch{}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch{c=null}var f=function(){throw new i},p=c?function(){try{return arguments.callee,f}catch{try{return c(arguments,"callee").get}catch{return f}}}():f,g=op()(),b=sp()(),S=Object.getPrototypeOf||(b?function(te){return te.__proto__}:null),w={},x=typeof Uint8Array>"u"||!S?t:S(Uint8Array),y={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":g&&S?S([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":w,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&S?S(S([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g||!S?t:S(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":s,"%ReferenceError%":l,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g||!S?t:S(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&S?S(""[Symbol.iterator]()):t,"%Symbol%":g?Symbol:t,"%SyntaxError%":n,"%ThrowTypeError%":p,"%TypedArray%":x,"%TypeError%":i,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet};if(S)try{null.error}catch(te){var _=S(S(te));y["%Error.prototype%"]=_}var A=function te($){var ie;if($==="%AsyncFunction%")ie=u("async function () {}");else if($==="%GeneratorFunction%")ie=u("function* () {}");else if($==="%AsyncGeneratorFunction%")ie=u("async function* () {}");else if($==="%AsyncGenerator%"){var H=te("%AsyncGeneratorFunction%");H&&(ie=H.prototype)}else if($==="%AsyncIteratorPrototype%"){var ne=te("%AsyncGenerator%");ne&&S&&(ie=S(ne.prototype))}return y[$]=ie,ie},v={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=Ns(),O=lp(),I=C.call(Function.call,Array.prototype.concat),T=C.call(Function.apply,Array.prototype.splice),k=C.call(Function.call,String.prototype.replace),z=C.call(Function.call,String.prototype.slice),E=C.call(Function.call,RegExp.prototype.exec),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U=/\\(\\)?/g,N=function(te){var $=z(te,0,1),ie=z(te,-1);if($==="%"&&ie!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(ie==="%"&&$!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var H=[];return k(te,j,function(ne,R,K,le){H[H.length]=K?k(le,U,"$1"):R||ne}),H},ae=function(te,$){var ie=te,H;if(O(v,ie)&&(H=v[ie],ie="%"+H[0]+"%"),O(y,ie)){var ne=y[ie];if(ne===w&&(ne=A(ie)),typeof ne>"u"&&!$)throw new i("intrinsic "+te+" exists, but is not available. Please file an issue!");return{alias:H,name:ie,value:ne}}throw new n("intrinsic "+te+" does not exist!")};return Pn=function(te,$){if(typeof te!="string"||te.length===0)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $!="boolean")throw new i('"allowMissing" argument must be a boolean');if(E(/^%?[^%]*%?$/,te)===null)throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ie=N(te),H=ie.length>0?ie[0]:"",ne=ae("%"+H+"%",$),R=ne.name,K=ne.value,le=!1,q=ne.alias;q&&(H=q[0],T(ie,I([0,1],q)));for(var _e=1,J=!0;_e<ie.length;_e+=1){var B=ie[_e],oe=z(B,0,1),G=z(B,-1);if((oe==='"'||oe==="'"||oe==="`"||G==='"'||G==="'"||G==="`")&&oe!==G)throw new n("property names with quotes must have matching quotes");if((B==="constructor"||!J)&&(le=!0),H+="."+B,R="%"+H+"%",O(y,R))K=y[R];else if(K!=null){if(!(B in K)){if(!$)throw new i("base intrinsic for "+te+" exists, but the property is not available.");return}if(c&&_e+1>=ie.length){var Q=c(K,B);J=!!Q,J&&"get"in Q&&!("originalValue"in Q.get)?K=Q.get:K=K[B]}else J=O(K,B),K=K[B];J&&!le&&(y[R]=K)}}return K},Pn}function Bs(){if(es)return Tn;es=!0;var t=Ir(),e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Tn=e,Tn}function Hu(){if(ts)return On;ts=!0;var t=Ir(),e=t("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return On=e,On}function up(){if(rs)return Cn;rs=!0;var t=Bs(),e=qu(),r=nn(),s=Hu();return Cn=function(l,n,i){if(!l||typeof l!="object"&&typeof l!="function")throw new r("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,f=!!s&&s(l,n);if(t)t(l,n,{configurable:u===null&&f?f.configurable:!u,enumerable:a===null&&f?f.enumerable:!a,value:i,writable:o===null&&f?f.writable:!o});else if(c||!a&&!o&&!u)l[n]=i;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Cn}function cp(){if(ns)return Rn;ns=!0;var t=Bs(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},Rn=e,Rn}function hp(){if(is)return Mn;is=!0;var t=Ir(),e=up(),r=cp()(),s=Hu(),l=nn(),n=t("%Math.floor%");return Mn=function(i,a){if(typeof i!="function")throw new l("`fn` is not a function");if(typeof a!="number"||a<0||a>4294967295||n(a)!==a)throw new l("`length` must be a positive 32-bit integer");var o=arguments.length>2&&!!arguments[2],u=!0,c=!0;if("length"in i&&s){var f=s(i,"length");f&&!f.configurable&&(u=!1),f&&!f.writable&&(c=!1)}return(u||c||!o)&&(r?e(i,"length",a,!0,!0):e(i,"length",a)),i},Mn}function fp(){if(os)return vr;os=!0;var t=Ns(),e=Ir(),r=hp(),s=nn(),l=e("%Function.prototype.apply%"),n=e("%Function.prototype.call%"),i=e("%Reflect.apply%",!0)||t.call(n,l),a=Bs(),o=e("%Math.max%");vr=function(c){if(typeof c!="function")throw new s("a function is required");var f=i(t,n,arguments);return r(f,1+o(0,c.length-(arguments.length-1)),!0)};var u=function(){return i(t,l,arguments)};return a?a(vr,"apply",{value:u}):vr.apply=u,vr}function pp(){if(ss)return jn;ss=!0;var t=Ir(),e=fp(),r=e(t("String.prototype.indexOf"));return jn=function(s,l){var n=t(s,!!l);return typeof n=="function"&&r(s,".prototype.")>-1?e(n):n},jn}var Ro,Mo,jo,No,Bo,Uo,Lo,$o,Do,Fo,Wo,zo,qo,Ho,Vo,Ko,En,Go,An,Yo,xn,Qo,In,Jo,kn,Xo,Pn,Zo,Tn,es,On,ts,Cn,rs,Rn,ns,Mn,is,vr,os,jn,ss,dp=ut(()=>{fe(),de(),pe(),Ro={},Mo=!1,jo={},No=!1,Bo={},Uo=!1,Lo={},$o=!1,Do={},Fo=!1,Wo={},zo=!1,qo={},Ho=!1,Vo={},Ko=!1,En={},Go=!1,An={},Yo=!1,xn={},Qo=!1,In={},Jo=!1,kn={},Xo=!1,Pn={},Zo=!1,Tn={},es=!1,On={},ts=!1,Cn={},rs=!1,Rn={},ns=!1,Mn={},is=!1,vr={},os=!1,jn={},ss=!1});function Us(t){throw new Error("Node.js process "+t+" is not supported by JSPM core outside of Node.js")}function gp(){!ar||!ir||(ar=!1,ir.length?mt=ir.concat(mt):Vr=-1,mt.length&&Vu())}function Vu(){if(!ar){var t=setTimeout(gp,0);ar=!0;for(var e=mt.length;e;){for(ir=mt,mt=[];++Vr<e;)ir&&ir[Vr].run();Vr=-1,e=mt.length}ir=null,ar=!1,clearTimeout(t)}}function yp(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];mt.push(new Ku(t,e)),mt.length===1&&!ar&&setTimeout(Vu,0)}function Ku(t,e){this.fun=t,this.array=e}function nt(){}function mp(t){Us("_linkedBinding")}function bp(t){Us("dlopen")}function vp(){return[]}function wp(){return[]}function _p(t,e){if(!t)throw new Error(e||"assertion error")}function Sp(){return!1}function Ep(){return xt.now()/1e3}function pi(t){var e=Math.floor((Date.now()-xt.now())*.001),r=xt.now()*.001,s=Math.floor(r)+e,l=Math.floor(r%1*1e9);return t&&(s=s-t[0],l=l-t[1],l<0&&(s--,l+=Nn)),[s,l]}function jt(){return Ls}function Ap(t){return[]}var mt,ar,ir,Vr,ha,fa,pa,da,ga,ya,ma,ba,va,wa,_a,Sa,Ea,Aa,xa,Ia,ka,Pa,Ta,Oa,Ca,cn,Ra,Ma,ja,Na,Ba,Ua,La,$a,Da,Fa,Wa,za,qa,Ha,Va,Ka,Ga,Ya,Qa,Ja,Xa,Za,el,tl,rl,xt,di,Nn,nl,il,ol,sl,al,ll,ul,cl,hl,fl,pl,Ls,Gu=ut(()=>{fe(),de(),pe(),mt=[],ar=!1,Vr=-1,Ku.prototype.run=function(){this.fun.apply(null,this.array)},ha="browser",fa="x64",pa="browser",da={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},ga=["/usr/bin/node"],ya=[],ma="v16.8.0",ba={},va=function(t,e){console.warn((e?e+": ":"")+t)},wa=function(t){Us("binding")},_a=function(t){return 0},Sa=function(){return"/"},Ea=function(t){},Aa={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},xa=nt,Ia=[],ka={},Pa=!1,Ta={},Oa=nt,Ca=nt,cn=function(){return{}},Ra=cn,Ma=cn,ja=nt,Na=nt,Ba=nt,Ua={},La={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},$a=nt,Da=nt,Fa=nt,Wa=nt,za=nt,qa=nt,Ha=nt,Va=void 0,Ka=void 0,Ga=void 0,Ya=nt,Qa=2,Ja=1,Xa="/bin/usr/node",Za=9229,el="node",tl=[],rl=nt,xt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},xt.now===void 0&&(di=Date.now(),xt.timing&&xt.timing.navigationStart&&(di=xt.timing.navigationStart),xt.now=()=>Date.now()-di),Nn=1e9,pi.bigint=function(t){var e=pi(t);return typeof BigInt>"u"?e[0]*Nn+e[1]:BigInt(e[0]*Nn)+BigInt(e[1])},nl=10,il={},ol=0,sl=jt,al=jt,ll=jt,ul=jt,cl=jt,hl=nt,fl=jt,pl=jt,Ls={version:ma,versions:ba,arch:fa,platform:pa,release:Aa,_rawDebug:xa,moduleLoadList:Ia,binding:wa,_linkedBinding:mp,_events:il,_eventsCount:ol,_maxListeners:nl,on:jt,addListener:sl,once:al,off:ll,removeListener:ul,removeAllListeners:cl,emit:hl,prependListener:fl,prependOnceListener:pl,listeners:Ap,domain:ka,_exiting:Pa,config:Ta,dlopen:bp,uptime:Ep,_getActiveRequests:vp,_getActiveHandles:wp,reallyExit:Oa,_kill:Ca,cpuUsage:cn,resourceUsage:Ra,memoryUsage:Ma,kill:ja,exit:Na,openStdin:Ba,allowedNodeEnvironmentFlags:Ua,assert:_p,features:La,_fatalExceptions:$a,setUncaughtExceptionCaptureCallback:Da,hasUncaughtExceptionCaptureCallback:Sp,emitWarning:va,nextTick:yp,_tickCallback:Fa,_debugProcess:Wa,_debugEnd:za,_startProfilerIdleNotifier:qa,_stopProfilerIdleNotifier:Ha,stdout:Va,stdin:Ga,stderr:Ka,abort:Ya,umask:_a,chdir:Ea,cwd:Sa,env:da,title:ha,argv:ga,execArgv:ya,pid:Qa,ppid:Ja,execPath:Xa,debugPort:Za,hrtime:pi,argv0:el,_preload_modules:tl,setSourceMapsEnabled:rl}});function xp(){if(as)return Bn;as=!0;var t=Ls;function e(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function r(n,i){for(var a="",o=0,u=-1,c=0,f,p=0;p<=n.length;++p){if(p<n.length)f=n.charCodeAt(p);else{if(f===47)break;f=47}if(f===47){if(!(u===p-1||c===1))if(u!==p-1&&c===2){if(a.length<2||o!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var g=a.lastIndexOf("/");if(g!==a.length-1){g===-1?(a="",o=0):(a=a.slice(0,g),o=a.length-1-a.lastIndexOf("/")),u=p,c=0;continue}}else if(a.length===2||a.length===1){a="",o=0,u=p,c=0;continue}}i&&(a.length>0?a+="/..":a="..",o=2)}else a.length>0?a+="/"+n.slice(u+1,p):a=n.slice(u+1,p),o=p-u-1;u=p,c=0}else f===46&&c!==-1?++c:c=-1}return a}function s(n,i){var a=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return a?a===i.root?a+o:a+n+o:o}var l={resolve:function(){for(var n="",i=!1,a,o=arguments.length-1;o>=-1&&!i;o--){var u;o>=0?u=arguments[o]:(a===void 0&&(a=t.cwd()),u=a),e(u),u.length!==0&&(n=u+"/"+n,i=u.charCodeAt(0)===47)}return n=r(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(e(n),n.length===0)return".";var i=n.charCodeAt(0)===47,a=n.charCodeAt(n.length-1)===47;return n=r(n,!i),n.length===0&&!i&&(n="."),n.length>0&&a&&(n+="/"),i?"/"+n:n},isAbsolute:function(n){return e(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,i=0;i<arguments.length;++i){var a=arguments[i];e(a),a.length>0&&(n===void 0?n=a:n+="/"+a)}return n===void 0?".":l.normalize(n)},relative:function(n,i){if(e(n),e(i),n===i||(n=l.resolve(n),i=l.resolve(i),n===i))return"";for(var a=1;a<n.length&&n.charCodeAt(a)===47;++a);for(var o=n.length,u=o-a,c=1;c<i.length&&i.charCodeAt(c)===47;++c);for(var f=i.length,p=f-c,g=u<p?u:p,b=-1,S=0;S<=g;++S){if(S===g){if(p>g){if(i.charCodeAt(c+S)===47)return i.slice(c+S+1);if(S===0)return i.slice(c+S)}else u>g&&(n.charCodeAt(a+S)===47?b=S:S===0&&(b=0));break}var w=n.charCodeAt(a+S),x=i.charCodeAt(c+S);if(w!==x)break;w===47&&(b=S)}var y="";for(S=a+b+1;S<=o;++S)(S===o||n.charCodeAt(S)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+i.slice(c+b):(c+=b,i.charCodeAt(c)===47&&++c,i.slice(c))},_makeLong:function(n){return n},dirname:function(n){if(e(n),n.length===0)return".";for(var i=n.charCodeAt(0),a=i===47,o=-1,u=!0,c=n.length-1;c>=1;--c)if(i=n.charCodeAt(c),i===47){if(!u){o=c;break}}else u=!1;return o===-1?a?"/":".":a&&o===1?"//":n.slice(0,o)},basename:function(n,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');e(n);var a=0,o=-1,u=!0,c;if(i!==void 0&&i.length>0&&i.length<=n.length){if(i.length===n.length&&i===n)return"";var f=i.length-1,p=-1;for(c=n.length-1;c>=0;--c){var g=n.charCodeAt(c);if(g===47){if(!u){a=c+1;break}}else p===-1&&(u=!1,p=c+1),f>=0&&(g===i.charCodeAt(f)?--f===-1&&(o=c):(f=-1,o=p))}return a===o?o=p:o===-1&&(o=n.length),n.slice(a,o)}else{for(c=n.length-1;c>=0;--c)if(n.charCodeAt(c)===47){if(!u){a=c+1;break}}else o===-1&&(u=!1,o=c+1);return o===-1?"":n.slice(a,o)}},extname:function(n){e(n);for(var i=-1,a=0,o=-1,u=!0,c=0,f=n.length-1;f>=0;--f){var p=n.charCodeAt(f);if(p===47){if(!u){a=f+1;break}continue}o===-1&&(u=!1,o=f+1),p===46?i===-1?i=f:c!==1&&(c=1):i!==-1&&(c=-1)}return i===-1||o===-1||c===0||c===1&&i===o-1&&i===a+1?"":n.slice(i,o)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return s("/",n)},parse:function(n){e(n);var i={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return i;var a=n.charCodeAt(0),o=a===47,u;o?(i.root="/",u=1):u=0;for(var c=-1,f=0,p=-1,g=!0,b=n.length-1,S=0;b>=u;--b){if(a=n.charCodeAt(b),a===47){if(!g){f=b+1;break}continue}p===-1&&(g=!1,p=b+1),a===46?c===-1?c=b:S!==1&&(S=1):c!==-1&&(S=-1)}return c===-1||p===-1||S===0||S===1&&c===p-1&&c===f+1?p!==-1&&(f===0&&o?i.base=i.name=n.slice(1,p):i.base=i.name=n.slice(f,p)):(f===0&&o?(i.name=n.slice(1,c),i.base=n.slice(1,p)):(i.name=n.slice(f,c),i.base=n.slice(f,p)),i.ext=n.slice(c,p)),f>0?i.dir=n.slice(0,f-1):o&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return l.posix=l,Bn=l,Bn}var Bn,as,ls,Ip=ut(()=>{fe(),de(),pe(),Gu(),Bn={},as=!1,ls=xp()}),Yu={};Er(Yu,{URL:()=>oc,Url:()=>ec,default:()=>it,fileURLToPath:()=>Ju,format:()=>tc,parse:()=>ic,pathToFileURL:()=>Xu,resolve:()=>rc,resolveObject:()=>nc});function kp(){if(us)return Un;us=!0;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=t&&e&&typeof e.get=="function"?e.get:null,s=t&&Map.prototype.forEach,l=typeof Set=="function"&&Set.prototype,n=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,i=l&&n&&typeof n.get=="function"?n.get:null,a=l&&Set.prototype.forEach,o=typeof WeakMap=="function"&&WeakMap.prototype,u=o?WeakMap.prototype.has:null,c=typeof WeakSet=="function"&&WeakSet.prototype,f=c?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,g=p?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,S=Object.prototype.toString,w=Function.prototype.toString,x=String.prototype.match,y=String.prototype.slice,_=String.prototype.replace,A=String.prototype.toUpperCase,v=String.prototype.toLowerCase,C=RegExp.prototype.test,O=Array.prototype.concat,I=Array.prototype.join,T=Array.prototype.slice,k=Math.floor,z=typeof BigInt=="function"?BigInt.prototype.valueOf:null,E=Object.getOwnPropertySymbols,j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,U=typeof Symbol=="function"&&typeof Symbol.iterator=="object",N=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===U||!0)?Symbol.toStringTag:null,ae=Object.prototype.propertyIsEnumerable,te=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(V){return V.__proto__}:null);function $(V,ee){if(V===1/0||V===-1/0||V!==V||V&&V>-1e3&&V<1e3||C.call(/e/,ee))return ee;var Ae=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof V=="number"){var ke=V<0?-k(-V):k(V);if(ke!==V){var Pe=String(ke),je=y.call(ee,Pe.length+1);return _.call(Pe,Ae,"$&_")+"."+_.call(_.call(je,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(ee,Ae,"$&_")}var ie=Zu,H=ie.custom,ne=Q(H)?H:null;Un=function V(ee,Ae,ke,Pe){var je=Ae||{};if(ce(je,"quoteStyle")&&je.quoteStyle!=="single"&&je.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ce(je,"maxStringLength")&&(typeof je.maxStringLength=="number"?je.maxStringLength<0&&je.maxStringLength!==1/0:je.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var qe=ce(je,"customInspect")?je.customInspect:!0;if(typeof qe!="boolean"&&qe!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ce(je,"indent")&&je.indent!==null&&je.indent!=="	"&&!(parseInt(je.indent,10)===je.indent&&je.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ce(je,"numericSeparator")&&typeof je.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Ke=je.numericSeparator;if(typeof ee>"u")return"undefined";if(ee===null)return"null";if(typeof ee=="boolean")return ee?"true":"false";if(typeof ee=="string")return he(ee,je);if(typeof ee=="number"){if(ee===0)return 1/0/ee>0?"0":"-0";var Ne=String(ee);return Ke?$(ee,Ne):Ne}if(typeof ee=="bigint"){var Fe=String(ee)+"n";return Ke?$(ee,Fe):Fe}var Ce=typeof je.depth>"u"?5:je.depth;if(typeof ke>"u"&&(ke=0),ke>=Ce&&Ce>0&&typeof ee=="object")return le(ee)?"[Array]":"[Object]";var Be=L(je,ke);if(typeof Pe>"u")Pe=[];else if(ue(Pe,ee)>=0)return"[Circular]";function $e(dt,Mt,Qt){if(Mt&&(Pe=T.call(Pe),Pe.push(Mt)),Qt){var gt={depth:je.depth};return ce(je,"quoteStyle")&&(gt.quoteStyle=je.quoteStyle),V(dt,gt,ke+1,Pe)}return V(dt,je,ke+1,Pe)}if(typeof ee=="function"&&!_e(ee)){var Ve=X(ee),Xe=se(ee,$e);return"[Function"+(Ve?": "+Ve:" (anonymous)")+"]"+(Xe.length>0?" { "+I.call(Xe,", ")+" }":"")}if(Q(ee)){var ft=U?_.call(String(ee),/^(Symbol\(.*\))_[^)]*$/,"$1"):j.call(ee);return typeof ee=="object"&&!U?h(ft):ft}if(Ee(ee)){for(var M="<"+v.call(String(ee.nodeName)),F=ee.attributes||[],Se=0;Se<F.length;Se++)M+=" "+F[Se].name+"="+R(K(F[Se].value),"double",je);return M+=">",ee.childNodes&&ee.childNodes.length&&(M+="..."),M+="</"+v.call(String(ee.nodeName))+">",M}if(le(ee)){if(ee.length===0)return"[]";var Ie=se(ee,$e);return Be&&!P(Ie)?"["+Y(Ie,Be)+"]":"[ "+I.call(Ie,", ")+" ]"}if(J(ee)){var Te=se(ee,$e);return!("cause"in Error.prototype)&&"cause"in ee&&!ae.call(ee,"cause")?"{ ["+String(ee)+"] "+I.call(O.call("[cause]: "+$e(ee.cause),Te),", ")+" }":Te.length===0?"["+String(ee)+"]":"{ ["+String(ee)+"] "+I.call(Te,", ")+" }"}if(typeof ee=="object"&&qe){if(ne&&typeof ee[ne]=="function"&&ie)return ie(ee,{depth:Ce-ke});if(qe!=="symbol"&&typeof ee.inspect=="function")return ee.inspect()}if(me(ee)){var Je=[];return s&&s.call(ee,function(dt,Mt){Je.push($e(Mt,ee,!0)+" => "+$e(dt,ee))}),m("Map",r.call(ee),Je,Be)}if(re(ee)){var ot=[];return a&&a.call(ee,function(dt){ot.push($e(dt,ee))}),m("Set",i.call(ee),ot,Be)}if(ye(ee))return d("WeakMap");if(ve(ee))return d("WeakSet");if(we(ee))return d("WeakRef");if(oe(ee))return h($e(Number(ee)));if(Z(ee))return h($e(z.call(ee)));if(G(ee))return h(b.call(ee));if(B(ee))return h($e(String(ee)));if(typeof window<"u"&&ee===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ee===globalThis||typeof Ln<"u"&&ee===Ln)return"{ [object globalThis] }";if(!q(ee)&&!_e(ee)){var pt=se(ee,$e),Pr=te?te(ee)===Object.prototype:ee instanceof Object||ee.constructor===Object,Tr=ee instanceof Object?"":"null prototype",Or=!Pr&&N&&Object(ee)===ee&&N in ee?y.call(D(ee),8,-1):Tr?"Object":"",on=Pr||typeof ee.constructor!="function"?"":ee.constructor.name?ee.constructor.name+" ":"",Yt=on+(Or||Tr?"["+I.call(O.call([],Or||[],Tr||[]),": ")+"] ":"");return pt.length===0?Yt+"{}":Be?Yt+"{"+Y(pt,Be)+"}":Yt+"{ "+I.call(pt,", ")+" }"}return String(ee)};function R(V,ee,Ae){var ke=(Ae.quoteStyle||ee)==="double"?'"':"'";return ke+V+ke}function K(V){return _.call(String(V),/"/g,"&quot;")}function le(V){return D(V)==="[object Array]"&&(!N||!(typeof V=="object"&&N in V))}function q(V){return D(V)==="[object Date]"&&(!N||!(typeof V=="object"&&N in V))}function _e(V){return D(V)==="[object RegExp]"&&(!N||!(typeof V=="object"&&N in V))}function J(V){return D(V)==="[object Error]"&&(!N||!(typeof V=="object"&&N in V))}function B(V){return D(V)==="[object String]"&&(!N||!(typeof V=="object"&&N in V))}function oe(V){return D(V)==="[object Number]"&&(!N||!(typeof V=="object"&&N in V))}function G(V){return D(V)==="[object Boolean]"&&(!N||!(typeof V=="object"&&N in V))}function Q(V){if(U)return V&&typeof V=="object"&&V instanceof Symbol;if(typeof V=="symbol")return!0;if(!V||typeof V!="object"||!j)return!1;try{return j.call(V),!0}catch{}return!1}function Z(V){if(!V||typeof V!="object"||!z)return!1;try{return z.call(V),!0}catch{}return!1}var ge=Object.prototype.hasOwnProperty||function(V){return V in(this||Ln)};function ce(V,ee){return ge.call(V,ee)}function D(V){return S.call(V)}function X(V){if(V.name)return V.name;var ee=x.call(w.call(V),/^function\s*([\w$]+)/);return ee?ee[1]:null}function ue(V,ee){if(V.indexOf)return V.indexOf(ee);for(var Ae=0,ke=V.length;Ae<ke;Ae++)if(V[Ae]===ee)return Ae;return-1}function me(V){if(!r||!V||typeof V!="object")return!1;try{r.call(V);try{i.call(V)}catch{return!0}return V instanceof Map}catch{}return!1}function ye(V){if(!u||!V||typeof V!="object")return!1;try{u.call(V,u);try{f.call(V,f)}catch{return!0}return V instanceof WeakMap}catch{}return!1}function we(V){if(!g||!V||typeof V!="object")return!1;try{return g.call(V),!0}catch{}return!1}function re(V){if(!i||!V||typeof V!="object")return!1;try{i.call(V);try{r.call(V)}catch{return!0}return V instanceof Set}catch{}return!1}function ve(V){if(!f||!V||typeof V!="object")return!1;try{f.call(V,f);try{u.call(V,u)}catch{return!0}return V instanceof WeakSet}catch{}return!1}function Ee(V){return!V||typeof V!="object"?!1:typeof HTMLElement<"u"&&V instanceof HTMLElement?!0:typeof V.nodeName=="string"&&typeof V.getAttribute=="function"}function he(V,ee){if(V.length>ee.maxStringLength){var Ae=V.length-ee.maxStringLength,ke="... "+Ae+" more character"+(Ae>1?"s":"");return he(y.call(V,0,ee.maxStringLength),ee)+ke}var Pe=_.call(_.call(V,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Me);return R(Pe,"single",ee)}function Me(V){var ee=V.charCodeAt(0),Ae={8:"b",9:"t",10:"n",12:"f",13:"r"}[ee];return Ae?"\\"+Ae:"\\x"+(ee<16?"0":"")+A.call(ee.toString(16))}function h(V){return"Object("+V+")"}function d(V){return V+" { ? }"}function m(V,ee,Ae,ke){var Pe=ke?Y(Ae,ke):I.call(Ae,", ");return V+" ("+ee+") {"+Pe+"}"}function P(V){for(var ee=0;ee<V.length;ee++)if(ue(V[ee],`
`)>=0)return!1;return!0}function L(V,ee){var Ae;if(V.indent==="	")Ae="	";else if(typeof V.indent=="number"&&V.indent>0)Ae=I.call(Array(V.indent+1)," ");else return null;return{base:Ae,prev:I.call(Array(ee+1),Ae)}}function Y(V,ee){if(V.length===0)return"";var Ae=`
`+ee.prev+ee.base;return Ae+I.call(V,","+Ae)+`
`+ee.prev}function se(V,ee){var Ae=le(V),ke=[];if(Ae){ke.length=V.length;for(var Pe=0;Pe<V.length;Pe++)ke[Pe]=ce(V,Pe)?ee(V[Pe],V):""}var je=typeof E=="function"?E(V):[],qe;if(U){qe={};for(var Ke=0;Ke<je.length;Ke++)qe["$"+je[Ke]]=je[Ke]}for(var Ne in V)ce(V,Ne)&&(Ae&&String(Number(Ne))===Ne&&Ne<V.length||U&&qe["$"+Ne]instanceof Symbol||(C.call(/[^\w$]/,Ne)?ke.push(ee(Ne,V)+": "+ee(V[Ne],V)):ke.push(Ne+": "+ee(V[Ne],V))));if(typeof E=="function")for(var Fe=0;Fe<je.length;Fe++)ae.call(V,je[Fe])&&ke.push("["+ee(je[Fe])+"]: "+ee(V[je[Fe]],V));return ke}return Un}function Pp(){if(cs)return $n;cs=!0;var t=Ir(),e=pp(),r=kp(),s=nn(),l=t("%WeakMap%",!0),n=t("%Map%",!0),i=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),o=e("WeakMap.prototype.has",!0),u=e("Map.prototype.get",!0),c=e("Map.prototype.set",!0),f=e("Map.prototype.has",!0),p=function(w,x){for(var y=w,_;(_=y.next)!==null;y=_)if(_.key===x)return y.next=_.next,_.next=w.next,w.next=_,_},g=function(w,x){var y=p(w,x);return y&&y.value},b=function(w,x,y){var _=p(w,x);_?_.value=y:w.next={key:x,next:w.next,value:y}},S=function(w,x){return!!p(w,x)};return $n=function(){var w,x,y,_={assert:function(A){if(!_.has(A))throw new s("Side channel does not contain "+r(A))},get:function(A){if(l&&A&&(typeof A=="object"||typeof A=="function")){if(w)return i(w,A)}else if(n){if(x)return u(x,A)}else if(y)return g(y,A)},has:function(A){if(l&&A&&(typeof A=="object"||typeof A=="function")){if(w)return o(w,A)}else if(n){if(x)return f(x,A)}else if(y)return S(y,A);return!1},set:function(A,v){l&&A&&(typeof A=="object"||typeof A=="function")?(w||(w=new l),a(w,A,v)):n?(x||(x=new n),c(x,A,v)):(y||(y={key:{},next:null}),b(y,A,v))}};return _},$n}function $s(){if(hs)return Dn;hs=!0;var t=String.prototype.replace,e=/%20/g,r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Dn={default:r.RFC3986,formatters:{RFC1738:function(s){return t.call(s,e,"+")},RFC3986:function(s){return String(s)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986},Dn}function Qu(){if(fs)return Fn;fs=!0;var t=$s(),e=Object.prototype.hasOwnProperty,r=Array.isArray,s=function(){for(var w=[],x=0;x<256;++x)w.push("%"+((x<16?"0":"")+x.toString(16)).toUpperCase());return w}(),l=function(w){for(;w.length>1;){var x=w.pop(),y=x.obj[x.prop];if(r(y)){for(var _=[],A=0;A<y.length;++A)typeof y[A]<"u"&&_.push(y[A]);x.obj[x.prop]=_}}},n=function(w,x){for(var y=x&&x.plainObjects?Object.create(null):{},_=0;_<w.length;++_)typeof w[_]<"u"&&(y[_]=w[_]);return y},i=function w(x,y,_){if(!y)return x;if(typeof y!="object"){if(r(x))x.push(y);else if(x&&typeof x=="object")(_&&(_.plainObjects||_.allowPrototypes)||!e.call(Object.prototype,y))&&(x[y]=!0);else return[x,y];return x}if(!x||typeof x!="object")return[x].concat(y);var A=x;return r(x)&&!r(y)&&(A=n(x,_)),r(x)&&r(y)?(y.forEach(function(v,C){if(e.call(x,C)){var O=x[C];O&&typeof O=="object"&&v&&typeof v=="object"?x[C]=w(O,v,_):x.push(v)}else x[C]=v}),x):Object.keys(y).reduce(function(v,C){var O=y[C];return e.call(v,C)?v[C]=w(v[C],O,_):v[C]=O,v},A)},a=function(w,x){return Object.keys(x).reduce(function(y,_){return y[_]=x[_],y},w)},o=function(w,x,y){var _=w.replace(/\+/g," ");if(y==="iso-8859-1")return _.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(_)}catch{return _}},u=1024,c=function(w,x,y,_,A){if(w.length===0)return w;var v=w;if(typeof w=="symbol"?v=Symbol.prototype.toString.call(w):typeof w!="string"&&(v=String(w)),y==="iso-8859-1")return escape(v).replace(/%u[0-9a-f]{4}/gi,function(E){return"%26%23"+parseInt(E.slice(2),16)+"%3B"});for(var C="",O=0;O<v.length;O+=u){for(var I=v.length>=u?v.slice(O,O+u):v,T=[],k=0;k<I.length;++k){var z=I.charCodeAt(k);if(z===45||z===46||z===95||z===126||z>=48&&z<=57||z>=65&&z<=90||z>=97&&z<=122||A===t.RFC1738&&(z===40||z===41)){T[T.length]=I.charAt(k);continue}if(z<128){T[T.length]=s[z];continue}if(z<2048){T[T.length]=s[192|z>>6]+s[128|z&63];continue}if(z<55296||z>=57344){T[T.length]=s[224|z>>12]+s[128|z>>6&63]+s[128|z&63];continue}k+=1,z=65536+((z&1023)<<10|I.charCodeAt(k)&1023),T[T.length]=s[240|z>>18]+s[128|z>>12&63]+s[128|z>>6&63]+s[128|z&63]}C+=T.join("")}return C},f=function(w){for(var x=[{obj:{o:w},prop:"o"}],y=[],_=0;_<x.length;++_)for(var A=x[_],v=A.obj[A.prop],C=Object.keys(v),O=0;O<C.length;++O){var I=C[O],T=v[I];typeof T=="object"&&T!==null&&y.indexOf(T)===-1&&(x.push({obj:v,prop:I}),y.push(T))}return l(x),w},p=function(w){return Object.prototype.toString.call(w)==="[object RegExp]"},g=function(w){return!w||typeof w!="object"?!1:!!(w.constructor&&w.constructor.isBuffer&&w.constructor.isBuffer(w))},b=function(w,x){return[].concat(w,x)},S=function(w,x){if(r(w)){for(var y=[],_=0;_<w.length;_+=1)y.push(x(w[_]));return y}return x(w)};return Fn={arrayToObject:n,assign:a,combine:b,compact:f,decode:o,encode:c,isBuffer:g,isRegExp:p,maybeMap:S,merge:i},Fn}function Tp(){if(ps)return Wn;ps=!0;var t=Pp(),e=Qu(),r=$s(),s=Object.prototype.hasOwnProperty,l={brackets:function(S){return S+"[]"},comma:"comma",indices:function(S,w){return S+"["+w+"]"},repeat:function(S){return S}},n=Array.isArray,i=Array.prototype.push,a=function(S,w){i.apply(S,n(w)?w:[w])},o=Date.prototype.toISOString,u=r.default,c={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:u,formatter:r.formatters[u],indices:!1,serializeDate:function(S){return o.call(S)},skipNulls:!1,strictNullHandling:!1},f=function(S){return typeof S=="string"||typeof S=="number"||typeof S=="boolean"||typeof S=="symbol"||typeof S=="bigint"},p={},g=function S(w,x,y,_,A,v,C,O,I,T,k,z,E,j,U,N,ae,te){for(var $=w,ie=te,H=0,ne=!1;(ie=ie.get(p))!==void 0&&!ne;){var R=ie.get(w);if(H+=1,typeof R<"u"){if(R===H)throw new RangeError("Cyclic object value");ne=!0}typeof ie.get(p)>"u"&&(H=0)}if(typeof T=="function"?$=T(x,$):$ instanceof Date?$=E($):y==="comma"&&n($)&&($=e.maybeMap($,function(D){return D instanceof Date?E(D):D})),$===null){if(v)return I&&!N?I(x,c.encoder,ae,"key",j):x;$=""}if(f($)||e.isBuffer($)){if(I){var K=N?x:I(x,c.encoder,ae,"key",j);return[U(K)+"="+U(I($,c.encoder,ae,"value",j))]}return[U(x)+"="+U(String($))]}var le=[];if(typeof $>"u")return le;var q;if(y==="comma"&&n($))N&&I&&($=e.maybeMap($,I)),q=[{value:$.length>0?$.join(",")||null:void 0}];else if(n(T))q=T;else{var _e=Object.keys($);q=k?_e.sort(k):_e}var J=O?x.replace(/\./g,"%2E"):x,B=_&&n($)&&$.length===1?J+"[]":J;if(A&&n($)&&$.length===0)return B+"[]";for(var oe=0;oe<q.length;++oe){var G=q[oe],Q=typeof G=="object"&&typeof G.value<"u"?G.value:$[G];if(!(C&&Q===null)){var Z=z&&O?G.replace(/\./g,"%2E"):G,ge=n($)?typeof y=="function"?y(B,Z):B:B+(z?"."+Z:"["+Z+"]");te.set(w,H);var ce=t();ce.set(p,te),a(le,S(Q,ge,y,_,A,v,C,O,y==="comma"&&N&&n($)?null:I,T,k,z,E,j,U,N,ae,ce))}}return le},b=function(S){if(!S)return c;if(typeof S.allowEmptyArrays<"u"&&typeof S.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof S.encodeDotInKeys<"u"&&typeof S.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(S.encoder!==null&&typeof S.encoder<"u"&&typeof S.encoder!="function")throw new TypeError("Encoder has to be a function.");var w=S.charset||c.charset;if(typeof S.charset<"u"&&S.charset!=="utf-8"&&S.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var x=r.default;if(typeof S.format<"u"){if(!s.call(r.formatters,S.format))throw new TypeError("Unknown format option provided.");x=S.format}var y=r.formatters[x],_=c.filter;(typeof S.filter=="function"||n(S.filter))&&(_=S.filter);var A;if(S.arrayFormat in l?A=S.arrayFormat:"indices"in S?A=S.indices?"indices":"repeat":A=c.arrayFormat,"commaRoundTrip"in S&&typeof S.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var v=typeof S.allowDots>"u"?S.encodeDotInKeys===!0?!0:c.allowDots:!!S.allowDots;return{addQueryPrefix:typeof S.addQueryPrefix=="boolean"?S.addQueryPrefix:c.addQueryPrefix,allowDots:v,allowEmptyArrays:typeof S.allowEmptyArrays=="boolean"?!!S.allowEmptyArrays:c.allowEmptyArrays,arrayFormat:A,charset:w,charsetSentinel:typeof S.charsetSentinel=="boolean"?S.charsetSentinel:c.charsetSentinel,commaRoundTrip:S.commaRoundTrip,delimiter:typeof S.delimiter>"u"?c.delimiter:S.delimiter,encode:typeof S.encode=="boolean"?S.encode:c.encode,encodeDotInKeys:typeof S.encodeDotInKeys=="boolean"?S.encodeDotInKeys:c.encodeDotInKeys,encoder:typeof S.encoder=="function"?S.encoder:c.encoder,encodeValuesOnly:typeof S.encodeValuesOnly=="boolean"?S.encodeValuesOnly:c.encodeValuesOnly,filter:_,format:x,formatter:y,serializeDate:typeof S.serializeDate=="function"?S.serializeDate:c.serializeDate,skipNulls:typeof S.skipNulls=="boolean"?S.skipNulls:c.skipNulls,sort:typeof S.sort=="function"?S.sort:null,strictNullHandling:typeof S.strictNullHandling=="boolean"?S.strictNullHandling:c.strictNullHandling}};return Wn=function(S,w){var x=S,y=b(w),_,A;typeof y.filter=="function"?(A=y.filter,x=A("",x)):n(y.filter)&&(A=y.filter,_=A);var v=[];if(typeof x!="object"||x===null)return"";var C=l[y.arrayFormat],O=C==="comma"&&y.commaRoundTrip;_||(_=Object.keys(x)),y.sort&&_.sort(y.sort);for(var I=t(),T=0;T<_.length;++T){var k=_[T];y.skipNulls&&x[k]===null||a(v,g(x[k],k,C,O,y.allowEmptyArrays,y.strictNullHandling,y.skipNulls,y.encodeDotInKeys,y.encode?y.encoder:null,y.filter,y.sort,y.allowDots,y.serializeDate,y.format,y.formatter,y.encodeValuesOnly,y.charset,I))}var z=v.join(y.delimiter),E=y.addQueryPrefix===!0?"?":"";return y.charsetSentinel&&(y.charset==="iso-8859-1"?E+="utf8=%26%2310003%3B&":E+="utf8=%E2%9C%93&"),z.length>0?E+z:""},Wn}function Op(){if(ds)return zn;ds=!0;var t=Qu(),e=Object.prototype.hasOwnProperty,r=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},l=function(p){return p.replace(/&#(\d+);/g,function(g,b){return String.fromCharCode(parseInt(b,10))})},n=function(p,g){return p&&typeof p=="string"&&g.comma&&p.indexOf(",")>-1?p.split(","):p},i="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",o=function(p,g){var b={__proto__:null},S=g.ignoreQueryPrefix?p.replace(/^\?/,""):p;S=S.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var w=g.parameterLimit===1/0?void 0:g.parameterLimit,x=S.split(g.delimiter,w),y=-1,_,A=g.charset;if(g.charsetSentinel)for(_=0;_<x.length;++_)x[_].indexOf("utf8=")===0&&(x[_]===a?A="utf-8":x[_]===i&&(A="iso-8859-1"),y=_,_=x.length);for(_=0;_<x.length;++_)if(_!==y){var v=x[_],C=v.indexOf("]="),O=C===-1?v.indexOf("="):C+1,I,T;O===-1?(I=g.decoder(v,s.decoder,A,"key"),T=g.strictNullHandling?null:""):(I=g.decoder(v.slice(0,O),s.decoder,A,"key"),T=t.maybeMap(n(v.slice(O+1),g),function(z){return g.decoder(z,s.decoder,A,"value")})),T&&g.interpretNumericEntities&&A==="iso-8859-1"&&(T=l(T)),v.indexOf("[]=")>-1&&(T=r(T)?[T]:T);var k=e.call(b,I);k&&g.duplicates==="combine"?b[I]=t.combine(b[I],T):(!k||g.duplicates==="last")&&(b[I]=T)}return b},u=function(p,g,b,S){for(var w=S?g:n(g,b),x=p.length-1;x>=0;--x){var y,_=p[x];if(_==="[]"&&b.parseArrays)y=b.allowEmptyArrays&&(w===""||b.strictNullHandling&&w===null)?[]:[].concat(w);else{y=b.plainObjects?Object.create(null):{};var A=_.charAt(0)==="["&&_.charAt(_.length-1)==="]"?_.slice(1,-1):_,v=b.decodeDotInKeys?A.replace(/%2E/g,"."):A,C=parseInt(v,10);!b.parseArrays&&v===""?y={0:w}:!isNaN(C)&&_!==v&&String(C)===v&&C>=0&&b.parseArrays&&C<=b.arrayLimit?(y=[],y[C]=w):v!=="__proto__"&&(y[v]=w)}w=y}return w},c=function(p,g,b,S){if(p){var w=b.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,x=/(\[[^[\]]*])/,y=/(\[[^[\]]*])/g,_=b.depth>0&&x.exec(w),A=_?w.slice(0,_.index):w,v=[];if(A){if(!b.plainObjects&&e.call(Object.prototype,A)&&!b.allowPrototypes)return;v.push(A)}for(var C=0;b.depth>0&&(_=y.exec(w))!==null&&C<b.depth;){if(C+=1,!b.plainObjects&&e.call(Object.prototype,_[1].slice(1,-1))&&!b.allowPrototypes)return;v.push(_[1])}if(_){if(b.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+b.depth+" and strictDepth is true");v.push("["+w.slice(_.index)+"]")}return u(v,g,b,S)}},f=function(p){if(!p)return s;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.decodeDotInKeys<"u"&&typeof p.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(p.decoder!==null&&typeof p.decoder<"u"&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var g=typeof p.charset>"u"?s.charset:p.charset,b=typeof p.duplicates>"u"?s.duplicates:p.duplicates;if(b!=="combine"&&b!=="first"&&b!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var S=typeof p.allowDots>"u"?p.decodeDotInKeys===!0?!0:s.allowDots:!!p.allowDots;return{allowDots:S,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:s.allowPrototypes,allowSparse:typeof p.allowSparse=="boolean"?p.allowSparse:s.allowSparse,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:s.arrayLimit,charset:g,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:s.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:s.comma,decodeDotInKeys:typeof p.decodeDotInKeys=="boolean"?p.decodeDotInKeys:s.decodeDotInKeys,decoder:typeof p.decoder=="function"?p.decoder:s.decoder,delimiter:typeof p.delimiter=="string"||t.isRegExp(p.delimiter)?p.delimiter:s.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:s.depth,duplicates:b,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:s.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:s.plainObjects,strictDepth:typeof p.strictDepth=="boolean"?!!p.strictDepth:s.strictDepth,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:s.strictNullHandling}};return zn=function(p,g){var b=f(g);if(p===""||p===null||typeof p>"u")return b.plainObjects?Object.create(null):{};for(var S=typeof p=="string"?o(p,b):p,w=b.plainObjects?Object.create(null):{},x=Object.keys(S),y=0;y<x.length;++y){var _=x[y],A=c(_,S[_],b,typeof p=="string");w=t.merge(w,A,b)}return b.allowSparse===!0?w:t.compact(w)},zn}function Cp(){if(gs)return qn;gs=!0;var t=Tp(),e=Op(),r=$s();return qn={formats:r,parse:e,stringify:t},qn}function Rp(){if(ys)return Dt;ys=!0;var t=$t;function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var r=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r",`
`,"	"],i=["{","}","|","\\","^","`"].concat(n),a=["'"].concat(i),o=["%","/","?",";","#"].concat(a),u=["/","?","#"],c=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=Cp();function x(v,C,O){if(v&&typeof v=="object"&&v instanceof e)return v;var I=new e;return I.parse(v,C,O),I}e.prototype.parse=function(v,C,O){if(typeof v!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof v);var I=v.indexOf("?"),T=I!==-1&&I<v.indexOf("#")?"?":"#",k=v.split(T),z=/\\/g;k[0]=k[0].replace(z,"/"),v=k.join(T);var E=v;if(E=E.trim(),!O&&v.split("#").length===1){var j=l.exec(E);if(j)return this.path=E,this.href=E,this.pathname=j[1],j[2]?(this.search=j[2],C?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):C&&(this.search="",this.query={}),this}var U=r.exec(E);if(U){U=U[0];var N=U.toLowerCase();this.protocol=N,E=E.substr(U.length)}if(O||U||E.match(/^\/\/[^@/]+@[^@/]+/)){var ae=E.substr(0,2)==="//";ae&&!(U&&b[U])&&(E=E.substr(2),this.slashes=!0)}if(!b[U]&&(ae||U&&!S[U])){for(var te=-1,$=0;$<u.length;$++){var ie=E.indexOf(u[$]);ie!==-1&&(te===-1||ie<te)&&(te=ie)}var H,ne;te===-1?ne=E.lastIndexOf("@"):ne=E.lastIndexOf("@",te),ne!==-1&&(H=E.slice(0,ne),E=E.slice(ne+1),this.auth=decodeURIComponent(H)),te=-1;for(var $=0;$<o.length;$++){var ie=E.indexOf(o[$]);ie!==-1&&(te===-1||ie<te)&&(te=ie)}te===-1&&(te=E.length),this.host=E.slice(0,te),E=E.slice(te),this.parseHost(),this.hostname=this.hostname||"";var R=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!R)for(var K=this.hostname.split(/\./),$=0,le=K.length;$<le;$++){var q=K[$];if(q&&!q.match(f)){for(var _e="",J=0,B=q.length;J<B;J++)q.charCodeAt(J)>127?_e+="x":_e+=q[J];if(!_e.match(f)){var oe=K.slice(0,$),G=K.slice($+1),Q=q.match(p);Q&&(oe.push(Q[1]),G.unshift(Q[2])),G.length&&(E="/"+G.join(".")+E),this.hostname=oe.join(".");break}}}this.hostname.length>c?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=t.toASCII(this.hostname));var Z=this.port?":"+this.port:"",ge=this.hostname||"";this.host=ge+Z,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),E[0]!=="/"&&(E="/"+E))}if(!g[N])for(var $=0,le=a.length;$<le;$++){var ce=a[$];if(E.indexOf(ce)!==-1){var D=encodeURIComponent(ce);D===ce&&(D=escape(ce)),E=E.split(ce).join(D)}}var X=E.indexOf("#");X!==-1&&(this.hash=E.substr(X),E=E.slice(0,X));var ue=E.indexOf("?");if(ue!==-1?(this.search=E.substr(ue),this.query=E.substr(ue+1),C&&(this.query=w.parse(this.query)),E=E.slice(0,ue)):C&&(this.search="",this.query={}),E&&(this.pathname=E),S[N]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Z=this.pathname||"",me=this.search||"";this.path=Z+me}return this.href=this.format(),this};function y(v){return typeof v=="string"&&(v=x(v)),v instanceof e?v.format():e.prototype.format.call(v)}e.prototype.format=function(){var v=this.auth||"";v&&(v=encodeURIComponent(v),v=v.replace(/%3A/i,":"),v+="@");var C=this.protocol||"",O=this.pathname||"",I=this.hash||"",T=!1,k="";this.host?T=v+this.host:this.hostname&&(T=v+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(T+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(k=w.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var z=this.search||k&&"?"+k||"";return C&&C.substr(-1)!==":"&&(C+=":"),this.slashes||(!C||S[C])&&T!==!1?(T="//"+(T||""),O&&O.charAt(0)!=="/"&&(O="/"+O)):T||(T=""),I&&I.charAt(0)!=="#"&&(I="#"+I),z&&z.charAt(0)!=="?"&&(z="?"+z),O=O.replace(/[?#]/g,function(E){return encodeURIComponent(E)}),z=z.replace("#","%23"),C+T+O+z+I};function _(v,C){return x(v,!1,!0).resolve(C)}e.prototype.resolve=function(v){return this.resolveObject(x(v,!1,!0)).format()};function A(v,C){return v?x(v,!1,!0).resolveObject(C):C}return e.prototype.resolveObject=function(v){if(typeof v=="string"){var C=new e;C.parse(v,!1,!0),v=C}for(var O=new e,I=Object.keys(this),T=0;T<I.length;T++){var k=I[T];O[k]=this[k]}if(O.hash=v.hash,v.href==="")return O.href=O.format(),O;if(v.slashes&&!v.protocol){for(var z=Object.keys(v),E=0;E<z.length;E++){var j=z[E];j!=="protocol"&&(O[j]=v[j])}return S[O.protocol]&&O.hostname&&!O.pathname&&(O.pathname="/",O.path=O.pathname),O.href=O.format(),O}if(v.protocol&&v.protocol!==O.protocol){if(!S[v.protocol]){for(var U=Object.keys(v),N=0;N<U.length;N++){var ae=U[N];O[ae]=v[ae]}return O.href=O.format(),O}if(O.protocol=v.protocol,!v.host&&!b[v.protocol]){for(var le=(v.pathname||"").split("/");le.length&&!(v.host=le.shift()););v.host||(v.host=""),v.hostname||(v.hostname=""),le[0]!==""&&le.unshift(""),le.length<2&&le.unshift(""),O.pathname=le.join("/")}else O.pathname=v.pathname;if(O.search=v.search,O.query=v.query,O.host=v.host||"",O.auth=v.auth,O.hostname=v.hostname||v.host,O.port=v.port,O.pathname||O.search){var te=O.pathname||"",$=O.search||"";O.path=te+$}return O.slashes=O.slashes||v.slashes,O.href=O.format(),O}var ie=O.pathname&&O.pathname.charAt(0)==="/",H=v.host||v.pathname&&v.pathname.charAt(0)==="/",ne=H||ie||O.host&&v.pathname,R=ne,K=O.pathname&&O.pathname.split("/")||[],le=v.pathname&&v.pathname.split("/")||[],q=O.protocol&&!S[O.protocol];if(q&&(O.hostname="",O.port=null,O.host&&(K[0]===""?K[0]=O.host:K.unshift(O.host)),O.host="",v.protocol&&(v.hostname=null,v.port=null,v.host&&(le[0]===""?le[0]=v.host:le.unshift(v.host)),v.host=null),ne=ne&&(le[0]===""||K[0]==="")),H)O.host=v.host||v.host===""?v.host:O.host,O.hostname=v.hostname||v.hostname===""?v.hostname:O.hostname,O.search=v.search,O.query=v.query,K=le;else if(le.length)K||(K=[]),K.pop(),K=K.concat(le),O.search=v.search,O.query=v.query;else if(v.search!=null){if(q){O.host=K.shift(),O.hostname=O.host;var _e=O.host&&O.host.indexOf("@")>0?O.host.split("@"):!1;_e&&(O.auth=_e.shift(),O.hostname=_e.shift(),O.host=O.hostname)}return O.search=v.search,O.query=v.query,(O.pathname!==null||O.search!==null)&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.href=O.format(),O}if(!K.length)return O.pathname=null,O.search?O.path="/"+O.search:O.path=null,O.href=O.format(),O;for(var J=K.slice(-1)[0],B=(O.host||v.host||K.length>1)&&(J==="."||J==="..")||J==="",oe=0,G=K.length;G>=0;G--)J=K[G],J==="."?K.splice(G,1):J===".."?(K.splice(G,1),oe++):oe&&(K.splice(G,1),oe--);if(!ne&&!R)for(;oe--;oe)K.unshift("..");ne&&K[0]!==""&&(!K[0]||K[0].charAt(0)!=="/")&&K.unshift(""),B&&K.join("/").substr(-1)!=="/"&&K.push("");var Q=K[0]===""||K[0]&&K[0].charAt(0)==="/";if(q){O.hostname=Q?"":K.length?K.shift():"",O.host=O.hostname;var _e=O.host&&O.host.indexOf("@")>0?O.host.split("@"):!1;_e&&(O.auth=_e.shift(),O.hostname=_e.shift(),O.host=O.hostname)}return ne=ne||O.host&&K.length,ne&&!Q&&K.unshift(""),K.length>0?O.pathname=K.join("/"):(O.pathname=null,O.path=null),(O.pathname!==null||O.search!==null)&&(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.auth=v.auth||O.auth,O.slashes=O.slashes||v.slashes,O.href=O.format(),O},e.prototype.parseHost=function(){var v=this.host,C=s.exec(v);C&&(C=C[0],C!==":"&&(this.port=C.substr(1)),v=v.substr(0,v.length-C.length)),v&&(this.hostname=v)},Dt.parse=x,Dt.resolve=_,Dt.resolveObject=A,Dt.format=y,Dt.Url=e,Dt}function Ju(t){if(typeof t=="string")t=new URL(t);else if(!(t instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(t.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Gn?Mp(t):jp(t)}function Mp(t){let e=t.hostname,r=t.pathname;for(let s=0;s<r.length;s++)if(r[s]==="%"){let l=r.codePointAt(s+2)||32;if(r[s+1]==="2"&&l===102||r[s+1]==="5"&&l===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(cc,"\\"),r=decodeURIComponent(r),e!=="")return`\\\\${e}${r}`;{let s=r.codePointAt(1)|32,l=r[2];if(s<lc||s>uc||l!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}function jp(t){if(t.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=t.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let s=e.codePointAt(r+2)||32;if(e[r+1]==="2"&&s===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function Xu(t){let e=ls.resolve(t),r=t.charCodeAt(t.length-1);(r===ac||Gn&&r===sc)&&e[e.length-1]!==ls.sep&&(e+="/");let s=new URL("file://");return e.includes("%")&&(e=e.replace(hc,"%25")),!Gn&&e.includes("\\")&&(e=e.replace(fc,"%5C")),e.includes(`
`)&&(e=e.replace(pc,"%0A")),e.includes("\r")&&(e=e.replace(dc,"%0D")),e.includes("	")&&(e=e.replace(gc,"%09")),s.pathname=e,s}var Zu,Un,us,Ln,$n,cs,Dn,hs,Fn,fs,Wn,ps,zn,ds,qn,gs,Dt,ys,it,dl,ec,tc,rc,nc,ic,oc,sc,ac,lc,uc,Gn,cc,hc,fc,pc,dc,gc,Np=ut(()=>{fe(),de(),pe(),Xf(),dp(),Ip(),Gu(),Zu=Object.freeze(Object.create(null)),Un={},us=!1,Ln=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,$n={},cs=!1,Dn={},hs=!1,Fn={},fs=!1,Wn={},ps=!1,zn={},ds=!1,qn={},gs=!1,Dt={},ys=!1,it=Rp(),it.parse,it.resolve,it.resolveObject,it.format,it.Url,dl=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,it.URL=typeof URL<"u"?URL:null,it.pathToFileURL=Xu,it.fileURLToPath=Ju,ec=it.Url,tc=it.format,rc=it.resolve,nc=it.resolveObject,ic=it.parse,oc=it.URL,sc=92,ac=47,lc=97,uc=122,Gn=dl==="win32",cc=/\//g,hc=/%/g,fc=/\\/g,pc=/\n/g,dc=/\r/g,gc=/\t/g}),Bp=be((t,e)=>{fe(),de(),pe(),e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Ds=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0}),t.BufferedDuplex=void 0,t.writev=s;var e=hr(),r=(et(),De(Ze));function s(n,i){let a=new Array(n.length);for(let o=0;o<n.length;o++)typeof n[o].chunk=="string"?a[o]=r.Buffer.from(n[o].chunk,"utf8"):a[o]=n[o].chunk;this._write(r.Buffer.concat(a),"binary",i)}var l=class extends e.Duplex{constructor(i,a,o){super({objectMode:!0});xe(this,"socket");xe(this,"proxy");xe(this,"isSocketOpen");xe(this,"writeQueue");this.proxy=a,this.socket=o,this.writeQueue=[],i.objectMode||(this._writev=s.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",u=>{!this.destroyed&&this.readable&&this.push(u)})}_read(i){this.proxy.read(i)}_write(i,a,o){this.isSocketOpen?this.writeToProxy(i,a,o):this.writeQueue.push({chunk:i,encoding:a,cb:o})}_final(i){this.writeQueue=[],this.proxy.end(i)}_destroy(i,a){this.writeQueue=[],this.proxy.destroy(),a(i)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(i,a,o){this.proxy.write(i,a)===!1?this.proxy.once("drain",o):o()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:i,encoding:a,cb:o}=this.writeQueue.shift();this.writeToProxy(i,a,o)}}};t.BufferedDuplex=l}),hn=be(t=>{fe(),de(),pe();var e=t&&t.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(t,"__esModule",{value:!0}),t.streamBuilder=t.browserStreamBuilder=void 0;var r=(et(),De(Ze)),s=e(Bp()),l=e(Pt()),n=hr(),i=e(ni()),a=Ds(),o=(0,l.default)("mqttjs:ws"),u=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(x,y){let _=`${x.protocol}://${x.hostname}:${x.port}${x.path}`;return typeof x.transformWsUrl=="function"&&(_=x.transformWsUrl(_,x,y)),_}function f(x){let y=x;return x.port||(x.protocol==="wss"?y.port=443:y.port=80),x.path||(y.path="/"),x.wsOptions||(y.wsOptions={}),!i.default&&!x.forceNativeWebSocket&&x.protocol==="wss"&&u.forEach(_=>{Object.prototype.hasOwnProperty.call(x,_)&&!Object.prototype.hasOwnProperty.call(x.wsOptions,_)&&(y.wsOptions[_]=x[_])}),y}function p(x){let y=f(x);if(y.hostname||(y.hostname=y.host),!y.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let _=new URL(document.URL);y.hostname=_.hostname,y.port||(y.port=Number(_.port))}return y.objectMode===void 0&&(y.objectMode=!(y.binary===!0||y.binary===void 0)),y}function g(x,y,_){o("createWebSocket"),o(`protocol: ${_.protocolId} ${_.protocolVersion}`);let A=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";o(`creating new Websocket for url: ${y} and protocol: ${A}`);let v;return _.createWebsocket?v=_.createWebsocket(y,[A],_):v=new s.default(y,[A],_.wsOptions),v}function b(x,y){let _=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt",A=c(y,x),v;return y.createWebsocket?v=y.createWebsocket(A,[_],y):v=new WebSocket(A,[_]),v.binaryType="arraybuffer",v}var S=(x,y)=>{o("streamBuilder");let _=f(y);_.hostname=_.hostname||_.host||"localhost";let A=c(_,x),v=g(x,A,_),C=s.default.createWebSocketStream(v,_.wsOptions);return C.url=A,v.on("close",()=>{C.destroy()}),C};t.streamBuilder=S;var w=(x,y)=>{o("browserStreamBuilder");let _,A=p(y).browserBufferSize||1024*512,v=y.browserBufferTimeout||1e3,C=!y.objectMode,O=b(x,y),I=k(y,N,ae);y.objectMode||(I._writev=a.writev.bind(I)),I.on("close",()=>{O.close()});let T=typeof O.addEventListener<"u";O.readyState===O.OPEN?(_=I,_.socket=O):(_=new a.BufferedDuplex(y,I,O),T?O.addEventListener("open",z):O.onopen=z),T?(O.addEventListener("close",E),O.addEventListener("error",j),O.addEventListener("message",U)):(O.onclose=E,O.onerror=j,O.onmessage=U);function k(te,$,ie){let H=new n.Transform({objectMode:te.objectMode});return H._write=$,H._flush=ie,H}function z(){o("WebSocket onOpen"),_ instanceof a.BufferedDuplex&&_.socketReady()}function E(te){o("WebSocket onClose",te),_.end(),_.destroy()}function j(te){o("WebSocket onError",te);let $=new Error("WebSocket error");$.event=te,_.destroy($)}async function U(te){if(!I||!I.readable||!I.writable)return;let{data:$}=te;$ instanceof ArrayBuffer?$=r.Buffer.from($):$ instanceof Blob?$=r.Buffer.from(await new Response($).arrayBuffer()):$=r.Buffer.from($,"utf8"),I.push($)}function N(te,$,ie){if(O.bufferedAmount>A){setTimeout(N,v,te,$,ie);return}C&&typeof te=="string"&&(te=r.Buffer.from(te,"utf8"));try{O.send(te)}catch(H){return ie(H)}ie()}function ae(te){O.close(),te()}return _};t.browserStreamBuilder=w}),Fs={};Er(Fs,{Server:()=>ze,Socket:()=>ze,Stream:()=>ze,_createServerHandle:()=>ze,_normalizeArgs:()=>ze,_setSimultaneousAccepts:()=>ze,connect:()=>ze,createConnection:()=>ze,createServer:()=>ze,default:()=>yc,isIP:()=>ze,isIPv4:()=>ze,isIPv6:()=>ze});function ze(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var yc,mc=ut(()=>{fe(),de(),pe(),yc={_createServerHandle:ze,_normalizeArgs:ze,_setSimultaneousAccepts:ze,connect:ze,createConnection:ze,createServer:ze,isIP:ze,isIPv4:ze,isIPv6:ze,Server:ze,Socket:ze,Stream:ze}}),bc=be((t,e)=>{fe(),de(),pe(),e.exports={}}),gl=be(t=>{fe(),de(),pe();var e=t&&t.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0});var r=e((mc(),De(Fs))),s=e(Pt()),l=e(bc()),n=(0,s.default)("mqttjs:tcp"),i=(a,o)=>{if(o.port=o.port||1883,o.hostname=o.hostname||o.host||"localhost",o.socksProxy)return(0,l.default)(o.hostname,o.port,o.socksProxy,{timeout:o.socksTimeout});let{port:u,path:c}=o,f=o.hostname;return n("port %d and host %s",u,f),r.default.createConnection({port:u,host:f,path:c})};t.default=i}),vc={};Er(vc,{default:()=>wc});var wc,Up=ut(()=>{fe(),de(),pe(),wc={}}),yl=be(t=>{fe(),de(),pe();var e=t&&t.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0});var r=(Up(),De(vc)),s=e((mc(),De(Fs))),l=e(Pt()),n=e(bc()),i=(0,l.default)("mqttjs:tls");function a(u){let{host:c,port:f,socksProxy:p,...g}=u;if(p!==void 0){let b=(0,n.default)(c,f,p,{timeout:u.socksTimeout});return(0,r.connect)({...g,socket:b})}return(0,r.connect)(u)}var o=(u,c)=>{c.port=c.port||8883,c.host=c.hostname||c.host||"localhost",s.default.isIP(c.host)===0&&(c.servername=c.host),c.rejectUnauthorized=c.rejectUnauthorized!==!1,delete c.path,i("port %d host %s rejectUnauthorized %b",c.port,c.host,c.rejectUnauthorized);let f=a(c);f.on("secureConnect",()=>{c.rejectUnauthorized&&!f.authorized?f.emit("error",new Error("TLS not authorized")):f.removeListener("error",p)});function p(g){c.rejectUnauthorized&&u.emit("error",g),f.end()}return f.on("error",p),f};t.default=o}),ml=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=(et(),De(Ze)),r=hr(),s=Ds(),l,n,i;function a(){let p=new r.Transform;return p._write=(g,b,S)=>{l.send({data:g.buffer,success(){S()},fail(w){S(new Error(w))}})},p._flush=g=>{l.close({success(){g()}})},p}function o(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function u(p,g){let b=p.protocol==="wxs"?"wss":"ws",S=`${b}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(S=`${b}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(S=p.transformWsUrl(S,p,g)),S}function c(){l.onOpen(()=>{i.socketReady()}),l.onMessage(p=>{let{data:g}=p;g instanceof ArrayBuffer?g=e.Buffer.from(g):g=e.Buffer.from(g,"utf8"),n.push(g)}),l.onClose(()=>{i.emit("close"),i.end(),i.destroy()}),l.onError(p=>{let g=new Error(p.errMsg);i.destroy(g)})}var f=(p,g)=>{if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");let b=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";o(g);let S=u(g,p);l=wx.connectSocket({url:S,protocols:[b]}),n=a(),i=new s.BufferedDuplex(g,n,l),i._destroy=(x,y)=>{l.close({success(){y&&y(x)}})};let w=i.destroy;return i.destroy=(x,y)=>(i.destroy=w,setTimeout(()=>{l.close({fail(){i._destroy(x,y)}})},0),i),c(),i};t.default=f}),bl=be(t=>{fe(),de(),pe(),Object.defineProperty(t,"__esModule",{value:!0});var e=(et(),De(Ze)),r=hr(),s=Ds(),l,n,i,a=!1;function o(){let g=new r.Transform;return g._write=(b,S,w)=>{l.sendSocketMessage({data:b.buffer,success(){w()},fail(){w(new Error)}})},g._flush=b=>{l.closeSocket({success(){b()}})},g}function u(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function c(g,b){let S=g.protocol==="alis"?"wss":"ws",w=`${S}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(w=`${S}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(w=g.transformWsUrl(w,g,b)),w}function f(){a||(a=!0,l.onSocketOpen(()=>{i.socketReady()}),l.onSocketMessage(g=>{if(typeof g.data=="string"){let b=e.Buffer.from(g.data,"base64");n.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{if(b.result instanceof ArrayBuffer){n.push(e.Buffer.from(b.result));return}n.push(e.Buffer.from(b.result,"utf-8"))}),b.readAsArrayBuffer(g.data)}}),l.onSocketClose(()=>{i.end(),i.destroy()}),l.onSocketError(g=>{i.destroy(g)}))}var p=(g,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let S=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";u(b);let w=c(b,g);return l=b.my,l.connectSocket({url:w,protocols:S}),n=o(),i=new s.BufferedDuplex(b,n,l),f(),i};t.default=p}),Lp=be(t=>{fe(),de(),pe();var e=t&&t.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.connectAsync=c;var r=e(Pt()),s=e((Np(),De(Yu))),l=e(Oo()),n=e(ni());typeof(Le==null?void 0:Le.nextTick)!="function"&&(Le.nextTick=setImmediate);var i=(0,r.default)("mqttjs"),a=null;function o(f){let p;if(f.auth)if(p=f.auth.match(/^(.+):(.+)$/),p){let[,g,b]=p;f.username=g,f.password=b}else f.username=f.auth}function u(f,p){var S,w,x;if(i("connecting to an MQTT broker..."),typeof f=="object"&&!p&&(p=f,f=""),p=p||{},f&&typeof f=="string"){let y=s.default.parse(f,!0),_={};if(y.port!=null&&(_.port=Number(y.port)),_.host=y.hostname,_.query=y.query,_.auth=y.auth,_.protocol=y.protocol,_.path=y.path,p={..._,...p},!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||((S=p.protocol)==null?void 0:S.includes("+unix")),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!((w=p.protocol)!=null&&w.startsWith("ws"))&&!((x=p.protocol)!=null&&x.startsWith("wx"))&&delete p.path,o(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),n.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof Le<"u"&&(p.socksProxy=Le.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(a||(a={},!n.default&&!p.forceNativeWebSocket?(a.ws=hn().streamBuilder,a.wss=hn().streamBuilder,a.mqtt=gl().default,a.tcp=gl().default,a.ssl=yl().default,a.tls=a.ssl,a.mqtts=yl().default):(a.ws=hn().browserStreamBuilder,a.wss=hn().browserStreamBuilder,a.wx=ml().default,a.wxs=ml().default,a.ali=bl().default,a.alis=bl().default)),!a[p.protocol]){let y=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((_,A)=>y&&A%2===0?!1:typeof a[_]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function g(y){return p.servers&&((!y._reconnectCount||y._reconnectCount===p.servers.length)&&(y._reconnectCount=0),p.host=p.servers[y._reconnectCount].host,p.port=p.servers[y._reconnectCount].port,p.protocol=p.servers[y._reconnectCount].protocol?p.servers[y._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,y._reconnectCount++),i("calling streambuilder for",p.protocol),a[p.protocol](y,p)}let b=new l.default(g,p);return b.on("error",()=>{}),b}function c(f,p,g=!0){return new Promise((b,S)=>{let w=u(f,p),x={connect:_=>{y(),b(w)},end:()=>{y(),b(w)},error:_=>{y(),w.end(),S(_)}};g===!1&&(x.close=()=>{x.error(new Error("Couldn't connect to server"))});function y(){Object.keys(x).forEach(_=>{w.off(_,x[_])})}Object.keys(x).forEach(_=>{w.on(_,x[_])})})}t.default=u}),vl=be(t=>{fe(),de(),pe();var e=t&&t.__createBinding||(Object.create?function(g,b,S,w){w===void 0&&(w=S);var x=Object.getOwnPropertyDescriptor(b,S);(!x||("get"in x?!b.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return b[S]}}),Object.defineProperty(g,w,x)}:function(g,b,S,w){w===void 0&&(w=S),g[w]=b[S]}),r=t&&t.__setModuleDefault||(Object.create?function(g,b){Object.defineProperty(g,"default",{enumerable:!0,value:b})}:function(g,b){g.default=b}),s=t&&t.__importStar||function(){var g=function(b){return g=Object.getOwnPropertyNames||function(S){var w=[];for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(w[w.length]=x);return w},g(b)};return function(b){if(b&&b.__esModule)return b;var S={};if(b!=null)for(var w=g(b),x=0;x<w.length;x++)w[x]!=="default"&&e(S,b,w[x]);return r(S,b),S}}(),l=t&&t.__exportStar||function(g,b){for(var S in g)S!=="default"&&!Object.prototype.hasOwnProperty.call(b,S)&&e(b,g,S)},n=t&&t.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=t.KeepaliveManager=t.UniqueMessageIdProvider=t.DefaultMessageIdProvider=t.Store=t.MqttClient=t.connectAsync=t.connect=t.Client=void 0;var i=n(Oo());t.MqttClient=i.default;var a=n(Bu());t.DefaultMessageIdProvider=a.default;var o=n(Qf());t.UniqueMessageIdProvider=o.default;var u=n(vu());t.Store=u.default;var c=s(Lp());t.connect=c.default,Object.defineProperty(t,"connectAsync",{enumerable:!0,get:function(){return c.connectAsync}});var f=n(zu());t.KeepaliveManager=f.default,t.Client=i.default,l(Oo(),t),l(xr(),t);var p=ti();Object.defineProperty(t,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),$p=be(t=>{fe(),de(),pe();var e=t&&t.__createBinding||(Object.create?function(i,a,o,u){u===void 0&&(u=o);var c=Object.getOwnPropertyDescriptor(a,o);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,u,c)}:function(i,a,o,u){u===void 0&&(u=o),i[u]=a[o]}),r=t&&t.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),s=t&&t.__importStar||function(){var i=function(a){return i=Object.getOwnPropertyNames||function(o){var u=[];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(u[u.length]=c);return u},i(a)};return function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var u=i(a),c=0;c<u.length;c++)u[c]!=="default"&&e(o,a,u[c]);return r(o,a),o}}(),l=t&&t.__exportStar||function(i,a){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&e(a,i,o)};Object.defineProperty(t,"__esModule",{value:!0});var n=s(vl());t.default=n,l(vl(),t)});const Dp=$p();/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@babel/runtime/helpers/regenerator.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/const Fp=4,gr={},wl=({options:t})=>t.host+t.path,Wp=Wl({init:t=>Ll(t,zp,Fp).map(e=>{const r=Dp.connect(e),s=wl(r);return r.stream.socket,gr[s]={},r.on("message",(l,n)=>{var i,a;return(a=(i=gr[s])[l])==null?void 0:a.call(i,l,n.toString())}).on("error",l=>console.error(l)),new Promise(l=>r.on("connect",()=>l(r)))}),subscribe:(t,e,r,s)=>{const l=wl(t);return gr[l][e]=gr[l][r]=(n,i)=>s(n,i,t.publish.bind(t)),t.subscribe(e),t.subscribe(r),()=>{t.unsubscribe(e),t.unsubscribe(r),delete gr[l][e],delete gr[l][r]}},announce:(t,e)=>t.publish(e,Sr({peerId:It}))}),zp=["test.mosquitto.org:8081/mqtt","broker.emqx.io:8084/mqtt","broker.hivemq.com:8884/mqtt"].map(t=>"wss://"+t),_l={torrent:{joinRoom:Th,selfId:It},mqtt:{joinRoom:Wp,selfId:It}},qp="torrent",_c=_l[qp]??_l.torrent,Hp=_c.joinRoom,Sl=_c.selfId,Vp="metro-retro:board:",ms=t=>`${Vp}${t}`;function Kp(t){if(typeof window>"u")return null;const e=window.localStorage.getItem(ms(t));if(!e)return null;try{return JSON.parse(e)}catch(r){return console.warn("Failed to parse snapshot",r),window.localStorage.removeItem(ms(t)),null}}function Gp(t,e){if(!(typeof window>"u"))try{window.localStorage.setItem(ms(t),JSON.stringify(e))}catch(r){console.warn("Failed to persist snapshot",r)}}const Yp="wss://tracker.webtorrent.dev,wss://tracker.openwebtorrent.com",El=Yp.split(",").map(t=>t.trim()).filter(Boolean),Al="start-stop-continue",Qp=["start-stop-continue","mad-sad-glad"],Jp=t=>typeof t=="string"&&Qp.includes(t);class Xp extends EventTarget{constructor(e,r,s){var l;super(),this.status="connecting",this.notes=new Map,this.participants=new Map,this.background=Al,this.boardId=e,this.localParticipant={id:Sl,label:((l=r==null?void 0:r.label)==null?void 0:l.trim())||`Guest ${Qr().slice(0,4).toUpperCase()}`,color:(r==null?void 0:r.color)||this.randomAccent()},this.background=s??Al,this.participants.set(Sl,this.localParticipant),this.restoreSnapshot(),this.connectRoom()}dispose(){var e;typeof window<"u"&&window.clearTimeout(this.persistHandle),(e=this.room)==null||e.leave()}getNotes(){return Array.from(this.notes.values()).sort((e,r)=>e.createdAt-r.createdAt)}getParticipants(){return Array.from(this.participants.values())}getLocalParticipant(){return this.localParticipant}getBoardBackground(){return this.background}setBoardBackground(e){var s;if(!e)return;e!==this.background&&this.applyBackground(e),(s=this.sendSettingsMessage)==null||s.call(this,{type:"background",value:e})}fireConfetti(e){var r;this.dispatchEvent(new CustomEvent("confetti-fired",{detail:e})),(r=this.sendFunMessage)==null||r.call(this,{type:"confetti",shot:e})}createNote(e,r,s){const l=Date.now(),n={id:Qr(),columnId:e,text:"",...this.normalizePosition(r,s),color:this.localParticipant.color,authorId:this.localParticipant.id,createdAt:l,updatedAt:l};this.applyUpsert(n),this.broadcastNote({type:"upsert",note:n})}updateNote(e,r){const s=this.notes.get(e);if(!s)return;const l={...s,...r,updatedAt:Date.now()};this.applyUpsert(l),this.broadcastNote({type:"upsert",note:l})}moveNote(e,r,s,l){this.updateNote(e,{columnId:r,...this.normalizePosition(s,l)})}deleteNote(e){this.notes.get(e)&&(this.notes.delete(e),this.emitNotesChanged(),this.schedulePersist(),this.broadcastNote({type:"delete",id:e,updatedAt:Date.now()}))}connectRoom(){const e={appId:"metro-retro",relayUrls:El.length?El:void 0};this.room=Hp(e,this.boardId),this.updateStatus("connected"),this.setupMessaging(),this.setupPresence(),this.setupFunChannel(),this.setupSettingsChannel()}setupMessaging(){if(!this.room)return;const[e,r]=this.room.makeAction("note");this.sendNoteMessage=(s,l)=>e(s,l),r((s,l)=>{var n;switch(s.type){case"upsert":this.applyUpsert(s.note);break;case"delete":this.applyDelete(s.id,s.updatedAt);break;case"sync-request":(n=this.sendNoteMessage)==null||n.call(this,{type:"sync-response",notes:this.getNotes()},l);break;case"sync-response":s.notes.forEach(i=>this.applyUpsert(i));break}}),this.room.onPeerJoin(s=>{var l,n;this.updateStatus("connected"),(l=this.sendPresenceMessage)==null||l.call(this,{participant:this.localParticipant},s),(n=this.sendNoteMessage)==null||n.call(this,{type:"sync-request"},s)}),this.room.onPeerLeave(s=>{this.participants.delete(s),this.emitParticipantsChanged()})}setupPresence(){var s;if(!this.room)return;const[e,r]=this.room.makeAction("presence");this.sendPresenceMessage=(l,n)=>e(l,n),r(l=>{l!=null&&l.participant&&(this.participants.set(l.participant.id,l.participant),this.emitParticipantsChanged())}),this.emitParticipantsChanged(),(s=this.sendPresenceMessage)==null||s.call(this,{participant:this.localParticipant})}setupFunChannel(){if(!this.room)return;const[e,r]=this.room.makeAction("fun");this.sendFunMessage=(s,l)=>e(s,l),r(s=>{(s==null?void 0:s.type)!=="confetti"||!s.shot||this.dispatchEvent(new CustomEvent("confetti-fired",{detail:s.shot}))})}setupSettingsChannel(){if(!this.room)return;const[e,r]=this.room.makeAction("settings");this.sendSettingsMessage=(s,l)=>e(s,l),r((s,l)=>{(s==null?void 0:s.type)==="background"&&Jp(s.value)?this.applyBackground(s.value):(s==null?void 0:s.type)==="background-request"&&this.respondWithBackground(l)}),this.requestBackgroundSync()}broadcastNote(e){var r;(r=this.sendNoteMessage)==null||r.call(this,e)}applyUpsert(e){const r=this.notes.get(e.id);r&&r.updatedAt>e.updatedAt||(this.notes.set(e.id,e),this.schedulePersist(),this.emitNotesChanged())}applyDelete(e,r){const s=this.notes.get(e);!s||s.updatedAt>r||(this.notes.delete(e),this.emitNotesChanged(),this.schedulePersist())}emitNotesChanged(){this.dispatchEvent(new CustomEvent("notes-changed",{detail:this.getNotes()}))}emitParticipantsChanged(){this.dispatchEvent(new CustomEvent("participants-changed",{detail:this.getParticipants()}))}applyBackground(e){!e||e===this.background||(this.background=e,this.dispatchEvent(new CustomEvent("background-changed",{detail:e})))}respondWithBackground(e){var r;(r=this.sendSettingsMessage)==null||r.call(this,{type:"background",value:this.background},e??null)}requestBackgroundSync(){var e;(e=this.sendSettingsMessage)==null||e.call(this,{type:"background-request"})}normalizePosition(e,r){const s=Number.isFinite(e)?Number(e):24,l=Number.isFinite(r)?Number(r):24;return{x:Math.max(12,s),y:Math.max(12,l)}}updateStatus(e){this.status=e,this.dispatchEvent(new CustomEvent("status-changed",{detail:e}))}restoreSnapshot(){const e=Kp(this.boardId);e!=null&&e.notes&&(e.notes.forEach(r=>this.notes.set(r.id,r)),this.emitNotesChanged())}schedulePersist(){typeof window>"u"||(window.clearTimeout(this.persistHandle),this.persistHandle=window.setTimeout(()=>{Gp(this.boardId,{notes:this.getNotes()})},400))}randomAccent(){const e=["#fbbf24","#ef4444","#22d3ee","#a855f7","#34d399","#f472b6"];return e[Math.floor(Math.random()*e.length)]}}const Zp=[{id:"good",label:"Good",description:"Wins and bright spots worth repeating",accent:"#34d399"},{id:"bad",label:"Bad",description:"Pain points or risks we should address",accent:"#f87171"},{id:"start",label:"Start",description:"New ideas to try next sprint",accent:"#60a5fa"},{id:"stop",label:"Stop",description:"Habits that no longer serve us",accent:"#fbbf24"}],ed=110,td=70,Sc="application/x-metro-note",bs=[{id:"start-stop-continue",label:"Start / Stop / Continue",description:"Three-part action board",asset:"start-stop-continue.png",columns:[{title:"Start",description:"Ideas to try",accent:"#0ea5e9"},{title:"Stop",description:"Habits to drop",accent:"#f97316"},{title:"Continue",description:"Keep doing these",accent:"#6366f1"}]},{id:"mad-sad-glad",label:"Mad / Sad / Glad",description:"Emotional check-in",asset:"mad-sad-glad.png",columns:[{title:"Mad",description:"Frustrations & annoyances",accent:"#f87171"},{title:"Sad",description:"Letdowns & concerns",accent:"#facc15"},{title:"Glad",description:"Highlights & celebrations",accent:"#34d399"}]}];/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ec={ATTRIBUTE:1,CHILD:2},Ac=t=>(...e)=>({_$litDirective$:t,values:e});let xc=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,s){this._$Ct=e,this._$AM=r,this._$Ci=s}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ic="important",rd=" !"+Ic,Dr=Ac(class extends xc{constructor(t){var e;if(super(t),t.type!==Ec.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,r)=>{const s=t[r];return s==null?e:e+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`},"")}update(t,[e]){const{style:r}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const s of this.ft)e[s]==null&&(this.ft.delete(s),s.includes("-")?r.removeProperty(s):r[s]=null);for(const s in e){const l=e[s];if(l!=null){this.ft.add(s);const n=typeof l=="string"&&l.endsWith(rd);s.includes("-")||n?r.setProperty(s,n?l.slice(0,-11):l,n?Ic:""):r[s]=l}}return qt}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class vs extends xc{constructor(e){if(super(e),this.it=Qe,e.type!==Ec.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===Qe||e==null)return this._t=void 0,this.it=e;if(e===qt)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const r=[e];return r.raw=r,this._t={_$litType$:this.constructor.resultType,strings:r,values:[]}}}vs.directiveName="unsafeHTML",vs.resultType=1;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class ws extends vs{}ws.directiveName="unsafeSVG",ws.resultType=2;const nd=Ac(ws),id=`<svg
  width="140"
  height="140"
  viewBox="0 0 140 140"
  xmlns="http://www.w3.org/2000/svg"
>
  <defs>
    <!-- Paper gradient -->
    <linearGradient id="noteGradient" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="var(--note-top, #fff79a)" />
      <stop offset="100%" stop-color="var(--note-bottom, #ffd34a)" />
    </linearGradient>

    <!-- Fold gradient -->
    <linearGradient id="foldGradient" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="var(--note-fold-light, #fffde2)" />
      <stop offset="100%" stop-color="var(--note-fold-dark, #ffd768)" />
    </linearGradient>

    <filter id="noteShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow
        dx="0"
        dy="6"
        stdDeviation="6"
        flood-color="var(--note-shadow, rgba(0, 0, 0, 0.3))"
        flood-opacity="0.35"
      />
    </filter>
  </defs>

  <g filter="url(#noteShadow)">
    <path
      id="note-body"
      d="M4 4 H112 L136 28 V136 H4 Z"
      fill="url(#noteGradient)"
      stroke="var(--note-stroke, #e0a800)"
      stroke-width="1.5"
    />

    <path
      id="note-fold"
      d="M112 4 L136 28 H112 Z"
      fill="url(#foldGradient)"
      stroke="var(--note-stroke, #e0a800)"
      stroke-width="1.5"
      stroke-linejoin="round"
    />
  </g>
</svg>
`;var od=Object.defineProperty,sd=Object.getOwnPropertyDescriptor,kr=(t,e,r,s)=>{for(var l=s>1?void 0:s?sd(e,r):e,n=t.length-1,i;n>=0;n--)(i=t[n])&&(l=(s?i(e,r,l):i(l))||l);return s&&l&&od(e,r,l),l};let Ht=class extends zt{constructor(){super(...arguments),this.editing=!1,this.draft="",this.commitEdit=()=>{!this.controller||!this.editing||(this.controller.updateNote(this.note.id,{text:this.draft.trim()}),this.editing=!1)}}updated(t){var e;t.has("note")&&!this.editing&&(this.draft=((e=this.note)==null?void 0:e.text)??"")}render(){if(!this.note)return null;const t=this.getPaletteStyles(this.note.color);return Ge`
            <article
                class="note"
                draggable=${String(!this.editing)}
                style=${Dr({...t,"--tilt":`${this.getTilt(this.note.id)}deg`})}
                @dragstart=${this.handleDragStart}
                @dblclick=${this.beginEditing}
            >
                <div class="note-shell" aria-hidden="true">
                    ${nd(id)}
                </div>
                <button
                    class="delete"
                    @click=${this.handleDelete}
                    title="Delete note"
                >
                    &times;
                </button>
                <div class="note-content">
                    ${this.editing?Ge`
                              <textarea
                                  .value=${this.draft}
                                  @input=${this.handleInput}
                                  @keydown=${this.handleKeyDown}
                                  @blur=${this.commitEdit}
                              ></textarea>
                          `:Ge`<p
                              ?empty=${this.note.text.length===0}
                              @click=${this.beginEditing}
                          >
                              ${this.note.text||"Double-click to add text"}
                          </p>`}
                </div>
            </article>
        `}getTilt(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return(e>>>0)%800/100-4}getPaletteStyles(t){const e=this.normalizeHex(t);if(!e)return{};const r=l=>this.mixHex(e,"#ffffff",l),s=l=>this.mixHex(e,"#000000",l);return{"--note-top":r(.35),"--note-bottom":s(.1),"--note-fold-light":r(.55),"--note-fold-dark":s(.05),"--note-stroke":s(.25),"--note-shadow":s(.7)}}normalizeHex(t){const e=t.trim().toLowerCase();if(/^#([0-9a-f]{3})$/i.test(e)){const[,r]=/^#([0-9a-f]{3})$/i.exec(e)??[];return r?`#${r.split("").map(s=>s+s).join("")}`:null}return/^#([0-9a-f]{6})$/i.test(e)?e:null}mixHex(t,e,r){const s=this.hexToRgb(t),l=this.hexToRgb(e);if(!s||!l)return t;const n=Math.min(Math.max(r,0),1),i=(a,o)=>Math.round(a+(o-a)*n);return this.rgbToHex({r:i(s.r,l.r),g:i(s.g,l.g),b:i(s.b,l.b)})}hexToRgb(t){const e=/^#([0-9a-f]{6})$/i.exec(t);if(!e)return null;const r=e[1],s=parseInt(r.slice(0,2),16),l=parseInt(r.slice(2,4),16),n=parseInt(r.slice(4,6),16);return{r:s,g:l,b:n}}rgbToHex({r:t,g:e,b:r}){const s=l=>l.toString(16).padStart(2,"0");return`#${s(Math.max(0,Math.min(255,t)))}${s(Math.max(0,Math.min(255,e)))}${s(Math.max(0,Math.min(255,r)))}`}beginEditing(t){t.stopPropagation(),!this.editing&&(this.editing=!0,this.draft=this.note.text,this.updateComplete.then(()=>{var e,r;(e=this.textarea)==null||e.focus(),(r=this.textarea)==null||r.select()}))}handleInput(t){const e=t.target;this.draft=e.value}handleKeyDown(t){t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),this.commitEdit()),t.key==="Escape"&&(t.preventDefault(),this.cancelEdit())}cancelEdit(){this.editing=!1,this.draft=this.note.text}handleDelete(t){var e;t.stopPropagation(),(e=this.controller)==null||e.deleteNote(this.note.id)}handleDragStart(t){if(!t.dataTransfer||this.editing)return;const e=this.getBoundingClientRect(),r=t.clientX-e.left,s=t.clientY-e.top;t.dataTransfer.setData(Sc,JSON.stringify({noteId:this.note.id,offsetX:r,offsetY:s})),t.dataTransfer.effectAllowed="move"}};Ht.styles=Yn`
        :host {
            position: absolute;
            display: block;
            width: 110px;
            min-height: 70px;
        }

        .note {
            position: absolute;
            width: 110px;
            min-height: 70px;
            color: #4c3100;
            cursor: grab;
            transition: transform 120ms ease;
            transform-origin: center;
            transform: rotate(var(--tilt, 0deg));
        }

        .note:active {
            cursor: grabbing;
            transform: rotate(var(--tilt, 0deg)) scale(1.02);
        }

        .note-shell {
            pointer-events: none;
        }

        .note-shell svg {
            width: 100%;
            height: auto;
            display: block;
        }

        :host([dimmed]) {
            opacity: 0.25;
            filter: saturate(0.3);
        }

        .note-content {
            position: absolute;
            inset: 0.8rem 0.6rem 1.1rem;
            display: flex;
            align-items: flex-start;
            overflow: hidden;
        }

        .note-content :is(p, textarea) {
            flex: 1;
            max-height: 100%;
        }

        p {
            margin: 0;
            word-break: break-word;
            font-size: 0.95rem;
            line-height: 1.3;
            overflow: hidden;
        }

        p[empty] {
            opacity: 0.7;
        }

        textarea {
            width: 100%;
            min-height: 45px;
            height: 100%;
            max-height: 100%;
            border: none;
            resize: none;
            background: transparent;
            font: inherit;
            color: inherit;
            outline: none;
            overflow: auto;
        }

        .delete {
            position: absolute;
            top: 6px;
            right: 6px;
            border: none;
            background: rgba(15, 23, 42, 0.25);
            color: #2f1a00;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1;
        }
    `;kr([Vt({attribute:!1})],Ht.prototype,"note",2);kr([Vt({attribute:!1})],Ht.prototype,"controller",2);kr([Ye()],Ht.prototype,"editing",2);kr([Ye()],Ht.prototype,"draft",2);kr([Is("textarea")],Ht.prototype,"textarea",2);Ht=kr([Jn("sticky-note")],Ht);var ad=Object.defineProperty,ld=Object.getOwnPropertyDescriptor,bt=(t,e,r,s)=>{for(var l=s>1?void 0:s?ld(e,r):e,n=t.length-1,i;n>=0;n--)(i=t[n])&&(l=(s?i(e,r,l):i(l))||l);return s&&l&&ad(e,r,l),l};let ct=class extends zt{constructor(){super(...arguments),this.notes=[],this.zoom=1,this.panX=0,this.panY=0,this.isPanning=!1,this.highlightedParticipantId=null,this.background="start-stop-continue",this.panOrigin=null,this.zoomStep=.45,this.minZoom=.4,this.maxZoom=3,this.handleKeyZoom=t=>{if(!t.metaKey&&!t.ctrlKey||this.shouldIgnoreKeyZoom(t))return;const e=this.getWorkspaceRect();e&&(t.key==="="||t.key==="+"?(t.preventDefault(),this.zoomTo(this.zoom+this.zoomStep,{x:e.width/2,y:e.height/2})):t.key==="-"||t.key==="_"?(t.preventDefault(),this.zoomTo(this.zoom-this.zoomStep,{x:e.width/2,y:e.height/2})):t.key==="0"&&(t.preventDefault(),this.resetView()))},this.zoomIn=()=>{const t=this.getWorkspaceRect();this.zoomTo(this.zoom*(1+this.zoomStep),t?{x:t.width/2,y:t.height/2}:void 0)},this.zoomOut=()=>{const t=this.getWorkspaceRect();this.zoomTo(this.zoom*(1-this.zoomStep/2),t?{x:t.width/2,y:t.height/2}:void 0)},this.resetView=()=>{this.zoom=1,this.panX=0,this.panY=0}}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this.handleKeyZoom,{passive:!1})}disconnectedCallback(){var t;window.removeEventListener("keydown",this.handleKeyZoom),(t=this.unsubscribe)==null||t.call(this),super.disconnectedCallback()}updated(t){t.has("controller")&&this.bindNotes()}render(){return Ge`
      <section
        class="board"
        @dblclick=${this.handleDoubleClick}
        @dragover=${this.handleDragOver}
        @drop=${this.handleDrop}
        @wheel=${this.handleWheel}
        @pointerdown=${this.handlePointerDown}
        @pointermove=${this.handlePointerMove}
        @pointerup=${this.handlePointerUp}
        @pointerleave=${this.handlePointerUp}
      >
        <div
          class="pan-layer"
          style=${Dr({"--pan-x":`${this.panX}px`,"--pan-y":`${this.panY}px`})}
        >
          <div class="workspace" style=${Dr({"--scale":`${this.zoom}`})}>
            ${this.renderTemplate()}
            <div class="note-layer">
              ${this.notes.map(t=>this.renderNote(t))}
            </div>
          </div>
        </div>
        <div class="canvas-controls" @click=${t=>t.stopPropagation()}>
          <button class="icon" @click=${this.zoomOut} aria-label="Zoom out"></button>
          <span>${Math.round(this.zoom*100)}%</span>
          <button class="icon" @click=${this.zoomIn} aria-label="Zoom in">+</button>
          <button class="reset" @click=${this.resetView} aria-label="Reset view">Reset</button>
        </div>
        ${this.controller?null:Ge`<div class="board-placeholder">Connecting to board</div>`}
      </section>
    `}bindNotes(){var e;if((e=this.unsubscribe)==null||e.call(this),!this.controller){this.notes=[];return}const t=r=>{const s=r.detail;this.notes=s};this.controller.addEventListener("notes-changed",t),this.unsubscribe=()=>{var r;return(r=this.controller)==null?void 0:r.removeEventListener("notes-changed",t)},this.notes=this.controller.getNotes()}renderNote(t){const e=!!(this.highlightedParticipantId&&t.authorId&&t.authorId!==this.highlightedParticipantId),r=!!(this.highlightedParticipantId&&!t.authorId);return Ge`
      <sticky-note
        style=${Dr({left:`${t.x}px`,top:`${t.y}px`})}
        ?dimmed=${e||r}
        .note=${t}
        .controller=${this.controller}
      ></sticky-note>
    `}renderTemplate(){const t=this.getBackgroundLayout();return t?Ge`
      <div
        class="board-template"
        style=${Dr({"--template-image":`url(${t.asset})`})}
        aria-hidden="true"
        role="presentation"
      ></div>
    `:null}handleDoubleClick(t){if(!this.controller||this.eventTargetsNote(t))return;const e=this.getWorkspaceRect();if(!e)return;const r=(t.clientX-e.left)/this.zoom-ed/2,s=(t.clientY-e.top)/this.zoom-td/2;this.controller.createNote(this.defaultColumnId,r,s)}handleDragOver(t){t.dataTransfer&&(t.preventDefault(),t.dataTransfer.dropEffect="move")}handleDrop(t){var o;if(!t.dataTransfer||!this.controller)return;const e=t.dataTransfer.getData(Sc);if(!e)return;t.preventDefault();const r=this.parsePayload(e);if(!r)return;const l=((o=this.notes.find(u=>u.id===r.noteId))==null?void 0:o.columnId)??this.defaultColumnId,n=this.getWorkspaceRect();if(!n)return;const i=(t.clientX-n.left)/this.zoom-r.offsetX,a=(t.clientY-n.top)/this.zoom-r.offsetY;this.controller.moveNote(r.noteId,l,i,a)}handleWheel(t){if(t.preventDefault(),t.ctrlKey||t.metaKey){const e=this.getWorkspaceRect();if(!e)return;const r={x:t.clientX-e.left,y:t.clientY-e.top},s=Math.exp(-t.deltaY*.0045);this.zoomTo(this.zoom*s,r);return}this.panX-=t.deltaX,this.panY-=t.deltaY}handlePointerDown(t){var r;if(t.button!==0||this.eventTargetsNote(t))return;this.isPanning=!0,this.panOrigin={x:t.clientX,y:t.clientY};const e=t.currentTarget;(r=e.setPointerCapture)==null||r.call(e,t.pointerId)}handlePointerMove(t){if(!this.isPanning||!this.panOrigin)return;const e=t.clientX-this.panOrigin.x,r=t.clientY-this.panOrigin.y;this.panX+=e,this.panY+=r,this.panOrigin={x:t.clientX,y:t.clientY}}handlePointerUp(t){var r;if(!this.isPanning)return;this.isPanning=!1,this.panOrigin=null;const e=t.currentTarget;(r=e.releasePointerCapture)==null||r.call(e,t.pointerId)}zoomTo(t,e){const r=Math.min(this.maxZoom,Math.max(this.minZoom,t));r!==this.zoom&&(e&&this.adjustPanForZoom(r,e),this.zoom=Number(r.toFixed(2)))}adjustPanForZoom(t,e){const r=this.zoom;if(!r)return;const s=(e.x-this.panX)/r,l=(e.y-this.panY)/r;this.panX=e.x-s*t,this.panY=e.y-l*t}shouldIgnoreKeyZoom(t){var l;const e=t.target;if(!e)return!1;const r=e.tagName;return((l=e.getAttribute("contenteditable"))==null?void 0:l.toLowerCase())==="true"||r==="INPUT"||r==="TEXTAREA"||r==="SELECT"}getWorkspaceRect(){var t;return((t=this.noteLayer)==null?void 0:t.getBoundingClientRect())??this.getBoundingClientRect()}get defaultColumnId(){var t;return(t=Zp[0])==null?void 0:t.id}getBackgroundLayout(){return bs.find(t=>t.id===this.background)}eventTargetsNote(t){return t.composedPath().some(e=>e instanceof HTMLElement&&e.tagName==="STICKY-NOTE")}parsePayload(t){try{const e=JSON.parse(t);return typeof e.noteId!="string"?null:{noteId:e.noteId,offsetX:Number(e.offsetX)||0,offsetY:Number(e.offsetY)||0}}catch{return null}}};ct.styles=Yn`
    :host {
      position: fixed;
      inset: 0;
      display: block;
      z-index: 0;
    }

    .board {
      position: absolute;
      inset: 0;
      background: #ffffff;
      overflow: hidden;
    }

    .pan-layer {
      position: absolute;
      inset: 0;
      transform: translate(var(--pan-x, 0px), var(--pan-y, 0px));
    }

    .workspace {
      position: absolute;
      inset: 0;
      transform-origin: 0 0;
      transform: scale(var(--scale, 1));
    }

    .board-template {
      position: absolute;
      top: clamp(20px, 8vh, 100px);
      left: 50%;
      transform: translateX(-50%);
      width: min(2200px, calc(100% - 1rem));
      height: min(1240px, calc(100% - 80px));
      max-height: 1440px;
      background-image: var(--template-image);
      background-size: cover;
      background-position: center;
      border-radius: 28px;
      border: 1px solid rgba(15, 23, 42, 0.1);
      box-shadow: 0 20px 60px rgba(15, 23, 42, 0.15);
      pointer-events: none;
      z-index: 1;
      opacity: 0.95;
    }

    .note-layer {
      position: absolute;
      inset: 0;
      z-index: 2;
      pointer-events: none;
    }

    .note-layer sticky-note {
      pointer-events: auto;
    }

    .board-placeholder {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 1rem 1.5rem;
      text-align: center;
      color: #475569;
      border: 1px dashed rgba(15, 23, 42, 0.2);
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.9);
    }

    .canvas-controls {
      position: absolute;
      bottom: 1.5rem;
      right: 2rem;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(15, 23, 42, 0.12);
      border-radius: 999px;
      padding: 0.35rem 0.75rem;
      font-size: 0.9rem;
      color: #0f172a;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.1);
      pointer-events: auto;
    }

    .canvas-controls button {
      border: none;
      background: rgba(15, 23, 42, 0.06);
      color: inherit;
      font-size: 0.85rem;
      cursor: pointer;
      line-height: 1;
    }

    .canvas-controls button.icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      font-size: 1.1rem;
    }

    .canvas-controls button.reset {
      border-radius: 8px;
      padding: 0.2rem 0.7rem;
      background: rgba(15, 23, 42, 0.08);
      font-size: 0.8rem;
    }

    .canvas-controls span {
      min-width: 3rem;
      text-align: center;
    }

    @media (max-width: 900px) {
      .canvas-controls {
        right: 1rem;
        bottom: 1rem;
      }
    }
  `;bt([Vt({attribute:!1})],ct.prototype,"controller",2);bt([Ye()],ct.prototype,"notes",2);bt([Ye()],ct.prototype,"zoom",2);bt([Ye()],ct.prototype,"panX",2);bt([Ye()],ct.prototype,"panY",2);bt([Ye()],ct.prototype,"isPanning",2);bt([Vt({attribute:!1})],ct.prototype,"highlightedParticipantId",2);bt([Vt({attribute:!1})],ct.prototype,"background",2);bt([Is(".note-layer")],ct.prototype,"noteLayer",2);ct=bt([Jn("retro-board")],ct);var ud=Object.defineProperty,cd=Object.getOwnPropertyDescriptor,fr=(t,e,r,s)=>{for(var l=s>1?void 0:s?cd(e,r):e,n=t.length-1,i;n>=0;n--)(i=t[n])&&(l=(s?i(e,r,l):i(l))||l);return s&&l&&ud(e,r,l),l};const xl=["#f87171","#fb923c","#facc15","#34d399","#38bdf8","#a855f7","#ec4899"];let Tt=class extends zt{constructor(){super(...arguments),this.active=!1,this.pulling=!1,this.pullVector={x:0,y:0},this.origin=null,this.ctx=null,this.lastTick=performance.now(),this.particles=[],this.onRemoteConfetti=t=>{const e=t.detail;e&&this.spawnConfetti(e)},this.handleResize=()=>{this.ensureCanvasSize()}}firstUpdated(){this.setupCanvas()}connectedCallback(){super.connectedCallback(),this.startLoop(),window.addEventListener("resize",this.handleResize)}disconnectedCallback(){var t;super.disconnectedCallback(),window.removeEventListener("resize",this.handleResize),this.stopLoop(),(t=this.controller)==null||t.removeEventListener("confetti-fired",this.onRemoteConfetti)}updated(t){var e;if(t.has("controller")){const r=t.get("controller");r==null||r.removeEventListener("confetti-fired",this.onRemoteConfetti),(e=this.controller)==null||e.addEventListener("confetti-fired",this.onRemoteConfetti)}t.has("active")&&!this.active&&this.resetPull()}render(){return Ge`
      <canvas part="canvas" aria-hidden="true"></canvas>
      <div
        class="sling-surface"
        data-active=${this.active?"true":"false"}
        data-pulling=${this.pulling?"true":"false"}
        @pointerdown=${this.handlePointerDown}
        @pointermove=${this.handlePointerMove}
        @pointerup=${this.handlePointerUp}
        @pointerleave=${this.handlePointerUp}
      >
        ${this.renderReticle()}
      </div>
    `}renderReticle(){if(!this.pulling||!this.origin)return null;const t=this.origin.x+this.pullVector.x,e=this.origin.y+this.pullVector.y,r=Math.atan2(this.pullVector.y,this.pullVector.x),s=Math.min(this.maxPull,this.magnitude);return Ge`
      <div class="pull-reticle">
        <span
          class="reticle-band"
          style=${`left:${this.origin.x}px; top:${this.origin.y}px; width:${s}px; transform: translateY(-50%) rotate(${r}rad);`}
        ></span>
        <span
          class="reticle-origin"
          style=${`left:${this.origin.x}px; top:${this.origin.y}px;`}
        ></span>
        <span
          class="reticle-handle"
          style=${`left:${t}px; top:${e}px;`}
        ></span>
      </div>
    `}get magnitude(){return Math.hypot(this.pullVector.x,this.pullVector.y)}get maxPull(){return 160}getPointerLocal(t){const e=this.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}handlePointerDown(t){var r;if(!this.active)return;t.preventDefault(),this.pulling=!0,this.origin=this.getPointerLocal(t),this.pullVector={x:0,y:0};const e=t.currentTarget;(r=e.setPointerCapture)==null||r.call(e,t.pointerId),this.updatePull(t)}handlePointerMove(t){this.pulling&&(t.preventDefault(),this.updatePull(t))}handlePointerUp(t){var n;if(!this.pulling||!this.origin)return;t.preventDefault(),this.updatePull(t);const e=this.magnitude,r={...this.pullVector},s={...this.origin};this.pulling=!1;const l=t.currentTarget;(n=l.releasePointerCapture)==null||n.call(l,t.pointerId),this.pullVector={x:0,y:0},this.origin=null,!(e<12)&&this.launchConfetti(e,r,s)}updatePull(t){if(!this.origin)return;const e=this.getPointerLocal(t),r={x:e.x-this.origin.x,y:e.y-this.origin.y},s=Math.hypot(r.x,r.y)||1,n=Math.min(s,this.maxPull)/s;this.pullVector={x:r.x*n,y:r.y*n},this.requestUpdate()}launchConfetti(t,e,r){var f,p;const s=this.getCanvasWidth(),l=this.getCanvasHeight(),n=r.x/s,i=r.y/l,a={x:-e.x/s,y:-e.y/l},o=Math.min(1,t/this.maxPull),u=((p=(f=this.controller)==null?void 0:f.getLocalParticipant())==null?void 0:p.color)||"#34d399",c={id:Qr(),originX:n,originY:i,vectorX:a.x,vectorY:a.y,power:o,color:u,createdAt:Date.now()};this.controller?this.controller.fireConfetti(c):this.spawnConfetti(c),this.dispatchEvent(new CustomEvent("confetti-shot",{bubbles:!0,composed:!0}))}spawnConfetti(t){this.ensureCanvasSize();const e=this.getCanvasWidth(),r=this.getCanvasHeight(),s={x:t.originX*e,y:t.originY*r},l={x:t.vectorX*e,y:t.vectorY*r},n=Math.hypot(l.x,l.y)||1,i={x:l.x/n,y:l.y/n},a=400+t.power*650,o=Math.floor(80+t.power*70),u=this.buildPalette(t.color);for(let c=0;c<o;c++){const f=(Math.random()-.5)*.9,p=Math.atan2(i.y,i.x)+f,g=a*(.5+Math.random()*.9),b=Math.cos(p)*g+(Math.random()-.5)*120,S=Math.sin(p)*g+(Math.random()-.5)*120,w=2200+Math.random()*800,x=2.8+Math.random()*2.8;this.particles.push({x:s.x,y:s.y,vx:b,vy:S,size:x,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*8,color:u[Math.floor(Math.random()*u.length)],life:w,ttl:w,shape:Math.random()>.4?"square":"circle"})}}buildPalette(t){if(!/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(t))return[...xl];const e=t.replace("#",""),r=e.length===3?e.split("").map(i=>i+i).join(""):e,s=parseInt(r,16),l=i=>Math.min(255,Math.max(0,i)),n=i=>{const a=l((s>>16&255)+i),o=l((s>>8&255)+i),u=l((s&255)+i);return`#${((1<<24)+(a<<16)+(o<<8)+u).toString(16).slice(1)}`};return[n(70),n(30),t,n(-30),"#ffffff",...xl]}setupCanvas(){this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.ensureCanvasSize())}ensureCanvasSize(){if(!this.canvas)return;const t=this.getCanvasWidth(),e=this.getCanvasHeight();(this.canvas.width!==t||this.canvas.height!==e)&&(this.canvas.width=t,this.canvas.height=e)}getCanvasWidth(){return Math.floor(this.offsetWidth||window.innerWidth||1)}getCanvasHeight(){return Math.floor(this.offsetHeight||window.innerHeight||1)}startLoop(){if(this.frameHandle)return;const t=()=>{this.frameHandle=window.requestAnimationFrame(t),this.stepParticles(),this.drawParticles()};this.frameHandle=window.requestAnimationFrame(t)}stopLoop(){this.frameHandle&&(window.cancelAnimationFrame(this.frameHandle),this.frameHandle=void 0)}stepParticles(){const t=performance.now(),e=Math.min(32,t-this.lastTick),r=e/1e3;this.lastTick=t;const s=900;this.particles=this.particles.filter(l=>(l.life-=e,l.life<=0?!1:(l.vy+=s*r,l.x+=l.vx*r,l.y+=l.vy*r,l.rotation+=l.rotationSpeed*r,l.y<this.getCanvasHeight()+80)))}drawParticles(){if(!(!this.ctx||!this.canvas)){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(const t of this.particles){const e=Math.max(0,t.life/t.ttl);this.ctx.save(),this.ctx.globalAlpha=e,this.ctx.translate(t.x,t.y),this.ctx.rotate(t.rotation),this.ctx.fillStyle=t.color,t.shape==="circle"?(this.ctx.beginPath(),this.ctx.arc(0,0,t.size/2,0,Math.PI*2),this.ctx.fill()):this.ctx.fillRect(-t.size/2,-t.size/2,t.size,t.size*.6),this.ctx.restore()}}}resetPull(){this.pulling=!1,this.pullVector={x:0,y:0},this.origin=null}};Tt.styles=Yn`
    :host {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
      pointer-events: none;
      z-index: 3;
    }

    canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .sling-surface {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .sling-surface[data-active='true'] {
      pointer-events: auto;
      cursor: crosshair;
      touch-action: none;
    }

    .sling-surface[data-active='true'][data-pulling='true'] {
      cursor: grabbing;
    }

    .pull-reticle {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .reticle-origin,
    .reticle-handle {
      position: absolute;
      width: 12px;
      height: 12px;
      margin-left: -6px;
      margin-top: -6px;
      border-radius: 50%;
      box-shadow: 0 10px 16px rgba(15, 23, 42, 0.2);
    }

    .reticle-origin {
      background: rgba(15, 23, 42, 0.8);
      border: 2px solid rgba(248, 250, 252, 0.8);
    }

    .reticle-handle {
      background: linear-gradient(135deg, #0ea5e9, #a855f7);
      border: 2px solid rgba(255, 255, 255, 0.9);
    }

    .reticle-band {
      position: absolute;
      height: 4px;
      border-radius: 999px;
      transform-origin: 0 50%;
      background: linear-gradient(90deg, rgba(14, 165, 233, 0.9), rgba(99, 102, 241, 0.95));
      box-shadow: 0 4px 12px rgba(79, 70, 229, 0.35);
    }
  `;fr([Vt({attribute:!1})],Tt.prototype,"controller",2);fr([Vt({type:Boolean,reflect:!0})],Tt.prototype,"active",2);fr([Ye()],Tt.prototype,"pulling",2);fr([Ye()],Tt.prototype,"pullVector",2);fr([Ye()],Tt.prototype,"origin",2);fr([Is("canvas")],Tt.prototype,"canvas",2);Tt=fr([Jn("confetti-sling")],Tt);var hd=Object.defineProperty,fd=Object.getOwnPropertyDescriptor,ht=(t,e,r,s)=>{for(var l=s>1?void 0:s?fd(e,r):e,n=t.length-1,i;n>=0;n--)(i=t[n])&&(l=(s?i(e,r,l):i(l))||l);return s&&l&&hd(e,r,l),l};const Il="metro-retro-profile",kl="metro-retro-background",Pl="libretro-onboarding",_s=["#fbbf24","#ef4444","#22d3ee","#a855f7","#34d399","#f472b6"],fn={name:"",color:_s[0]};let lt=class extends zt{constructor(){super(...arguments),this.boardId=null,this.copyState="idle",this.profile=null,this.profileDraft={...fn},this.showProfileDialog=!1,this.participants=[],this.highlightedParticipantId=null,this.background="start-stop-continue",this.confettiEnabled=!1,this.showOnboarding=!0,this.onHashChange=()=>this.handleRoute(),this.onParticipantsChange=t=>{const e=t.detail;this.participants=e,this.highlightedParticipantId&&!e.some(r=>r.id===this.highlightedParticipantId)&&(this.highlightedParticipantId=null)},this.onBackgroundChange=t=>{const e=t.detail;e&&(this.background=e,this.persistBackground(e))},this.startFreshBoard=()=>{this.navigateToBoard(Qr())},this.handleFilterChange=t=>{const e=t.target.value;this.highlightedParticipantId=e||null},this.handleBackgroundChange=t=>{var r;const e=t.target.value;this.background=e,this.persistBackground(e),(r=this.controller)==null||r.setBoardBackground(e)},this.handleConfettiShortcut=t=>{!this.isReadyForConfetti||!this.isShortcutEvent(t)||(t.preventDefault(),this.confettiEnabled=!this.confettiEnabled)},this.handleConfettiShot=()=>{this.confettiEnabled=!1},this.handleProfileSubmit=t=>{t.preventDefault();const e=this.profileDraft.name.trim();if(!e)return;const r={name:e,color:this.profileDraft.color||fn.color};this.profile=r,this.profileDraft={...r},this.showProfileDialog=!1,this.persistProfile(r),this.boardId?this.bootstrapBoard(this.boardId):this.handleRoute()},this.handleProfileNameInput=t=>{const e=t.target;this.profileDraft={...this.profileDraft,name:e.value}},this.handleProfileColorInput=t=>{const e=t.target;this.profileDraft={...this.profileDraft,color:e.value}},this.randomizeProfileColor=()=>{const t=_s[Math.floor(Math.random()*_s.length)];this.profileDraft={...this.profileDraft,color:t}},this.dismissOnboarding=()=>{if(this.showOnboarding=!1,!(typeof window>"u"))try{window.localStorage.setItem(Pl,"dismissed")}catch{}},this.openProfileDialog=()=>{this.profileDraft=this.profile?{...this.profile}:{...fn},this.showProfileDialog=!0},this.closeProfileDialog=()=>{this.profile&&(this.profileDraft={...this.profile},this.showProfileDialog=!1)}}connectedCallback(){super.connectedCallback(),this.initializeProfile(),this.initializeBackground(),this.initializeOnboarding(),window.addEventListener("hashchange",this.onHashChange),window.addEventListener("keydown",this.handleConfettiShortcut),this.handleRoute()}disconnectedCallback(){var t,e,r;window.removeEventListener("hashchange",this.onHashChange),window.removeEventListener("keydown",this.handleConfettiShortcut),(t=this.controller)==null||t.removeEventListener("participants-changed",this.onParticipantsChange),(e=this.controller)==null||e.removeEventListener("background-changed",this.onBackgroundChange),(r=this.controller)==null||r.dispose(),super.disconnectedCallback()}render(){const t=!!(this.boardId&&this.controller&&this.profile);return Ge`
            <retro-board
                .controller=${this.controller}
                .highlightedParticipantId=${this.highlightedParticipantId}
                .background=${this.background}
            ></retro-board>
            <confetti-sling
                .controller=${this.controller}
                .active=${this.confettiEnabled&&t}
                @confetti-shot=${this.handleConfettiShot}
            ></confetti-sling>
            <div class="ui-overlay">
                ${t?Ge`
                          <div class="toolbar">
                              <div class="toolbar-brand">
                                  <span class="logo-dot"></span>
                                  <div class="brand-text">
                                      <p class="title">libRetro</p>
                                      <p class="meta">
                                          Board #${this.shortBoardId}
                                      </p>
                                  </div>
                              </div>
                              <div class="toolbar-controls">
                                  ${this.renderBackgroundControl()}
                                  ${this.renderFilterControl()}
                                  <div class="toolbar-actions">
                                      <button
                                          class="ghost"
                                          @click=${this.handleCopyLink}
                                      >
                                          ${this.copyLabel}
                                      </button>
                                      <button
                                          class="primary"
                                          @click=${this.startFreshBoard}
                                      >
                                          New
                                      </button>
                                  </div>
                              </div>
                          </div>
                          ${this.renderProfilePanel()}
                          ${this.renderOnboarding()}
                      `:Ge`<div class="loading">
                          Preparing your retro board
                      </div>`}
                ${this.renderProfileDialog()}
            </div>
        `}get copyLabel(){switch(this.copyState){case"copied":return"Link copied";case"error":return"Copy failed";default:return"Copy link"}}get shortBoardId(){return this.boardId?this.boardId.slice(0,6).toUpperCase():""}handleRoute(){const t=this.extractBoardId();if(!t){this.navigateToBoard(Qr());return}t===this.boardId&&this.controller||this.bootstrapBoard(t)}extractBoardId(){const e=window.location.hash.replace(/^#/,"").match(/board\/([\w-]+)/i);return(e==null?void 0:e[1])??null}navigateToBoard(t){window.location.hash=`#/board/${t}`}bootstrapBoard(t){var r,s,l;if((r=this.controller)==null||r.removeEventListener("participants-changed",this.onParticipantsChange),(s=this.controller)==null||s.removeEventListener("background-changed",this.onBackgroundChange),(l=this.controller)==null||l.dispose(),this.boardId=t,!this.profile){this.controller=void 0,this.participants=[];return}const e=new Xp(t,this.profileToParticipant(this.profile),this.background);e.addEventListener("participants-changed",this.onParticipantsChange),e.addEventListener("background-changed",this.onBackgroundChange),this.controller=e,this.participants=e.getParticipants(),this.background=e.getBoardBackground(),this.persistBackground(this.background),this.copyState="idle"}async handleCopyLink(){try{await navigator.clipboard.writeText(window.location.href),this.copyState="copied"}catch{this.copyState="error"}finally{window.setTimeout(()=>this.copyState="idle",2e3)}}initializeProfile(){const t=this.readProfileFromStorage();if(t){this.profile=t,this.profileDraft={...t},this.showProfileDialog=!1;return}this.profile=null,this.profileDraft={...fn},this.showProfileDialog=!0}initializeOnboarding(){if(typeof window>"u"){this.showOnboarding=!0;return}try{const t=window.localStorage.getItem(Pl);this.showOnboarding=t!=="dismissed"}catch{this.showOnboarding=!0}}readProfileFromStorage(){if(typeof window>"u")return null;try{const t=window.localStorage.getItem(Il);if(!t)return null;const e=JSON.parse(t);return typeof(e==null?void 0:e.name)!="string"||typeof(e==null?void 0:e.color)!="string"?null:{name:e.name,color:e.color}}catch{return null}}persistProfile(t){if(!(typeof window>"u"))try{window.localStorage.setItem(Il,JSON.stringify(t))}catch{}}renderProfileDialog(){if(!this.showProfileDialog&&this.profile)return null;const t=this.profileDraft.name.trim().length>0,e=!!this.profile;return Ge`
            <div class="profile-overlay">
                <form class="profile-card" @submit=${this.handleProfileSubmit}>
                    <header>
                        <p class="eyebrow">Welcome</p>
                        <h2>Set up your marker</h2>
                        <p class="note">
                            Pick a display name and sticky color so teammates
                            know who is who.
                        </p>
                    </header>
                    <label>
                        <span>Name</span>
                        <input
                            type="text"
                            .value=${this.profileDraft.name}
                            @input=${this.handleProfileNameInput}
                            placeholder="e.g. Casey"
                            required
                        />
                    </label>
                    <label>
                        <span>Color</span>
                        <div class="color-row">
                            <input
                                type="color"
                                class="color-picker"
                                .value=${this.profileDraft.color}
                                @input=${this.handleProfileColorInput}
                            />
                            <button
                                type="button"
                                class="ghost"
                                @click=${this.randomizeProfileColor}
                            >
                                Random
                            </button>
                        </div>
                    </label>
                    <div class="profile-actions">
                        ${e?Ge`<button
                                  type="button"
                                  class="ghost"
                                  @click=${this.closeProfileDialog}
                              >
                                  Cancel
                              </button>`:null}
                        <button
                            class="primary"
                            type="submit"
                            ?disabled=${!t}
                        >
                            ${this.profile?"Save":"Enter board"}
                        </button>
                    </div>
                </form>
            </div>
        `}renderFilterControl(){return this.participants.length?Ge`
            <label class="filter-control">
                <select
                    @change=${this.handleFilterChange}
                    .value=${this.highlightedParticipantId??""}
                >
                    <option value="">All notes</option>
                    ${this.participants.map(t=>Ge`<option value=${t.id}>
                                ${t.label}
                            </option>`)}
                </select>
            </label>
        `:null}renderProfilePanel(){if(!this.profile)return null;const t=this.localParticipantId,e=this.participants.filter(r=>r.id!==t);return Ge`
            <div class="profile-panel">
                <button
                    type="button"
                    class="participant-circle self"
                    style=${`--circle:${this.profile.color}`}
                    @click=${this.openProfileDialog}
                    aria-label="Edit profile"
                    title="Edit profile"
                >
                    ${this.profileInitials}
                </button>
                <div class="participant-stack" role="list">
                    ${e.map(r=>Ge`
                            <span
                                class="participant-circle peer"
                                role="listitem"
                                style=${`--circle:${r.color}`}
                                title=${r.label}
                            >
                                ${this.participantInitials(r.label)}
                            </span>
                        `)}
                </div>
            </div>
        `}renderOnboarding(){return this.showOnboarding?Ge`
            <div class="onboarding-card" role="dialog" aria-live="polite">
                <div class="onboarding-header">
                    <p class="eyebrow">Quick guide</p>
                    <button
                        type="button"
                        class="ghost onboarding-dismiss"
                        aria-label="Dismiss onboarding"
                        @click=${this.dismissOnboarding}
                    >
                        
                    </button>
                </div>
                <h3>Welcome to libRetro</h3>
                <ul>
                    <li>Double-click anywhere on the board to drop a sticky.</li>
                    <li>Hold and drag to pan; use the +/- buttons to zoom.</li>
                    <li>Press <strong>Shift + C</strong> to fire one confetti sling.</li>
                </ul>
                <button class="primary" type="button" @click=${this.dismissOnboarding}>
                    Got it
                </button>
            </div>
        `:null}renderBackgroundControl(){return Ge`
            <label class="filter-control">
                <select
                    @change=${this.handleBackgroundChange}
                    .value=${this.background}
                >
                    ${bs.map(t=>Ge`<option value=${t.id}>
                                ${t.label}
                            </option>`)}
                </select>
            </label>
        `}get isReadyForConfetti(){return!!(this.boardId&&this.controller&&this.profile)}get localParticipantId(){var t,e;return((e=(t=this.controller)==null?void 0:t.getLocalParticipant())==null?void 0:e.id)??null}get profileInitials(){var r,s;const t=(s=(r=this.profile)==null?void 0:r.name)==null?void 0:s.trim();return t?(t.split(/\s+/).filter(Boolean).slice(0,2).map(l=>l[0]).join("")||t.slice(0,2)).toUpperCase():"YOU"}participantInitials(t){const e=t==null?void 0:t.trim();return e?(e.split(/\s+/).filter(Boolean).slice(0,2).map(s=>s[0]).join("")||e.slice(0,2)).toUpperCase():"?"}isShortcutEvent(t){var l;if(!t.shiftKey||t.key.toLowerCase()!=="c")return!1;const e=t.target;if(!e)return!0;const r=e.tagName;return!(((l=e.getAttribute("contenteditable"))==null?void 0:l.toLowerCase())==="true"||r==="INPUT"||r==="TEXTAREA"||r==="SELECT")}profileToParticipant(t){return{label:t.name,color:t.color}}initializeBackground(){const t=this.readBackgroundFromStorage();this.background=t??"start-stop-continue"}readBackgroundFromStorage(){if(typeof window>"u")return null;const t=window.localStorage.getItem(kl);return t&&bs.some(e=>e.id===t)?t:null}persistBackground(t){typeof window>"u"||window.localStorage.setItem(kl,t)}};lt.styles=Yn`
        :host {
            display: block;
            font-family:
                "Inter",
                system-ui,
                -apple-system,
                BlinkMacSystemFont,
                sans-serif;
            color: #0f172a;
        }

        retro-board {
            position: fixed;
            inset: 0;
            z-index: 0;
        }

        .ui-overlay {
            position: fixed;
            inset: 0;
            z-index: 2;
            pointer-events: none;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            justify-content: flex-start;
        }

        .loading {
            margin-top: 20vh;
            font-size: 1.125rem;
            background: rgba(255, 255, 255, 0.85);
            padding: 1rem 1.5rem;
            border-radius: 16px;
            display: inline-block;
            pointer-events: auto;
        }

        .toolbar {
            pointer-events: auto;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 0.85rem 1.25rem;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid rgba(15, 23, 42, 0.08);
            box-shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
            width: min(100%, 960px);
        }

        .toolbar-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-width: 0;
        }

        .logo-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: linear-gradient(120deg, #0ea5e9, #6366f1);
        }

        .brand-text {
            display: flex;
            flex-direction: column;
            line-height: 1.2;
        }

        .title {
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: #111827;
        }

        .meta {
            margin: 0;
            font-size: 0.8rem;
            color: #6b7280;
        }

        .toolbar-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex: 1;
            justify-content: flex-end;
            flex-wrap: wrap;
        }

        .toolbar-actions {
            display: flex;
            gap: 0.45rem;
            align-items: center;
        }

        .filter-control {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
            font-size: 0.75rem;
            color: #64748b;
        }

        .filter-control span {
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-size: 0.7rem;
            color: #94a3b8;
        }

        .filter-control select {
            border-radius: 8px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            padding: 0.35rem 0.9rem;
            font-size: 0.85rem;
            background: #ffffff;
        }

        .eyebrow {
            font-size: 0.75rem;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            margin: 0;
            color: #94a3b8;
        }

        button {
            border-radius: 8px;
            padding: 0.45rem 1.1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition:
                background 120ms ease,
                color 120ms ease;
            pointer-events: auto;
            border: 1px solid transparent;
        }

        .primary {
            background: #111827;
            color: #f8fafc;
            border-color: #111827;
        }

        .ghost {
            background: #ffffff;
            color: #111827;
            border-color: rgba(15, 23, 42, 0.15);
        }

        .profile-panel {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            pointer-events: auto;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            align-items: center;
        }

        .participant-stack {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
            align-items: center;
        }

        .onboarding-card {
            position: absolute;
            top: 1.5rem;
            left: 1.5rem;
            width: min(280px, 90vw);
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            border: 1px solid rgba(15, 23, 42, 0.08);
            box-shadow: 0 20px 45px rgba(15, 23, 42, 0.15);
            padding: 1rem 1.25rem;
            display: flex;
            flex-direction: column;
            gap: 0.65rem;
        }

        .onboarding-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.5rem;
        }

        .onboarding-card h3 {
            margin: 0;
            font-size: 1.1rem;
        }

        .onboarding-card ul {
            margin: 0;
            padding-left: 1.1rem;
            color: #475569;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        .onboarding-card strong {
            font-weight: 600;
            color: #0f172a;
        }

        .onboarding-dismiss {
            width: 28px;
            height: 28px;
            padding: 0;
            display: grid;
            place-items: center;
            font-size: 1.1rem;
            border-radius: 50%;
        }

        .participant-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--circle, #94a3b8);
            color: #0f172a;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(15, 23, 42, 0.18);
            box-shadow: 0 6px 12px rgba(15, 23, 42, 0.12);
        }

        .participant-circle.self {
            width: 48px;
            height: 48px;
            cursor: pointer;
        }

        .profile-overlay {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.3);
            display: grid;
            place-items: center;
            pointer-events: auto;
            padding: 1.5rem;
        }

        .profile-card {
            width: min(420px, 100%);
            background: #ffffff;
            border-radius: 16px;
            padding: 1.75rem;
            box-shadow: 0 25px 60px rgba(15, 23, 42, 0.15);
            border: 1px solid rgba(15, 23, 42, 0.08);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .profile-card header {
            margin-bottom: 0.5rem;
        }

        .profile-card h2 {
            margin: 0.15rem 0 0.25rem;
            font-size: 1.4rem;
        }

        .profile-card .note {
            margin: 0;
            color: #64748b;
            font-size: 0.9rem;
        }

        label {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            font-size: 0.9rem;
            color: #475569;
        }

        input[type="text"] {
            border-radius: 8px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            padding: 0.65rem 0.9rem;
            font-size: 1rem;
        }

        .color-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .color-picker {
            width: 52px;
            height: 44px;
            padding: 0;
            border: 1px solid rgba(148, 163, 184, 0.6);
            border-radius: 10px;
            background: #ffffff;
            cursor: pointer;
        }

        .color-picker::-webkit-color-swatch-wrapper {
            padding: 0;
            border-radius: 8px;
        }

        .color-picker::-webkit-color-swatch {
            border: none;
            border-radius: 8px;
        }

        .profile-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }

        .profile-actions .primary[disabled] {
            opacity: 0.4;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            .ui-overlay {
                padding: 1rem;
            }

            .toolbar {
                flex-direction: column;
                align-items: stretch;
                gap: 0.85rem;
            }

            .toolbar-controls {
                width: 100%;
                justify-content: flex-start;
            }

            .toolbar-actions {
                width: 100%;
                justify-content: flex-start;
                flex-wrap: wrap;
            }

            .profile-card {
                padding: 1.25rem;
            }
        }
    `;ht([Ye()],lt.prototype,"boardId",2);ht([Ye()],lt.prototype,"controller",2);ht([Ye()],lt.prototype,"copyState",2);ht([Ye()],lt.prototype,"profile",2);ht([Ye()],lt.prototype,"profileDraft",2);ht([Ye()],lt.prototype,"showProfileDialog",2);ht([Ye()],lt.prototype,"participants",2);ht([Ye()],lt.prototype,"highlightedParticipantId",2);ht([Ye()],lt.prototype,"background",2);ht([Ye()],lt.prototype,"confettiEnabled",2);ht([Ye()],lt.prototype,"showOnboarding",2);lt=ht([Jn("app-root")],lt);
